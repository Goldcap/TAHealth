if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(g,f){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/}var d=dojo.date.stamp._isoRegExp.exec(g);var c=null;if(d){d.shift();if(d[1]){d[1]--}if(d[6]){d[6]*=1000}if(f){f=new Date(f);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(k){return f["get"+k]()}).forEach(function(l,k){if(d[k]===undefined){d[k]=l}})}c=new Date(d[0]||1970,d[1]||0,d[2]||1,d[3]||0,d[4]||0,d[5]||0,d[6]||0);var b=0;var a=d[7]&&d[7].charAt(0);if(a!="Z"){b=((d[8]||0)*60)+(Number(d[9])||0);if(a!="-"){b*=-1}}if(a){b-=c.getTimezoneOffset()}if(b){c.setTime(c.getTime()+b*60000)}}return c};dojo.date.stamp.toISOString=function(n,m){var o=function(p){return(p<10)?"0"+p:p};m=m||{};var l=[];var g=m.zulu?"getUTC":"get";var k="";if(m.selector!="time"){var f=n[g+"FullYear"]();k=["0000".substr((f+"").length)+f,o(n[g+"Month"]()+1),o(n[g+"Date"]())].join("-")}l.push(k);if(m.selector!="date"){var d=[o(n[g+"Hours"]()),o(n[g+"Minutes"]()),o(n[g+"Seconds"]())].join(":");var c=n[g+"Milliseconds"]();if(m.milliseconds){d+="."+(c<100?"0":"")+o(c)}if(m.zulu){d+="Z"}else{if(m.selector!="time"){var b=n.getTimezoneOffset();var a=Math.abs(b);d+=(b>0?"-":"+")+o(Math.floor(a/60))+":"+o(a%60)}}l.push(d)}return l.join("T")}}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){var l=dojo;var f=l._scopeName+"Type";var m="["+f+"]";var b=0,k={};var g=function(q,p){var r=p||k;if(dojo.isIE){var s=q.__dojoNameCache;if(s&&r[s]===q){return s}}var d;do{d="__"+b++}while(d in r);r[d]=q;return d};function c(d){if(l.isString(d)){return"string"}if(typeof d=="number"){return"number"}if(typeof d=="boolean"){return"boolean"}if(l.isFunction(d)){return"function"}if(l.isArray(d)){return"array"}if(d instanceof Date){return"date"}if(d instanceof l._Url){return"url"}return"object"}function a(q,d){switch(d){case"string":return q;case"number":return q.length?Number(q):NaN;case"boolean":return typeof q=="boolean"?q:!(q.toLowerCase()=="false");case"function":if(l.isFunction(q)){q=q.toString();q=l.trim(q.substring(q.indexOf("{")+1,q.length-1))}try{if(q.search(/[^\w\.]+/i)!=-1){q=g(new Function(q),this)}return l.getObject(q,false)}catch(p){return new Function()}case"array":return q?q.split(/\s*,\s*/):[];case"date":switch(q){case"":return new Date("");case"now":return new Date();default:return l.date.stamp.fromISOString(q)}case"url":return l.baseUrl+q;default:return l.fromJson(q)}}var o={};function n(r){if(!o[r]){var d=l.getObject(r);if(!l.isFunction(d)){throw new Error("Could not load class '"+r+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?")}var u=d.prototype;var t={},s={};for(var q in u){if(q.charAt(0)=="_"){continue}if(q in s){continue}var p=u[q];t[q]=c(p)}o[r]={cls:d,params:t}}return o[r]}this._functionFromScript=function(q){var r="";var p="";var d=q.getAttribute("args");if(d){l.forEach(d.split(/\s*,\s*/),function(u,t){r+="var "+u+" = arguments["+t+"]; "})}var s=q.getAttribute("with");if(s&&s.length){l.forEach(s.split(/\s*,\s*/),function(t){r+="with("+t+"){";p+="}"})}return new Function(r+q.innerHTML+p)};this.instantiate=function(q,p){var d=[];p=p||{};l.forEach(q,function(G){if(!G){return}var F=f in p?p[f]:G.getAttribute(f);if(!F||!F.length){return}var E=n(F),D=E.cls,r=D._noScript||D.prototype._noScript;var C={},B=G.attributes;for(var A in E.params){var z=A in p?{value:p[A],specified:true}:B.getNamedItem(A);if(!z||(!z.specified&&(!dojo.isIE||A.toLowerCase()!="value"))){continue}var y=z.value;switch(A){case"class":y="className" in p?p.className:G.className;break;case"style":y="style" in p?p.style:(G.style&&G.style.cssText)}var w=E.params[A];if(typeof y=="string"){C[A]=a(y,w)}else{C[A]=y}}if(!r){var u=[],s=[];l.query("> script[type^='dojo/']",G).orphan().forEach(function(K){var J=K.getAttribute("event"),I=K.getAttribute("type"),H=l.parser._functionFromScript(K);if(J){if(I=="dojo/connect"){u.push({event:J,func:H})}else{C[J]=H}}else{s.push(H)}})}var x=D.markupFactory;if(!x&&D.prototype){x=D.prototype.markupFactory}var v=x?x(C,G,D):new D(C,G);d.push(v);var t=G.getAttribute("jsId");if(t){l.setObject(t,v)}if(!r){l.forEach(u,function(H){l.connect(v,H.event,null,H.func)});l.forEach(s,function(H){H.call(v)})}});l.forEach(d,function(r){if(r&&r.startup&&!r._started&&(!r.getParent||!r.getParent())){r.startup()}});return d};this.parse=function(q){var p=l.query(m,q);var d=this.instantiate(p);return d}}();(function(){var a=function(){if(dojo.config.parseOnLoad==true){dojo.parser.parse()}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,a)}else{dojo._loaders.unshift(a)}})()}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(b,a){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(c){if(a&&a.indexOf(c)!=-1){return c}return"\\"+c})};dojo.regexp.buildGroupRE=function(c,f,g){if(!(c instanceof Array)){return f(c)}var a=[];for(var d=0;d<c.length;d++){a.push(f(c[d]))}return dojo.regexp.group(a.join("|"),g)};dojo.regexp.group=function(a,b){return"("+(b?"?:":"")+a+")"}}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(p,o,n){var l=document.cookie;if(arguments.length==1){var m=l.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(p)+"=([^;]*)"));return m?decodeURIComponent(m[1]):undefined}else{n=n||{};var a=n.expires;if(typeof a=="number"){var k=new Date();k.setTime(k.getTime()+a*24*60*60*1000);a=n.expires=k}if(a&&a.toUTCString){n.expires=a.toUTCString()}o=encodeURIComponent(o);var g=p+"="+o,f;for(f in n){g+="; "+f;var b=n[f];if(b!==true){g+="="+b}}document.cookie=g}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1})}}return navigator.cookieEnabled}}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(d,a){var b="^";var g=null;for(var f=0;f<d.length;f++){g=d.charAt(f);switch(g){case"\\":b+=g;f++;b+=d.charAt(f);break;case"*":b+=".*";break;case"?":b+=".";break;case"$":case"^":case"/":case"+":case".":case"|":case"(":case")":case"{":case"}":case"[":case"]":b+="\\";default:b+=g}}b+="$";if(a){return new RegExp(b,"mi")}else{return new RegExp(b,"m")}}}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(d,c){var f=-1;if(d===null){d=undefined}if(c===null){c=undefined}if(d==c){f=0}else{if(d>c||d==null){f=1}}return f};dojo.data.util.sorter.createSortFunction=function(a,k){var g=[];function f(m,l){return function(q,p){var o=k.getValue(q,m);var n=k.getValue(p,m);var r=null;if(k.comparatorMap){if(typeof m!=="string"){m=k.getIdentity(m)}r=k.comparatorMap[m]||dojo.data.util.sorter.basicComparator}r=r||dojo.data.util.sorter.basicComparator;return l*r(o,n)}}var d;for(var c=0;c<a.length;c++){d=a[c];if(d.attribute){var b=(d.descending)?-1:1;g.push(f(d.attribute,b))}}return function(m,l){var o=0;while(o<g.length){var n=g[o++](m,l);if(n!==0){return n}}return 0}}}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(a){a=a||{};if(!a.store){a.store=this}var d=this;var c=function(k,g){if(g.onError){var f=g.scope||dojo.global;g.onError.call(f,k,g)}};var b=function(l,r){var q=r.abort||null;var p=false;var o=r.start?r.start:0;var n=(r.count&&(r.count!==Infinity))?(o+r.count):l.length;r.abort=function(){p=true;if(q){q.call(r)}};var m=r.scope||dojo.global;if(!r.store){r.store=d}if(r.onBegin){r.onBegin.call(m,l.length,r)}if(r.sort){l.sort(dojo.data.util.sorter.createSortFunction(r.sort,d))}if(r.onItem){for(var f=o;(f<l.length)&&(f<n);++f){var k=l[f];if(!p){r.onItem.call(m,k,r)}}}if(r.onComplete&&!p){var g=null;if(!r.onItem){g=l.slice(o,n)}r.onComplete.call(m,g,r)}};this._fetchItems(a,b,c);return a}}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=a.url;this._jsonData=a.data;this._datatypeMap=a.typeMap||{};if(!this._datatypeMap.Date){this._datatypeMap.Date={type:Date,deserialize:function(b){return dojo.date.stamp.fromISOString(b)}}}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(a.urlPreventCache!==undefined){this.urlPreventCache=a.urlPreventCache?true:false}if(a.clearOnClose){this.clearOnClose=true}},url:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,_assertIsItem:function(a){if(!this.isItem(a)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.")}},_assertIsAttribute:function(a){if(typeof a!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.")}},getValue:function(c,b,a){var d=this.getValues(c,b);return(d.length>0)?d[0]:a},getValues:function(b,a){this._assertIsItem(b);this._assertIsAttribute(a);return b[a]||[]},getAttributes:function(c){this._assertIsItem(c);var b=[];for(var a in c){if((a!==this._storeRefPropName)&&(a!==this._itemNumPropName)&&(a!==this._rootItemPropName)&&(a!==this._reverseRefMap)){b.push(a)}}return b},hasAttribute:function(b,a){return this.getValues(b,a).length>0},containsValue:function(d,c,b){var a=undefined;if(typeof b==="string"){a=dojo.data.util.filter.patternToRegExp(b,false)}return this._containsValue(d,c,b,a)},_containsValue:function(b,a,d,c){return dojo.some(this.getValues(b,a),function(f){if(f!==null&&!dojo.isObject(f)&&c){if(f.toString().match(c)){return true}}else{if(d===f){return true}}})},isItem:function(a){if(a&&a[this._storeRefPropName]===this){if(this._arrayOfAllItems[a[this._itemNumPropName]]===a){return true}}return false},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a)){return this.getValue(a,this._labelAttr)}return undefined},getLabelAttributes:function(a){if(this._labelAttr){return[this._labelAttr]}return null},_fetchItems:function(k,g,f){var d=this;var c=function(s,r){var p=[];var w,x;if(s.query){var v;var u=s.queryOptions?s.queryOptions.ignoreCase:false;var t={};for(x in s.query){v=s.query[x];if(typeof v==="string"){t[x]=dojo.data.util.filter.patternToRegExp(v,u)}}for(w=0;w<r.length;++w){var q=true;var o=r[w];if(o===null){q=false}else{for(x in s.query){v=s.query[x];if(!d._containsValue(o,x,v,t[x])){q=false}}}if(q){p.push(o)}}g(p,s)}else{for(w=0;w<r.length;++w){var n=r[w];if(n!==null){p.push(n)}}g(p,s)}};if(this._loadFinished){c(k,this._getItemsArray(k.queryOptions))}else{if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:k,filter:c})}else{this._loadInProgress=true;var b={url:d._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache};var a=dojo.xhrGet(b);a.addCallback(function(o){try{d._getItemsFromLoadedData(o);d._loadFinished=true;d._loadInProgress=false;c(k,d._getItemsArray(k.queryOptions));d._handleQueuedFetches()}catch(n){d._loadFinished=true;d._loadInProgress=false;f(n,k)}});a.addErrback(function(n){d._loadInProgress=false;f(n,k)});var m=null;if(k.abort){m=k.abort}k.abort=function(){var n=a;if(n&&n.fired===-1){n.cancel();n=null}if(m){m.call(k)}}}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;c(k,this._getItemsArray(k.queryOptions))}catch(l){f(l,k)}}else{f(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),k)}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var d=0;d<this._queuedFetches.length;d++){var c=this._queuedFetches[d];var b=c.args;var a=c.filter;if(a){a(b,this._getItemsArray(b.queryOptions))}else{this.fetchItemByIdentity(b)}}this._queuedFetches=[]}},_getItemsArray:function(a){if(a&&a.deep){return this._arrayOfAllItems}return this._arrayOfTopLevelItems},close:function(a){if(this.clearOnClose&&(this._jsonFileUrl!=="")){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[]}},_getItemsFromLoadedData:function(c){var b=false;function a(k){var B=((k!==null)&&(typeof k==="object")&&(!dojo.isArray(k)||b)&&(!dojo.isFunction(k))&&(k.constructor==Object||dojo.isArray(k))&&(typeof k._reference==="undefined")&&(typeof k._type==="undefined")&&(typeof k._value==="undefined"));return B}var o=this;function m(G){o._arrayOfAllItems.push(G);for(var F in G){var E=G[F];if(E){if(dojo.isArray(E)){var D=E;for(var B=0;B<D.length;++B){var C=D[B];if(a(C)){m(C)}}}else{if(a(E)){m(E)}}}}}this._labelAttr=c.label;var u;var n;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=c.items;for(u=0;u<this._arrayOfTopLevelItems.length;++u){n=this._arrayOfTopLevelItems[u];if(dojo.isArray(n)){b=true}m(n);n[this._rootItemPropName]=true}var l={};var A;for(u=0;u<this._arrayOfAllItems.length;++u){n=this._arrayOfAllItems[u];for(A in n){if(A!==this._rootItemPropName){var g=n[A];if(g!==null){if(!dojo.isArray(g)){n[A]=[g]}}else{n[A]=[null]}}l[A]=A}}while(l[this._storeRefPropName]){this._storeRefPropName+="_"}while(l[this._itemNumPropName]){this._itemNumPropName+="_"}while(l[this._reverseRefMap]){this._reverseRefMap+="_"}var f;var d=c.identifier;if(d){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=d;for(u=0;u<this._arrayOfAllItems.length;++u){n=this._arrayOfAllItems[u];f=n[d];var z=f[0];if(!this._itemsByIdentity[z]){this._itemsByIdentity[z]=n}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+d+"].  Value collided: ["+z+"]")}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+d+"].  Value collided: ["+z+"]")}}}}}else{this._features["dojo.data.api.Identity"]=Number}for(u=0;u<this._arrayOfAllItems.length;++u){n=this._arrayOfAllItems[u];n[this._storeRefPropName]=this;n[this._itemNumPropName]=u}for(u=0;u<this._arrayOfAllItems.length;++u){n=this._arrayOfAllItems[u];for(A in n){f=n[A];for(var s=0;s<f.length;++s){g=f[s];if(g!==null&&typeof g=="object"){if(g._type&&g._value){var y=g._type;var x=this._datatypeMap[y];if(!x){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+y+"'")}else{if(dojo.isFunction(x)){f[s]=new x(g._value)}else{if(dojo.isFunction(x.deserialize)){f[s]=x.deserialize(g._value)}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function")}}}}if(g._reference){var w=g._reference;if(!dojo.isObject(w)){f[s]=this._itemsByIdentity[w]}else{for(var q=0;q<this._arrayOfAllItems.length;++q){var v=this._arrayOfAllItems[q];var t=true;for(var r in w){if(v[r]!=w[r]){t=false}}if(t){f[s]=v}}}if(this.referenceIntegrity){var p=f[s];if(this.isItem(p)){this._addReferenceToMap(p,n,A)}}}else{if(this.isItem(g)){if(this.referenceIntegrity){this._addReferenceToMap(g,n,A)}}}}}}}},_addReferenceToMap:function(c,b,a){},getIdentity:function(c){var b=this._features["dojo.data.api.Identity"];if(b===Number){return c[this._itemNumPropName]}else{var a=c[b];if(a){return a[0]}}return null},fetchItemByIdentity:function(g){var f;var d;if(!this._loadFinished){var c=this;if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:g})}else{this._loadInProgress=true;var b={url:c._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache};var a=dojo.xhrGet(b);a.addCallback(function(k){var m=g.scope?g.scope:dojo.global;try{c._getItemsFromLoadedData(k);c._loadFinished=true;c._loadInProgress=false;f=c._getItemByIdentity(g.identity);if(g.onItem){g.onItem.call(m,f)}c._handleQueuedFetches()}catch(l){c._loadInProgress=false;if(g.onError){g.onError.call(m,l)}}});a.addErrback(function(l){c._loadInProgress=false;if(g.onError){var k=g.scope?g.scope:dojo.global;g.onError.call(k,l)}})}}else{if(this._jsonData){c._getItemsFromLoadedData(c._jsonData);c._jsonData=null;c._loadFinished=true;f=c._getItemByIdentity(g.identity);if(g.onItem){d=g.scope?g.scope:dojo.global;g.onItem.call(d,f)}}}}else{f=this._getItemByIdentity(g.identity);if(g.onItem){d=g.scope?g.scope:dojo.global;g.onItem.call(d,f)}}},_getItemByIdentity:function(b){var a=null;if(this._itemsByIdentity){a=this._itemsByIdentity[b]}else{a=this._arrayOfAllItems[b]}if(a===undefined){a=null}return a},getIdentityAttributes:function(b){var a=this._features["dojo.data.api.Identity"];if(a===Number){return null}else{return[a]}},_forceLoad:function(){var c=this;if(this._jsonFileUrl){var b={url:c._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,sync:true};var a=dojo.xhrGet(b);a.addCallback(function(d){try{if(c._loadInProgress!==true&&!c._loadFinished){c._getItemsFromLoadedData(d);c._loadFinished=true}else{if(c._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.")}}}catch(f){throw f}});a.addErrback(function(d){throw d})}else{if(this._jsonData){c._getItemsFromLoadedData(c._jsonData);c._jsonData=null;c._loadFinished=true}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch)}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){var c=dojo.doc;if(c.selection){var d=c.selection;if(d.type=="Text"){return !d.createRange().htmlText.length}else{return !d.createRange().length}}else{var b=dojo.global;var a=b.getSelection();if(dojo.isString(a)){return !a}else{return !a||a.isCollapsed||!a.toString()}}},getBookmark:function(){var f,d=dojo.doc.selection;if(d){var c=d.createRange();if(d.type.toUpperCase()=="CONTROL"){if(c.length){f=[];var b=0,a=c.length;while(b<a){f.push(c.item(b++))}}else{f=null}}else{f=c.getBookmark()}}else{if(window.getSelection){d=dojo.global.getSelection();if(d){c=d.getRangeAt(0);f=c.cloneRange()}}else{console.warn("No idea how to store the current selection for this browser!")}}return f},moveToBookmark:function(d){var c=dojo.doc;if(c.selection){var b;if(dojo.isArray(d)){b=c.body.createControlRange();dojo.forEach(d,function(f){b.addElement(f)})}else{b=c.selection.createRange();b.moveToBookmark(d)}b.select()}else{var a=dojo.global.getSelection&&dojo.global.getSelection();if(a&&a.removeAllRanges){a.removeAllRanges();a.addRange(d)}else{console.warn("No idea how to restore selection for this browser!")}}},getFocus:function(b,a){return{node:b&&dojo.isDescendant(dijit._curFocus,b.domNode)?dijit._prevFocus:dijit._curFocus,bookmark:!dojo.withGlobal(a||dojo.global,dijit.isCollapsed)?dojo.withGlobal(a||dojo.global,dijit.getBookmark):null,openedForWindow:a}},focus:function(d){if(!d){return}var f="node" in d?d.node:d,c=d.bookmark,b=d.openedForWindow;if(f){var a=(f.tagName.toLowerCase()=="iframe")?f.contentWindow:f;if(a&&a.focus){try{a.focus()}catch(g){}}dijit._onFocusNode(f)}if(c&&dojo.withGlobal(b||dojo.global,dijit.isCollapsed)){if(b){b.focus()}try{dojo.withGlobal(b||dojo.global,dijit.moveToBookmark,null,[c])}catch(g){}}},_activeStack:[],registerIframe:function(a){dijit.registerWin(a.contentWindow,a)},registerWin:function(c,a){dojo.connect(c.document,"onmousedown",function(d){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false},0);dijit._onTouchNode(a||d.target||d.srcElement)});var b=c.document;if(b){if(dojo.isIE){b.attachEvent("onactivate",function(d){if(d.srcElement.tagName.toLowerCase()!="#document"){dijit._onFocusNode(a||d.srcElement)}});b.attachEvent("ondeactivate",function(d){dijit._onBlurNode(a||d.srcElement)})}else{b.addEventListener("focus",function(d){dijit._onFocusNode(a||d.target)},true);b.addEventListener("blur",function(d){dijit._onBlurNode(a||d.target)},true)}}b=null},_onBlurNode:function(a){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer)}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null},100)},_onTouchNode:function(a){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer}var b=[];try{while(a){if(a.dijitPopupParent){a=dijit.byId(a.dijitPopupParent).domNode}else{if(a.tagName&&a.tagName.toLowerCase()=="body"){if(a===dojo.body()){break}a=dijit.getDocumentWindow(a.ownerDocument).frameElement}else{var d=a.getAttribute&&a.getAttribute("widgetId");if(d){b.unshift(d)}a=a.parentNode}}}}catch(c){}dijit._setStack(b)},_onFocusNode:function(a){if(!a){return}if(a.nodeType==9){return}dijit._onTouchNode(a);if(a==dijit._curFocus){return}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus}dijit._curFocus=a;dojo.publish("focusNode",[a])},_setStack:function(d){var b=dijit._activeStack;dijit._activeStack=d;for(var a=0;a<Math.min(b.length,d.length);a++){if(b[a]!=d[a]){break}}for(var c=b.length-1;c>=a;c--){var f=dijit.byId(b[c]);if(f){f._focused=false;f._hasBeenBlurred=true;if(f._onBlur){f._onBlur()}if(f._setStateClass){f._setStateClass()}dojo.publish("widgetBlur",[f])}}for(c=a;c<d.length;c++){f=dijit.byId(d[c]);if(f){f._focused=true;if(f._onFocus){f._onFocus()}if(f._setStateClass){f._setStateClass()}dojo.publish("widgetFocus",[f])}}}});dojo.addOnLoad(function(){dijit.registerWin(window)})}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={}},add:function(a){if(this._hash[a.id]){throw new Error("Tried to register widget with id=="+a.id+" but that id is already registered")}this._hash[a.id]=a},remove:function(a){delete this._hash[a]},forEach:function(a){for(var b in this._hash){a(this._hash[b])}},filter:function(a){var b=new dijit.WidgetSet();this.forEach(function(c){if(a(c)){b.add(c)}});return b},byId:function(a){return this._hash[a]},byClass:function(a){return this.filter(function(b){return b.declaredClass==a})}});dijit.registry=new dijit.WidgetSet();dijit._widgetTypeCtr={};dijit.getUniqueId=function(a){var b;do{b=a+"_"+(a in dijit._widgetTypeCtr?++dijit._widgetTypeCtr[a]:dijit._widgetTypeCtr[a]=0)}while(dijit.byId(b));return b};dijit.findWidgets=function(a){var c=[];function b(d){var m=dojo.isIE?d.children:d.childNodes,k=0,l;while(l=m[k++]){if(l.nodeType!=1){continue}var g=l.getAttribute("widgetId");if(g){var f=dijit.byId(g);c.push(f)}else{b(l)}}}b(a);return c};if(dojo.isIE){dojo.addOnWindowUnload(function(){dojo.forEach(dijit.findWidgets(dojo.body()),function(a){if(a.destroyRecursive){a.destroyRecursive()}else{if(a.destroy){a.destroy()}}})})}dijit.byId=function(a){return(dojo.isString(a))?dijit.registry.byId(a):a};dijit.byNode=function(a){return dijit.registry.byId(a.getAttribute("widgetId"))};dijit.getEnclosingWidget=function(a){while(a){if(a.getAttribute&&a.getAttribute("widgetId")){return dijit.registry.byId(a.getAttribute("widgetId"))}a=a.parentNode}return null};dijit._tabElements={area:true,button:true,input:true,object:true,select:true,textarea:true};dijit._isElementShown=function(a){var b=dojo.style(a);return(b.visibility!="hidden")&&(b.visibility!="collapsed")&&(b.display!="none")&&(dojo.attr(a,"type")!="hidden")};dijit.isTabNavigable=function(c){if(dojo.hasAttr(c,"disabled")){return false}var d=dojo.hasAttr(c,"tabindex");var b=dojo.attr(c,"tabindex");if(d&&b>=0){return true}var a=c.nodeName.toLowerCase();if(((a=="a"&&dojo.hasAttr(c,"href"))||dijit._tabElements[a])&&(!d||b>=0)){return true}return false};dijit._getTabNavigable=function(a){var l,k,g,f,c,d;var b=function(m){dojo.query("> *",m).forEach(function(p){var o=dijit._isElementShown(p);if(o&&dijit.isTabNavigable(p)){var n=dojo.attr(p,"tabindex");if(!dojo.hasAttr(p,"tabindex")||n==0){if(!l){l=p}k=p}else{if(n>0){if(!g||n<f){f=n;g=p}if(!c||n>=d){d=n;c=p}}}}if(o&&p.nodeName.toUpperCase()!="SELECT"){b(p)}})};if(dijit._isElementShown(a)){b(a)}return{first:l,last:k,lowest:g,highest:c}};dijit.getFirstInTabbingOrder=function(a){var b=dijit._getTabNavigable(dojo.byId(a));return b.lowest?b.lowest:b.first};dijit.getLastInTabbingOrder=function(a){var b=dijit._getTabNavigable(dojo.byId(a));return b.last?b.last:b.highest};dijit.defaultDuration=dojo.config.defaultDuration||200}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(a){this.pairs=[];this.returnWrappers=a||false};dojo.extend(dojo.AdapterRegistry,{register:function(a,f,b,d,c){this.pairs[((c)?"unshift":"push")]([a,f,b,d])},match:function(){for(var a=0;a<this.pairs.length;a++){var b=this.pairs[a];if(b[1].apply(this,arguments)){if((b[3])||(this.returnWrappers)){return b[2]}else{return b[2].apply(this,arguments)}}}throw new Error("No match found")},unregister:function(a){for(var b=0;b<this.pairs.length;b++){var c=this.pairs[b];if(c[0]==a){this.pairs.splice(b,1);return true}}return false}})}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){var b=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var a=dojo._docScroll();return{w:b.clientWidth,h:b.clientHeight,l:a.x,t:a.y}};dijit.placeOnScreen=function(c,f,d,b){var a=dojo.map(d,function(g){var k={corner:g,pos:{x:f.x,y:f.y}};if(b){k.pos.x+=g.charAt(1)=="L"?b.x:-b.x;k.pos.y+=g.charAt(0)=="T"?b.y:-b.y}return k});return dijit._place(c,a)};dijit._place=function(b,c,f){var a=dijit.getViewport();if(!b.parentNode||String(b.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(b)}var d=null;dojo.some(c,function(r){var q=r.corner;var t=r.pos;if(f){f(b,r.aroundCorner,q)}var o=b.style;var n=o.display;var l=o.visibility;o.visibility="hidden";o.display="";var u=dojo.marginBox(b);o.display=n;o.visibility=l;var s=(q.charAt(1)=="L"?t.x:Math.max(a.l,t.x-u.w)),p=(q.charAt(0)=="T"?t.y:Math.max(a.t,t.y-u.h)),w=(q.charAt(1)=="L"?Math.min(a.l+a.w,s+u.w):t.x),v=(q.charAt(0)=="T"?Math.min(a.t+a.h,p+u.h):t.y),m=w-s,k=v-p,g=(u.w-m)+(u.h-k);if(d==null||g<d.overflow){d={corner:q,aroundCorner:r.aroundCorner,x:s,y:p,w:m,h:k,overflow:g}}return !g});b.style.left=d.x+"px";b.style.top=d.y+"px";if(d.overflow&&f){f(b,d.aroundCorner,d.corner)}return d};dijit.placeOnScreenAroundNode=function(f,l,k,g){l=dojo.byId(l);var d=l.style.display;l.style.display="";var c=l.offsetWidth;var b=l.offsetHeight;var a=dojo.coords(l,true);l.style.display=d;return dijit._placeOnScreenAroundRect(f,a.x,a.y,c,b,k,g)};dijit.placeOnScreenAroundRectangle=function(d,c,b,a){return dijit._placeOnScreenAroundRect(d,c.x,c.y,c.width,c.height,b,a)};dijit._placeOnScreenAroundRect=function(a,f,c,m,l,k,g){var d=[];for(var b in k){d.push({aroundCorner:b,corner:k[b],pos:{x:f+(b.charAt(1)=="L"?0:m),y:c+(b.charAt(0)=="T"?0:l)}})}return dijit._place(a,d,g)};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(b,a){return typeof a=="object"&&typeof a.offsetWidth!="undefined"&&typeof a.offsetHeight!="undefined"},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(b,a){return typeof a=="object"&&"x" in a&&"y" in a&&"width" in a&&"height" in a},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(c,d,b,a){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments)}}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(b){if(dojo.isIE&&window!==document.parentWindow&&!b._parentWindow){b.parentWindow.execScript("document._parentWindow = window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b._parentWindow||b.parentWindow||b.defaultView}}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup=new function(){var c=[],b=1000,a=1;this.prepare=function(f){var d=f.style;d.visibility="hidden";d.position="absolute";d.top="-9999px";if(d.display=="none"){d.display=""}dojo.body().appendChild(f)};this.open=function(g){var o=g.popup,n=g.orient||{BL:"TL",TL:"BL"},l=g.around,d=(g.around&&g.around.id)?(g.around.id+"_dropdown"):("popup_"+a++);var q=dojo.create("div",{id:d,"class":"dijitPopup",style:{zIndex:b+c.length,visibility:"hidden"}},dojo.body());dijit.setWaiRole(q,"presentation");q.style.left=q.style.top="0px";if(g.parent){q.dijitPopupParent=g.parent.id}var r=o.domNode.style;r.display="";r.visibility="";r.position="";r.top="0px";q.appendChild(o.domNode);var p=new dijit.BackgroundIframe(q);var f=l?dijit.placeOnScreenAroundElement(q,l,n,o.orient?dojo.hitch(o,"orient"):null):dijit.placeOnScreen(q,g,n=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],g.padding);q.style.visibility="visible";var m=[];var k=function(){for(var s=c.length-1;s>0&&c[s].parent===c[s-1].widget;s--){}return c[s]};m.push(dojo.connect(q,"onkeypress",this,function(s){if(s.charOrCode==dojo.keys.ESCAPE&&g.onCancel){dojo.stopEvent(s);g.onCancel()}else{if(s.charOrCode===dojo.keys.TAB){dojo.stopEvent(s);var t=k();if(t&&t.onCancel){t.onCancel()}}}}));if(o.onCancel){m.push(dojo.connect(o,"onCancel",null,g.onCancel))}m.push(dojo.connect(o,o.onExecute?"onExecute":"onChange",null,function(){var s=k();if(s&&s.onExecute){s.onExecute()}}));c.push({wrapper:q,iframe:p,widget:o,parent:g.parent,onExecute:g.onExecute,onCancel:g.onCancel,onClose:g.onClose,handlers:m});if(o.onOpen){o.onOpen(f)}return f};this.close=function(g){while(dojo.some(c,function(n){return n.widget==g})){var k=c.pop(),d=k.wrapper,m=k.iframe,l=k.widget,f=k.onClose;if(l.onClose){l.onClose()}dojo.forEach(k.handlers,dojo.disconnect);if(!l||!l.domNode){return}this.prepare(l.domNode);m.destroy();dojo.destroy(d);if(f){f()}}}}();dijit._frames=new function(){var a=[];this.pop=function(){var b;if(a.length){b=a.pop();b.style.display=""}else{if(dojo.isIE){var d=dojo.config.dojoBlankHtmlUrl||(dojo.moduleUrl("dojo","resources/blank.html")+"")||'javascript:""';var c="<iframe src='"+d+"' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";b=dojo.doc.createElement(c)}else{b=dojo.create("iframe");b.src='javascript:""';b.className="dijitBackgroundIframe"}b.tabIndex=-1;dojo.body().appendChild(b)}return b};this.push=function(b){b.style.display="none";if(dojo.isIE){b.style.removeExpression("width");b.style.removeExpression("height")}a.push(b)}}();dijit.BackgroundIframe=function(a){if(!a.id){throw new Error("no id")}if(dojo.isIE<7||(dojo.isFF<3&&dojo.hasClass(dojo.body(),"dijit_a11y"))){var b=dijit._frames.pop();a.appendChild(b);if(dojo.isIE){b.style.setExpression("width",dojo._scopeName+".doc.getElementById('"+a.id+"').offsetWidth");b.style.setExpression("height",dojo._scopeName+".doc.getElementById('"+a.id+"').offsetHeight")}this.iframe=b}};dojo.extend(dijit.BackgroundIframe,{destroy:function(){if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe}}})}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(B){try{B=dojo.byId(B);var J=dojo.doc;var p=dojo.body();var q=p.parentNode;if((!(dojo.isFF>=3||dojo.isIE||dojo.isWebKit)||B==p||B==q)&&(typeof B.scrollIntoView=="function")){B.scrollIntoView(false);return}var F=dojo._isBodyLtr();var E=dojo.isIE>=8&&!D;var m=!F&&!E;var I=p;var D=J.compatMode=="BackCompat";if(D){q._offsetWidth=q._clientWidth=p._offsetWidth=p.clientWidth;q._offsetHeight=q._clientHeight=p._offsetHeight=p.clientHeight}else{if(dojo.isWebKit){p._offsetWidth=p._clientWidth=q.clientWidth;p._offsetHeight=p._clientHeight=q.clientHeight}else{I=q}q._offsetHeight=q.clientHeight;q._offsetWidth=q.clientWidth}function H(K){var L=dojo.isIE;return((L<=6||(L>=7&&D))?false:(dojo.style(K,"position").toLowerCase()=="fixed"))}function G(Q){var K=Q.parentNode;var P=Q.offsetParent;if(P==null||H(Q)){P=q;K=(Q==p)?q:null}Q._offsetParent=P;Q._parent=K;var N=dojo._getBorderExtents(Q);Q._borderStart={H:(E&&!F)?(N.w-N.l):N.l,V:N.t};Q._borderSize={H:N.w,V:N.h};Q._scrolledAmount={H:Q.scrollLeft,V:Q.scrollTop};Q._offsetSize={H:Q._offsetWidth||Q.offsetWidth,V:Q._offsetHeight||Q.offsetHeight};Q._offsetStart={H:(E&&!F)?P.clientWidth-Q.offsetLeft-Q._offsetSize.H:Q.offsetLeft,V:Q.offsetTop};Q._clientSize={H:Q._clientWidth||Q.clientWidth,V:Q._clientHeight||Q.clientHeight};if(Q!=p&&Q!=q&&Q!=B){for(var L in Q._offsetSize){var O=Q._offsetSize[L]-Q._clientSize[L]-Q._borderSize[L];var M=Q._clientSize[L]>0&&O>0;if(M){Q._offsetSize[L]-=O;if(dojo.isIE&&m&&L=="H"){Q._offsetStart[L]+=O}}}}}var f=B;while(f!=null){if(H(f)){B.scrollIntoView(false);return}G(f);f=f._parent}if(dojo.isIE&&B._parent){var c=B._offsetParent;B._offsetStart.H+=c._borderStart.H;B._offsetStart.V+=c._borderStart.V}if(dojo.isIE>=7&&I==q&&m&&p._offsetStart&&p._offsetStart.H==0){var a=q.scrollWidth-q._offsetSize.H;if(a>0){p._offsetStart.H=-a}}if(dojo.isIE<=6&&!D){q._offsetSize.H+=q._borderSize.H;q._offsetSize.V+=q._borderSize.V}if(m&&p._offsetStart&&I==q&&q._scrolledAmount){var A=p._offsetStart.H;if(A<0){q._scrolledAmount.H+=A;p._offsetStart.H=0}}f=B;while(f){var l=f._parent;if(!l){break}if(l.tagName=="TD"){var k=l._parent._parent._parent;if(l!=f._offsetParent&&l._offsetParent!=f._offsetParent){l=k}}var g=f._offsetParent==l;for(var z in f._offsetStart){var d=z=="H"?"V":"H";if(m&&z=="H"&&(l!=q)&&(l!=p)&&(dojo.isIE||dojo.isWebKit)&&l._clientSize.H>0&&l.scrollWidth>l._clientSize.H){var b=l.scrollWidth-l._clientSize.H;if(b>0){l._scrolledAmount.H-=b}}if(l._offsetParent.tagName=="TABLE"){if(dojo.isIE){l._offsetStart[z]-=l._offsetParent._borderStart[z];l._borderStart[z]=l._borderSize[z]=0}else{l._offsetStart[z]+=l._offsetParent._borderStart[z]}}if(dojo.isIE){l._offsetStart[z]+=l._offsetParent._borderStart[z]}var x=f._offsetStart[z]-l._scrolledAmount[z]-(g?0:l._offsetStart[z])-l._borderStart[z];var w=x+f._offsetSize[z]-l._offsetSize[z]+l._borderSize[z];var v=(z=="H")?"scrollLeft":"scrollTop";var u=z=="H"&&m;var t=u?-w:x;var s=u?-x:w;var r=(t*s<=0)?0:Math[(t<0)?"max":"min"](t,s);if(r!=0){var o=l[v];l[v]+=(u)?-r:r;var n=l[v]-o}if(g){f._offsetStart[z]+=l._offsetStart[z]}f._offsetStart[z]-=l[v]}f._parent=l._parent;f._offsetParent=l._offsetParent}l=B;var y;while(l&&l.removeAttribute){y=l.parentNode;l.removeAttribute("_offsetParent");l.removeAttribute("_parent");l=y}}catch(C){console.error("scrollIntoView: "+C);B.scrollIntoView(false)}}}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");(function(){var n=dojo,m=n.doc.documentElement,a=n.isIE,l=n.isOpera,k=Math.floor,b=n.isFF,g=n.boxModel.replace(/-/,""),f={dj_ie:a,dj_ie6:k(a)==6,dj_ie7:k(a)==7,dj_iequirks:a&&n.isQuirks,dj_opera:l,dj_opera8:k(l)==8,dj_opera9:k(l)==9,dj_khtml:n.isKhtml,dj_webkit:n.isWebKit,dj_safari:n.isSafari,dj_gecko:n.isMozilla,dj_ff2:k(b)==2,dj_ff3:k(b)==3};f["dj_"+g]=true;for(var c in f){if(f[c]){if(m.className){m.className+=" "+c}else{m.className=c}}}dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){m.className+=" dijitRtl";for(var d in f){if(f[d]){m.className+=" "+d+"-rtl"}}}})})()}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=(this._currentTimeout<0)?this._initialDelay:((this._subsequentDelay>1)?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay));this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,k,c,f,d,b,g){if(d!=this._obj){this.stop();this._initialDelay=g||500;this._subsequentDelay=b||0.9;this._obj=d;this._evt=a;this._node=c;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(k,f);this._fireEventAndReload()}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null}},addKeyListener:function(d,g,f,c,b,a){if(g.keyCode){g.charOrCode=g.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0")}else{if(g.charCode){g.charOrCode=String.fromCharCode(g.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0")}}return[dojo.connect(d,"onkeypress",this,function(k){if(k.charOrCode==g.charOrCode&&(g.ctrlKey===undefined||g.ctrlKey==k.ctrlKey)&&(g.altKey===undefined||g.altKey==k.ctrlKey)&&(g.shiftKey===undefined||g.shiftKey==k.ctrlKey)){dojo.stopEvent(k);dijit.typematic.trigger(g,f,d,c,g,b,a)}else{if(dijit.typematic._obj==g){dijit.typematic.stop()}}}),dojo.connect(d,"onkeyup",this,function(k){if(dijit.typematic._obj==g){dijit.typematic.stop()}})]},addMouseListener:function(c,g,f,d,b){var a=dojo.connect;return[a(c,"mousedown",this,function(k){dojo.stopEvent(k);dijit.typematic.trigger(k,g,c,f,c,d,b)}),a(c,"mouseup",this,function(k){dojo.stopEvent(k);dijit.typematic.stop()}),a(c,"mouseout",this,function(k){dojo.stopEvent(k);dijit.typematic.stop()}),a(c,"mousemove",this,function(k){dojo.stopEvent(k)}),a(c,"dblclick",this,function(k){dojo.stopEvent(k);if(dojo.isIE){dijit.typematic.trigger(k,g,c,f,c,d,b);setTimeout(dojo.hitch(this,dijit.typematic.stop),50)}})]},addListener:function(k,f,g,d,c,b,a){return this.addKeyListener(f,g,d,c,b,a).concat(this.addMouseListener(k,d,c,b,a))}}}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var d=dojo.create("div",{id:"a11yTestNode",style:{cssText:'border: 1px solid;border-color:red green;position: absolute;height: 5px;top: -999px;background-image: url("'+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+'");'}},dojo.body());var a=dojo.getComputedStyle(d);if(a){var c=a.backgroundImage;var b=(a.borderTopColor==a.borderRightColor)||(c!=null&&(c=="none"||c=="url(invalid-url:)"));dojo[b?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){d.outerHTML=""}else{dojo.body().removeChild(d)}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload)}dojo.mixin(dijit,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(a,c){var b=this.getWaiRole(a);return c?(b.indexOf(c)>-1):(b.length>0)},getWaiRole:function(a){return dojo.trim((dojo.attr(a,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""))},setWaiRole:function(d,f){var b=dojo.attr(d,"role")||"";if(dojo.isFF<3||!this._XhtmlRoles.test(b)){dojo.attr(d,"role",dojo.isFF<3?"wairole:"+f:f)}else{if((" "+b+" ").indexOf(" "+f+" ")<0){var c=dojo.trim(b.replace(this._XhtmlRoles,""));var a=dojo.trim(b.replace(c,""));dojo.attr(d,"role",a+(a?" ":"")+f)}}},removeWaiRole:function(d,f){var b=dojo.attr(d,"role");if(!b){return}if(f){var a=dojo.isFF<3?"wairole:"+f:f;var c=dojo.trim((" "+b+" ").replace(" "+a+" "," "));dojo.attr(d,"role",c)}else{d.removeAttribute("role")}},hasWaiState:function(a,b){if(dojo.isFF<3){return a.hasAttributeNS("http://www.w3.org/2005/07/aaa",b)}return a.hasAttribute?a.hasAttribute("aria-"+b):!!a.getAttribute("aria-"+b)},getWaiState:function(b,a){if(dojo.isFF<3){return b.getAttributeNS("http://www.w3.org/2005/07/aaa",a)}return b.getAttribute("aria-"+a)||""},setWaiState:function(a,c,b){if(dojo.isFF<3){a.setAttributeNS("http://www.w3.org/2005/07/aaa","aaa:"+c,b)}else{a.setAttribute("aria-"+c,b)}},removeWaiState:function(a,b){if(dojo.isFF<3){a.removeAttributeNS("http://www.w3.org/2005/07/aaa",b)}else{a.removeAttribute("aria-"+b)}}})}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base")}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.connect(dojo,"connect",function(b,a){if(b&&dojo.isFunction(b._onConnect)){b._onConnect(a)}});dijit._connectOnUseEventHandler=function(a){};(function(){var b={};var a=function(f){if(!b[f]){var g=[];var d;var c=dojo.getObject(f).prototype;for(var k in c){if(dojo.isFunction(c[k])&&(d=k.match(/^_set([a-zA-Z]*)Attr$/))&&d[1]){g.push(d[1].charAt(0).toLowerCase()+d[1].substr(1))}}b[f]=g}return b[f]||[]};dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")),postscript:function(d,c){this.create(d,c)},create:function(f,d){this.srcNodeRef=dojo.byId(d);this._connects=[];this._deferredConnects=dojo.clone(this._deferredConnects);for(var c in this.attributeMap){delete this._deferredConnects[c]}for(c in this._deferredConnects){if(this[c]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[c]}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id}if(f){this.params=f;dojo.mixin(this,f)}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"))}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var g=this.srcNodeRef;if(g&&g.parentNode){g.parentNode.replaceChild(this.domNode,g)}for(c in this.params){this._onConnect(c)}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id)}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef}this._created=true},_applyAttributes:function(){var d=function(f,g){if((g.params&&f in g.params)||g[f]){g.attr(f,g[f])}};for(var c in this.attributeMap){d(c,this)}dojo.forEach(a(this.declaredClass),function(f){if(!(f in this.attributeMap)){d(f,this)}},this)},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.create("div")},postCreate:function(){},startup:function(){this._started=true},destroyRecursive:function(c){this.destroyDescendants(c);this.destroy(c)},destroy:function(c){this.uninitialize();dojo.forEach(this._connects,function(d){dojo.forEach(d,dojo.disconnect)});dojo.forEach(this._supportingWidgets||[],function(d){if(d.destroy){d.destroy()}});this.destroyRendering(c);dijit.registry.remove(this.id)},destroyRendering:function(c){if(this.bgIframe){this.bgIframe.destroy(c);delete this.bgIframe}if(this.domNode){if(c){dojo.removeAttr(this.domNode,"widgetId")}else{dojo.destroy(this.domNode)}delete this.domNode}if(this.srcNodeRef){if(!c){dojo.destroy(this.srcNodeRef)}delete this.srcNodeRef}},destroyDescendants:function(c){dojo.forEach(this.getChildren(),function(d){if(d.destroyRecursive){d.destroyRecursive(c)}})},uninitialize:function(){return false},onFocus:function(){},onBlur:function(){},_onFocus:function(c){this.onFocus()},_onBlur:function(){this.onBlur()},_onConnect:function(d){if(d in this._deferredConnects){var c=this[this._deferredConnects[d]||"domNode"];this.connect(c,d.toLowerCase(),d);delete this._deferredConnects[d]}},_setClassAttr:function(c){var d=this[this.attributeMap["class"]||"domNode"];dojo.removeClass(d,this["class"]);this["class"]=c;dojo.addClass(d,c)},_setStyleAttr:function(c){var d=this[this.attributeMap.style||"domNode"];if(dojo.isObject(c)){dojo.style(d,c)}else{if(d.style.cssText){d.style.cssText+="; "+c}else{d.style.cssText=c}}this["style"]=c},setAttribute:function(c,d){dojo.deprecated(this.declaredClass+"::setAttribute() is deprecated. Use attr() instead.","","2.0");this.attr(c,d)},_attrToDom:function(c,f){var d=this.attributeMap[c];dojo.forEach(dojo.isArray(d)?d:[d],function(k){var g=this[k.node||k||"domNode"];var l=k.type||"attribute";switch(l){case"attribute":if(dojo.isFunction(f)){f=dojo.hitch(this,f)}if(/^on[A-Z][a-zA-Z]*$/.test(c)){c=c.toLowerCase()}dojo.attr(g,c,f);break;case"innerHTML":g.innerHTML=f;break;case"class":dojo.removeClass(g,this[c]);dojo.addClass(g,f);break}},this);this[c]=f},attr:function(g,k){var f=arguments.length;if(f==1&&!dojo.isString(g)){for(var c in g){this.attr(c,g[c])}return this}var d=this._getAttrNames(g);if(f==2){if(this[d.s]){return this[d.s](k)||this}else{if(g in this.attributeMap){this._attrToDom(g,k)}this[g]=k}return this}else{if(this[d.g]){return this[d.g]()}else{return this[g]}}},_attrPairNames:{},_getAttrNames:function(f){var c=this._attrPairNames;if(c[f]){return c[f]}var d=f.charAt(0).toUpperCase()+f.substr(1);return c[f]={n:f+"Node",s:"_set"+d+"Attr",g:"_get"+d+"Attr"}},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getDescendants:function(){if(this.containerNode){var c=dojo.query("[widgetId]",this.containerNode);return c.map(dijit.byNode)}else{return[]}},getChildren:function(){if(this.containerNode){return dijit.findWidgets(this.containerNode)}else{return[]}},nodesWithKeyClick:["input","button"],connect:function(l,o,k){var n=dojo;var f=dojo.connect;var g=[];if(o=="ondijitclick"){if(!this.nodesWithKeyClick[l.nodeName]){var c=n.hitch(this,k);g.push(f(l,"onkeydown",this,function(d){if(!n.isFF&&d.keyCode==n.keys.ENTER&&!d.ctrlKey&&!d.shiftKey&&!d.altKey&&!d.metaKey){return c(d)}else{if(d.keyCode==n.keys.SPACE){n.stopEvent(d)}}}),f(l,"onkeyup",this,function(d){if(d.keyCode==n.keys.SPACE&&!d.ctrlKey&&!d.shiftKey&&!d.altKey&&!d.metaKey){return c(d)}}));if(n.isFF){g.push(f(l,"onkeypress",this,function(d){if(d.keyCode==n.keys.ENTER&&!d.ctrlKey&&!d.shiftKey&&!d.altKey&&!d.metaKey){return c(d)}}))}}o="onclick"}g.push(f(l,o,this,k));this._connects.push(g);return g},disconnect:function(d){for(var c=0;c<this._connects.length;c++){if(this._connects[c]==d){dojo.forEach(d,dojo.disconnect);this._connects.splice(c,1);return}}},isLeftToRight:function(){return dojo._isBodyLtr()},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none")},placeAt:function(d,c){if(d.declaredClass&&d.addChild){d.addChild(this,c)}else{dojo.place(this.domNode,d,c)}return this}})})()}if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){for(var b=this.domNode.parentNode;b;b=b.parentNode){var c=b.getAttribute&&b.getAttribute("widgetId");if(c){var a=dijit.byId(c);return a.isContainer?a:null}}return null},_getSibling:function(a){var b=this.domNode;do{b=b[a+"Sibling"]}while(b&&b.nodeType!=1);if(!b){return null}var c=b.getAttribute("widgetId");return dijit.byId(c)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var a=this.getParent();if(!a||!a.getIndexOfChild){return -1}return a.getIndexOfChild(this)}})}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode}},addChild:function(b,a){var d=this.containerNode;if(a&&typeof a=="number"){var c=this.getChildren();if(c&&c.length>=a){d=c[a-1].domNode;a="after"}}dojo.place(b.domNode,d,a);if(this._started&&!b._started){b.startup()}},removeChild:function(b){if(typeof b=="number"&&b>0){b=this.getChildren()[b]}if(!b||!b.domNode){return}var a=b.domNode;a.parentNode.removeChild(a)},_nextElement:function(a){do{a=a.nextSibling}while(a&&a.nodeType!=1);return a},_firstElement:function(a){a=a.firstChild;if(a&&a.nodeType!=1){a=this._nextElement(a)}return a},getChildren:function(){return dojo.query("> [widgetId]",this.containerNode).map(dijit.byNode)},hasChildren:function(){return !!this._firstElement(this.containerNode)},destroyDescendants:function(a){dojo.forEach(this.getChildren(),function(b){b.destroyRecursive(a)})},_getSiblingOfChild:function(c,b){var d=c.domNode;var a=(b>0?"nextSibling":"previousSibling");do{d=d[a]}while(d&&(d.nodeType!=1||!dijit.byNode(d)));return d?dijit.byNode(d):null},getIndexOfChild:function(a){var f=this.getChildren();for(var b=0,d;d=f[b];b++){if(d==a){return b}}return -1}})}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer");dojo.addClass(this.domNode,this.baseClass)},startup:function(){if(this._started){return}dojo.forEach(this.getChildren(),function(a){a.startup()});if(!this.getParent||!this.getParent()){this.resize();this._viewport=dijit.getViewport();this.connect(dojo.global,"onresize",function(){var a=dijit.getViewport();if(a.w!=this._viewport.w||a.h!=this._viewport.h){this._viewport=a;this.resize()}})}this.inherited(arguments)},resize:function(b,a){var c=this.domNode;if(b){dojo.marginBox(c,b);if(b.t){c.style.top=b.t+"px"}if(b.l){c.style.left=b.l+"px"}}var m=a||{};dojo.mixin(m,b||{});if(!("h" in m)||!("w" in m)){m=dojo.mixin(dojo.marginBox(c),m)}var f=dojo.getComputedStyle(c);var l=dojo._getMarginExtents(c,f);var d=dojo._getBorderExtents(c,f);var k=(this._borderBox={w:m.w-(l.w+d.w),h:m.h-(l.h+d.h)});var g=dojo._getPadExtents(c,f);this._contentBox={l:dojo._toPixelValue(c,f.paddingLeft),t:dojo._toPixelValue(c,f.paddingTop),w:k.w-g.w,h:k.h-g.h};this.layout()},layout:function(){},_setupChild:function(a){dojo.addClass(a.domNode,this.baseClass+"-child");if(a.baseClass){dojo.addClass(a.domNode,this.baseClass+"-"+a.baseClass)}},addChild:function(b,a){this.inherited(arguments);if(this._started){this._setupChild(b)}},removeChild:function(a){dojo.removeClass(a.domNode,this.baseClass+"-child");if(a.baseClass){dojo.removeClass(a.domNode,this.baseClass+"-"+a.baseClass)}this.inherited(arguments)}});dijit.layout.marginBox2contentBox=function(d,f){var b=dojo.getComputedStyle(d);var c=dojo._getMarginExtents(d,b);var a=dojo._getPadBorderExtents(d,b);return{l:dojo._toPixelValue(d,b.paddingLeft),t:dojo._toPixelValue(d,b.paddingTop),w:f.w-(c.w+a.w),h:f.h-(c.h+a.h)}};(function(){var b=function(c){return c.substring(0,1).toUpperCase()+c.substring(1)};var a=function(d,c){d.resize?d.resize(c):dojo.marginBox(d.domNode,c);dojo.mixin(d,dojo.marginBox(d.domNode));dojo.mixin(d,c)};dijit.layout.layoutChildren=function(f,d,c){d=dojo.mixin({},d);dojo.addClass(f,"dijitLayoutContainer");c=dojo.filter(c,function(g){return g.layoutAlign!="client"}).concat(dojo.filter(c,function(g){return g.layoutAlign=="client"}));dojo.forEach(c,function(g){var m=g.domNode,l=g.layoutAlign;var k=m.style;k.left=d.l+"px";k.top=d.t+"px";k.bottom=k.right="auto";dojo.addClass(m,"dijitAlign"+b(l));if(l=="top"||l=="bottom"){a(g,{w:d.w});d.h-=g.h;if(l=="top"){d.t+=g.h}else{k.top=d.t+d.h+"px"}}else{if(l=="left"||l=="right"){a(g,{h:d.h});d.w-=g.w;if(l=="left"){d.l+=g.w}else{k.left=d.l+d.w+"px"}}else{if(l=="client"){a(g,d)}}}})}})()}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.rep=function(c,b){if(b<=0||!c){return""}var a=[];for(;;){if(b&1){a.push(c)}if(!(b>>=1)){break}c+=c}return a.join("")};dojo.string.pad=function(g,c,d,a){if(!d){d="0"}var b=String(g),f=dojo.string.rep(d,Math.ceil((c-b.length)/d.length));return a?b+f:f+b};dojo.string.substitute=function(d,c,b,a){a=a||dojo.global;b=(!b)?function(f){return f}:dojo.hitch(a,b);return d.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(l,f,k){var g=dojo.getObject(f,false,c);if(k){g=dojo.getObject(k,false,a).call(a,g,f)}return b(g,f).toString()})};dojo.string.trim=String.prototype.trim?dojo.trim:function(b){b=b.replace(/^\s+/,"");for(var a=b.length-1;a>=0;a--){if(/\S/.test(b.charAt(a))){b=b.substring(0,a+1);break}}return b}}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");(function(){var a=0;dojo.html._secureForInnerHtml=function(b){return b.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(k,c,b){if(b){dojo.html._emptyNode(k)}if(typeof c=="string"){var l="",g="",d=0,f=k.nodeName.toLowerCase();switch(f){case"tr":l="<tr>";g="</tr>";d+=1;case"tbody":case"thead":l="<tbody>"+l;g+="</tbody>";d+=1;case"table":l="<table>"+l;g+="</table>";d+=1;break}if(d){var m=k.ownerDocument.createElement("div");m.innerHTML=l+c+g;do{m=m.firstChild}while(--d);dojo.forEach(m.childNodes,function(o){k.appendChild(o.cloneNode(true))})}else{k.innerHTML=c}}else{if(c.nodeType){k.appendChild(c)}else{dojo.forEach(c,function(o){k.appendChild(o.cloneNode(true))})}}return k};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(c,b){dojo.mixin(this,c||{});b=this.node=dojo.byId(this.node||b);if(!this.id){this.id=["Setter",(b)?b.id||b.tagName:"",a++].join("_")}if(!(this.node||b)){new Error(this.declaredClass+": no node provided to "+this.id)}},set:function(b,c){if(undefined!==b){this.content=b}if(c){this._mixin(c)}this.onBegin();this.setContent();this.onEnd();return this.node},setContent:function(){var c=this.node;if(!c){console.error("setContent given no node")}try{c=dojo.html._setNodeContent(c,this.content)}catch(d){var b=this.onContentError(d);try{c.innerHTML=b}catch(d){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+d.message,d)}}this.node=c},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(b){if(b.destroy){b.destroy()}});delete this.parseResults}dojo.html._emptyNode(this.node)},onBegin:function(){var b=this.content;if(dojo.isString(b)){if(this.cleanContent){b=dojo.html._secureForInnerHtml(b)}if(this.extractContent){var c=b.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(c){b=c[1]}}}this.empty();this.content=b;return this.node},onEnd:function(){if(this.parseContent){this._parse()}return this.node},tearDown:function(){delete this.parseResults;delete this.node;delete this.content},onContentError:function(b){return"Error occured setting content: "+b},_mixin:function(b){var d={},c;for(c in b){if(c in d){continue}this[c]=b[c]}},_parse:function(){var b=this.node;try{this.parseResults=dojo.parser.parse(b,true)}catch(c){this._onError("Content",c,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(b,c,f){var d=this["on"+b+"Error"].call(this,c);if(f){console.error(f,c)}else{if(d){dojo.html._setNodeContent(this.node,d,true)}}}});dojo.html.set=function(c,b,d){if(undefined==b){console.warn("dojo.html.set: no cont argument provided, using empty string");b=""}if(!d){return dojo.html._setNodeContent(c,b,true)}else{var f=new dojo.html._ContentSetter(dojo.mixin(d,{content:b,node:c}));return f.set()}}})()}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(n,m,l){l=dojo.i18n.normalizeLocale(l);var g=l.split("-");var f=[n,"nls",m].join(".");var c=dojo._loadedModules[f];if(c){var b;for(var a=g.length;a>0;a--){var d=g.slice(0,a).join("_");if(c[d]){b=c[d];break}}if(!b){b=c.ROOT}if(b){var k=function(){};k.prototype=b;return new k()}}throw new Error("Bundle not found: "+m+" in "+n+" , locale="+l)};dojo.i18n.normalizeLocale=function(b){var a=b?b.toLowerCase():dojo.locale;if(a=="root"){a="ROOT"}return a};dojo.i18n._requireLocalization=function(t,u,s,r){var p=dojo.i18n.normalizeLocale(s);var m=[t,"nls",u].join(".");var k="";if(r){var f=r.split(",");for(var q=0;q<f.length;q++){if(p.indexOf(f[q])==0){if(f[q].length>k.length){k=f[q]}}}if(!k){k="ROOT"}}var c=r?k:p;var a=dojo._loadedModules[m];var o=null;if(a){if(dojo.config.localizationComplete&&a._built){return}var l=c.replace(/-/g,"_");var g=m+"."+l;o=dojo._loadedModules[g]}if(!o){a=dojo.provide(m);var n=dojo._getModuleSymbols(t);var d=n.concat("nls").join("/");var b;dojo.i18n._searchLocalePath(c,r,function(A){var z=A.replace(/-/g,"_");var y=m+"."+z;var x=false;if(!dojo._loadedModules[y]){dojo.provide(y);var w=[d];if(A!="ROOT"){w.push(A)}w.push(u);var v=w.join("/")+".js";x=dojo._loadPath(v,null,function(D){var B=function(){};B.prototype=b;a[z]=new B();for(var C in D){a[z][C]=D[C]}})}else{x=true}if(x&&a[z]){b=a[z]}else{a[z]=b}if(r){return true}})}if(r&&p!=k){a[p.replace(/-/g,"_")]=a[k.replace(/-/g,"_")]}};(function(){var a=dojo.config.extraLocale;if(a){if(!a instanceof Array){a=[a]}var b=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(f,d,g,c){b(f,d,g,c);if(g){return}for(var k=0;k<a.length;k++){b(f,d,a[k],c)}}}})();dojo.i18n._searchLocalePath=function(c,l,b){c=dojo.i18n.normalizeLocale(c);var a=c.split("-");var m=[];for(var f=a.length;f>0;f--){m.push(a.slice(0,f).join("-"))}m.push(false);if(l){m.reverse()}for(var d=m.length-1;d>=0;d--){var g=m[d]||"ROOT";var k=b(g);if(k){break}}};dojo.i18n._preloadLocalizations=function(b,f){function d(g){g=dojo.i18n.normalizeLocale(g);dojo.i18n._searchLocalePath(g,true,function(l){for(var k=0;k<f.length;k++){if(f[k]==l){dojo.require(b+"_"+l);return true}}return false})}d();var a=dojo.config.extraLocale||[];for(var c=0;c<a.length;c++){d(a[c])}}}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",doLayout:true,ioArgs:{},isContainer:true,postMixInProperties:function(){this.inherited(arguments);var a=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);if(!this.href&&this.srcNodeRef&&this.srcNodeRef.innerHTML){this.isLoaded=true}},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode}},postCreate:function(){this.domNode.title="";if(!dijit.hasWaiRole(this.domNode)){dijit.setWaiRole(this.domNode,"group")}dojo.addClass(this.domNode,this.baseClass)},startup:function(){if(this._started){return}if(this.isLoaded){dojo.forEach(this.getChildren(),function(a){a.startup()});if(this.doLayout){this._checkIfSingleChild()}if(!this._singleChild||!dijit._Contained.prototype.getParent.call(this)){this._scheduleLayout()}}this._loadCheck();this.inherited(arguments)},_checkIfSingleChild:function(){var c=dojo.query(">",this.containerNode),b=c.filter(function(d){return dojo.hasAttr(d,"dojoType")||dojo.hasAttr(d,"widgetId")}),a=dojo.filter(b.map(dijit.byNode),function(d){return d&&d.domNode&&d.resize});if(c.length==b.length&&a.length==1){this._singleChild=a[0]}else{delete this._singleChild}},setHref:function(a){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use attr('href', ...) instead.","","2.0");return this.attr("href",a)},_setHrefAttr:function(a){this.cancel();this.href=a;if(this._created&&(this.preload||this._isShown())){return this.refresh()}else{this._hrefChanged=true}},setContent:function(a){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use attr('content', ...) instead.","","2.0");this.attr("content",a)},_setContentAttr:function(a){this.href="";this.cancel();this._setContent(a||"");this._isDownloaded=false},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel()}delete this._xhrDfd},uninitialize:function(){if(this._beingDestroyed){this.cancel()}},destroyRecursive:function(a){if(this._beingDestroyed){return}this._beingDestroyed=true;this.inherited(arguments)},resize:function(b){dojo.marginBox(this.domNode,b);var c=this.containerNode,d=dojo.mixin(dojo.marginBox(c),b||{});var a=(this._contentBox=dijit.layout.marginBox2contentBox(c,d));if(this._singleChild&&this._singleChild.resize){this._singleChild.resize({w:a.w,h:a.h})}},_isShown:function(){if("open" in this){return this.open}else{var a=this.domNode;return(a.style.display!="none")&&(a.style.visibility!="hidden")&&!dojo.hasClass(a,"dijitHidden")}},_onShow:function(){if(this._needLayout){this._layoutChildren()}this._loadCheck();if(this.onShow){this.onShow()}},_loadCheck:function(){if((this.href&&!this._xhrDfd)&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)&&(this.preload||this._isShown())){delete this._hrefChanged;this.refresh()}},refresh:function(){this.cancel();this._setContent(this.onDownloadStart(),true);var c=this;var a={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(a,this.ioArgs)}var b=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(a));b.addCallback(function(d){try{c._isDownloaded=true;c._setContent(d,false);c.onDownloadEnd()}catch(f){c._onError("Content",f)}delete c._xhrDfd;return d});b.addErrback(function(d){if(!b.canceled){c._onError("Download",d)}delete c._xhrDfd;return d})},_onLoadHandler:function(a){this.isLoaded=true;try{this.onLoad(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this.isLoaded=false;try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(){if(this.isLoaded){this._onUnloadHandler()}var a=this._contentSetter;dojo.forEach(this.getChildren(),function(b){if(b.destroyRecursive){b.destroyRecursive()}});if(a){dojo.forEach(a.parseResults,function(b){if(b.destroyRecursive&&b.domNode&&b.domNode.parentNode==dojo.body()){b.destroyRecursive()}});delete a.parseResults}dojo.html._emptyNode(this.containerNode)},_setContent:function(a,d){this.destroyDescendants();delete this._singleChild;var c=this._contentSetter;if(!(c&&c instanceof dojo.html._ContentSetter)){c=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(g){var f=this.onContentError(g);try{this.containerNode.innerHTML=f}catch(g){console.error("Fatal "+this.id+" could not change content due to "+g.message,g)}})})}var b=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad},this._contentSetterParams||{});dojo.mixin(c,b);c.set((dojo.isObject(a)&&a.domNode)?a.domNode:a);delete this._contentSetterParams;if(!d){dojo.forEach(this.getChildren(),function(f){f.startup()});if(this.doLayout){this._checkIfSingleChild()}this._scheduleLayout();this._onLoadHandler(a)}},_onError:function(c,d,b){var a=this["on"+c+"Error"].call(this,d);if(b){console.error(b,d)}else{if(a){this._setContent(a,true)}}},_scheduleLayout:function(){if(this._isShown()){this._layoutChildren()}else{this._needLayout=true}},_layoutChildren:function(){if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else{dojo.forEach(this.getChildren(),function(b){if(b.resize){b.resize()}})}delete this._needLayout},onLoad:function(a){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(a){},onDownloadError:function(a){return this.errorMessage},onDownloadEnd:function(){}})}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_stringRepl:function(a){var c=this.declaredClass,b=this;return dojo.string.substitute(a,this,function(f,d){if(d.charAt(0)=="!"){f=dojo.getObject(d.substr(1),b)}if(typeof f=="undefined"){throw new Error(c+" template:"+d)}if(f==null){return""}return d.charAt(0)=="!"?f:f.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){var c=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var b;if(dojo.isString(c)){b=dojo._toDom(this._stringRepl(c))}else{b=c.cloneNode(true)}this.domNode=b;this._attachTemplateNodes(b);if(this.widgetsInTemplate){var a=(this._supportingWidgets=dojo.parser.parse(b));this._attachTemplateNodes(a,function(f,d){return f[d]})}this._fillContent(this.srcNodeRef)},_fillContent:function(b){var a=this.containerNode;if(b&&a){while(b.hasChildNodes()){a.appendChild(b.firstChild)}}},_attachTemplateNodes:function(q,o){o=o||function(v,u){return v.getAttribute(u)};var s=dojo.isArray(q)?q:(q.all||q.getElementsByTagName("*"));var t=dojo.isArray(q)?0:-1;for(;t<s.length;t++){var r=(t==-1)?q:s[t];if(this.widgetsInTemplate&&o(r,"dojoType")){continue}var p=o(r,"dojoAttachPoint");if(p){var n,m=p.split(/\s*,\s*/);while((n=m.shift())){if(dojo.isArray(this[n])){this[n].push(r)}else{this[n]=r}}}var k=o(r,"dojoAttachEvent");if(k){var g,f=k.split(/\s*,\s*/);var d=dojo.trim;while((g=f.shift())){if(g){var c=null;if(g.indexOf(":")!=-1){var b=g.split(":");g=d(b[0]);c=d(b[1])}else{g=d(g)}if(!c){c=g}this.connect(r,g,c)}}}var l=o(r,"waiRole");if(l){dijit.setWaiRole(r,l)}var a=o(r,"waiState");if(a){dojo.forEach(a.split(/\s*,\s*/),function(u){if(u.indexOf("-")!=-1){var v=u.split("-");dijit.setWaiState(r,v[0],v[1])}})}}}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(g,d,c){var b=dijit._Templated._templateCache;var f=d||g;var a=b[f];if(a){if(!a.ownerDocument||a.ownerDocument==dojo.doc){return a}dojo.destroy(a)}if(!d){d=dijit._Templated._sanitizeTemplateString(dojo.trim(dojo._getText(g)))}d=dojo.string.trim(d);if(c||d.match(/\$\{([^\}]+)\}/g)){return(b[f]=d)}else{return(b[f]=dojo._toDom(d))}};dijit._Templated._sanitizeTemplateString=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(b){a=b[1]}}else{a=""}return a};if(dojo.isIE){dojo.addOnWindowUnload(function(){var c=dijit._Templated._templateCache;for(var a in c){var b=c[a];if(!isNaN(b.nodeType)){dojo.destroy(b)}delete c[a]}})}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""})}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip">\n\t<div class="dijitTooltipContainer dijitTooltipContents" dojoAttachPoint="containerNode" waiRole=\'alert\'></div>\n\t<div class="dijitTooltipConnector"></div>\n</div>\n',postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")})},show:function(f,d,c){if(this.aroundNode&&this.aroundNode===d){return}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return}this.containerNode.innerHTML=f;this.domNode.style.top=(this.domNode.offsetTop+1)+"px";var a={};var b=this.isLeftToRight();dojo.forEach((c&&c.length)?c:dijit.Tooltip.defaultPosition,function(k){switch(k){case"after":a[b?"BR":"BL"]=b?"BL":"BR";break;case"before":a[b?"BL":"BR"]=b?"BR":"BL";break;case"below":a[b?"BL":"BR"]=b?"TL":"TR";a[b?"BR":"BL"]=b?"TR":"TL";break;case"above":default:a[b?"TL":"TR"]=b?"BL":"BR";a[b?"TR":"TL"]=b?"BR":"BL";break}});var g=dijit.placeOnScreenAroundElement(this.domNode,d,a,dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=d},orient:function(c,b,a){c.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+a]},_onShow:function(){if(dojo.isIE){this.domNode.style.filter=""}},hide:function(a){if(this._onDeck&&this._onDeck[1]==a){this._onDeck=null}else{if(this.aroundNode===a){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play()}else{}}},_onHide:function(){this.domNode.style.cssText="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null}}});dijit.showTooltip=function(c,b,a){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip()}return dijit._masterTT.show(c,b,a)};dijit.hideTooltip=function(a){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip()}return dijit._masterTT.hide(a)};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(a){this._connectNodes=[];this.connectId=dojo.isArrayLike(a)?a:[a];dojo.forEach(this.connectId,function(c){var b=dojo.byId(c);if(b){this._connectNodes.push(b);dojo.forEach(["onMouseEnter","onMouseLeave","onFocus","onBlur"],function(d){this.connect(b,d.toLowerCase(),"_"+d)},this);if(dojo.isIE){b.style.zoom=1}}},this)},postCreate:function(){dojo.addClass(this.domNode,"dijitTooltipData")},_onMouseEnter:function(a){this._onHover(a)},_onMouseLeave:function(a){this._onUnHover(a)},_onFocus:function(a){this._focus=true;this._onHover(a);this.inherited(arguments)},_onBlur:function(a){this._focus=false;this._onUnHover(a);this.inherited(arguments)},_onHover:function(b){if(!this._showTimer){var a=b.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(a)}),this.showDelay)}},_onUnHover:function(a){if(this._focus){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}this.close()},open:function(a){a=a||this._connectNodes[0];if(!a){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}dijit.showTooltip(this.label||this.domNode.innerHTML,a,this.position);this._connectNode=a},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}},uninitialize:function(){this.close()}});dijit.Tooltip.defaultPosition=["after","before"]}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,readOnly:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",disabled:"focusNode",readOnly:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments)},_setDisabledAttr:function(a){this.disabled=a;dojo.attr(this.focusNode,"disabled",a);dijit.setWaiState(this.focusNode,"disabled",a);if(a){this._hovering=false;this._active=false;this.focusNode.removeAttribute("tabIndex")}else{this.focusNode.setAttribute("tabIndex",this.tabIndex)}this._setStateClass()},setDisabled:function(a){dojo.deprecated("setDisabled("+a+") is deprecated. Use attr('disabled',"+a+") instead.","","2.0");this.attr("disabled",a)},_onFocus:function(a){if(this.scrollOnFocus){dijit.scrollIntoView(this.domNode)}this.inherited(arguments)},_onMouse:function(b){var a=b.currentTarget;if(a&&a.getAttribute){this.stateModifier=a.getAttribute("stateModifier")||""}if(!this.disabled){switch(b.type){case"mouseenter":case"mouseover":this._hovering=true;this._active=this._mouseDown;break;case"mouseout":case"mouseleave":this._hovering=false;this._active=false;break;case"mousedown":this._active=true;this._mouseDown=true;var c=this.connect(dojo.body(),"onmouseup",function(){if(this._mouseDown&&this.isFocusable()){this.focus()}this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(c)});break}this._setStateClass()}},isFocusable:function(){return !this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none")},focus:function(){dijit.focus(this.focusNode)},_setStateClass:function(){var g=this.baseClass.split(" ");function d(c){g=g.concat(dojo.map(g,function(l){return l+c}),"dijit"+c)}if(this.checked){d("Checked")}if(this.state){d(this.state)}if(this.selected){d("Selected")}if(this.disabled){d("Disabled")}else{if(this.readOnly){d("ReadOnly")}else{if(this._active){d(this.stateModifier+"Active")}else{if(this._focused){d("Focused")}if(this._hovering){d(this.stateModifier+"Hover")}}}}var a=this.stateNode||this.domNode,f={};dojo.forEach(a.className.split(" "),function(l){f[l]=true});if("_stateClasses" in this){dojo.forEach(this._stateClasses,function(l){delete f[l]})}dojo.forEach(g,function(l){f[l]=true});var b=[];for(var k in f){b.push(k)}a.className=b.join(" ");this._stateClasses=g},compare:function(b,a){if((typeof b=="number")&&(typeof a=="number")){return(isNaN(b)&&isNaN(a))?0:(b-a)}else{if(b>a){return 1}else{if(b<a){return -1}else{return 0}}}},onChange:function(a){},_onChangeActive:false,_handleOnChange:function(b,a){this._lastValue=b;if(this._lastValueReported==undefined&&(a===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=b}if((this.intermediateChanges||a||a===undefined)&&((typeof b!=typeof this._lastValueReported)||this.compare(b,this._lastValueReported)!=0)){this._lastValueReported=b;if(this._onChangeActive){this.onChange(b)}}},create:function(){this.inherited(arguments);this._onChangeActive=true;this._setStateClass()},destroy:function(){if(this._layoutHackHandle){clearTimeout(this._layoutHackHandle)}this.inherited(arguments)},setValue:function(a){dojo.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use attr('value',"+a+") instead.","","2.0");this.attr("value",a)},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value")},_layoutHack:function(){if(dojo.isFF==2&&!this._layoutHackHandle){var b=this.domNode;var a=b.style.opacity;b.style.opacity="0.999";this._layoutHackHandle=setTimeout(dojo.hitch(this,function(){this._layoutHackHandle=null;b.style.opacity=a}),0)}}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:""}),postCreate:function(){if(dojo.isIE||dojo.isWebKit){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown)}if(this._resetValue===undefined){this._resetValue=this.value}},_setValueAttr:function(b,a){this.value=b;this._handleOnChange(b,a)},_getValueAttr:function(a){return this._lastValue},undo:function(){this._setValueAttr(this._lastValueReported,false)},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true)},_onKeyDown:function(a){if(a.keyCode==dojo.keys.ESCAPE&&!a.ctrlKey&&!a.altKey){var b;if(dojo.isIE){a.preventDefault();b=document.createEventObject();b.keyCode=dojo.keys.ESCAPE;b.shiftKey=a.shiftKey;a.srcElement.fireEvent("onkeypress",b)}else{if(dojo.isWebKit){b=document.createEvent("Events");b.initEvent("keypress",true,true);b.keyCode=dojo.keys.ESCAPE;b.shiftKey=a.shiftKey;a.target.dispatchEvent(b)}}}}})}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",templateString:'<input class="dijit dijitReset dijitLeft" dojoAttachPoint=\'textbox,focusNode\'\n\tdojoAttachEvent=\'onmouseenter:_onMouse,onmouseleave:_onMouse\'\n\tautocomplete="off" type="${type}" ${nameAttrSetting}\n\t/>\n',baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),_getValueAttr:function(){return this.parse(this.attr("displayedValue"),this.constraints)},_setValueAttr:function(c,d,b){var a;if(c!==undefined){a=this.filter(c);if(typeof b!="string"){if(a!==null&&((typeof a!="number")||!isNaN(a))){b=this.filter(this.format(a,this.constraints))}else{b=""}}}if(b!=null&&b!=undefined&&((typeof b)!="number"||!isNaN(b))&&this.textbox.value!=b){this.textbox.value=b}this.inherited(arguments,[a,d])},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use attr('displayedValue') instead.","","2.0");return this.attr("displayedValue")},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},setDisplayedValue:function(a){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use attr('displayedValue', ...) instead.","","2.0");this.attr("displayedValue",a)},_setDisplayedValueAttr:function(a){if(a===null||a===undefined){a=""}else{if(typeof a!="string"){a=String(a)}}this.textbox.value=a;this._setValueAttr(this.attr("value"),undefined,a)},format:function(b,a){return((b==null||b==undefined)?"":(b.toString?b.toString():b))},parse:function(b,a){return b},_refreshState:function(){},_onInput:function(b){if(b&&b.type&&/key/i.test(b.type)&&b.keyCode){switch(b.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return}}if(this.intermediateChanges){var a=this;setTimeout(function(){a._handleOnChange(a.attr("value"),false)},0)}this._refreshState()},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera){this.connect(this.textbox,"oninput",this._onInput)}else{this.connect(this.textbox,"onkeydown",this._onInput);this.connect(this.textbox,"onkeyup",this._onInput);this.connect(this.textbox,"onpaste",this._onInput);this.connect(this.textbox,"oncut",this._onInput)}this._layoutHack()},filter:function(a){if(a===null){return""}if(typeof a!="string"){return a}if(this.trim){a=dojo.trim(a)}if(this.uppercase){a=a.toUpperCase()}if(this.lowercase){a=a.toLowerCase()}if(this.propercase){a=a.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)})}return a},_setBlurValue:function(){this._setValueAttr(this.attr("value"),true)},_onBlur:function(a){if(this.disabled){return}this._setBlurValue();this.inherited(arguments)},_onFocus:function(a){if(this.disabled){return}this._refreshState();this.inherited(arguments)},reset:function(){this.textbox.value="";this.inherited(arguments)}});dijit.selectInputText=function(_3bf,_3c0,stop){var _3c2=dojo.global;var _3c3=dojo.doc;_3bf=dojo.byId(_3bf);if(isNaN(_3c0)){_3c0=0}if(isNaN(stop)){stop=_3bf.value?_3bf.value.length:0}_3bf.focus();if(_3c3.selection&&dojo.body()["createTextRange"]){if(_3bf.createTextRange){var _3c4=_3bf.createTextRange();with(_3c4){collapse(true);moveStart("character",_3c0);moveEnd("character",stop);select()}}}else{if(_3c2.getSelection){var _3c5=_3c2.getSelection();if(_3bf.setSelectionRange){_3bf.setSelectionRange(_3c0,stop)}}}}}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse" waiRole="presentation"\n\t><div style="overflow:hidden;"\n\t\t><div class="dijitReset dijitValidationIcon"><br></div\n\t\t><div class="dijitReset dijitValidationIconText">&Chi;</div\n\t\t><div class="dijitReset dijitInputField"\n\t\t\t><input class="dijitReset" dojoAttachPoint=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${nameAttrSetting} type=\'${type}\'\n\t\t/></div\n\t></div\n></div>\n',baseClass:"dijitTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(a){return this.regExp},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused)},validator:function(b,a){return(new RegExp("^(?:"+this.regExpGen(a)+")"+(this.required?"":"?")+"$")).test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||this.parse(b,a)!==undefined)},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0},isValid:function(a){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(a){return/^\s*$/.test(a)},getErrorMessage:function(a){return this.invalidMessage},getPromptMessage:function(a){return this.promptMessage},_maskValidSubsetError:true,validate:function(f){var d="";var b=this.disabled||this.isValid(f);if(b){this._maskValidSubsetError=true}var c=!b&&f&&this._isValidSubset();var a=this._isEmpty(this.textbox.value);this.state=(b||(!this._hasBeenBlurred&&a)||c)?"":"Error";if(this.state=="Error"){this._maskValidSubsetError=false}this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",b?"false":"true");if(f){if(a){d=this.getPromptMessage(true)}if(!d&&(this.state=="Error"||(c&&!this._maskValidSubsetError))){d=this.getErrorMessage(true)}}this.displayMessage(d);return b},_message:"",displayMessage:function(a){if(this._message==a){return}this._message=a;dijit.hideTooltip(this.domNode);if(a){dijit.showTooltip(a,this.domNode,this.tooltipPosition)}},_refreshState:function(){this.validate(this._focused);this.inherited(arguments)},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this.constraints.locale=this.lang;this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage}var b=this.regExpGen(this.constraints);this.regExp=b;var c="";if(b!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(d){switch(d.charAt(0)){case"{":case"+":case"?":case"*":case"^":case"$":case"|":case"(":c+=d;break;case")":c+="|$)";break;default:c+="(?:"+d+"|$)";break}})}try{"".search(c)}catch(a){c=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp)}this._partialre="^(?:"+c+")$"},_setDisabledAttr:function(a){this.inherited(arguments);if(this.valueNode){this.valueNode.disabled=a}this._refreshState()},_setRequiredAttr:function(a){this.required=a;dijit.setWaiState(this.focusNode,"required",a);this._refreshState()},postCreate:function(){if(dojo.isIE){var b=dojo.getComputedStyle(this.focusNode);if(b){var a=b.fontFamily;if(a){this.focusNode.style.fontFamily=a}}}this.inherited(arguments)},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments)}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},serialize:function(b,a){return b.toString?b.toString():""},toString:function(){var a=this.filter(this.attr("value"));return a!=null?(typeof a=="string"?a:this.serialize(a,this.constraints)):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.create("input",{style:{display:"none"},type:this.type,name:this.name},this.textbox,"after")},_setDisabledAttr:function(a){this.inherited(arguments);dojo.attr(this.valueNode,"disabled",a)},reset:function(){this.valueNode.value="";this.inherited(arguments)}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(d,b){var c="min" in b;var a="max" in b;if(c||a){return(!c||this.compare(d,b.min)>=0)&&(!a||this.compare(d,b.max)<=0)}return true},isInRange:function(a){return this.rangeCheck(this.attr("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var f=this.attr("value");var c=false;var b=false;if("min" in this.constraints){var d=this.constraints.min;f=this.compare(f,((typeof d=="number")&&d>=0&&f!=0)?0:d);c=(typeof f=="number")&&f<0}if("max" in this.constraints){var a=this.constraints.max;f=this.compare(f,((typeof a!="number")||a>0)?a:0);b=(typeof f=="number")&&f>0}return c||b},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(a))},getErrorMessage:function(a){if(dijit.form.RangeBoundTextBox.superclass.isValid.call(this,false)&&!this.isInRange(a)){return this.rangeMessage}return this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage}},postCreate:function(){this.inherited(arguments);if(this.constraints.min!==undefined){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min)}if(this.constraints.max!==undefined){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max)}},_setValueAttr:function(a,b){dijit.setWaiState(this.focusNode,"valuenow",a);this.inherited(arguments)}})}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",null,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse" dojoAttachPoint="comboNode" waiRole="combobox" tabIndex="-1"\n\t><div style="overflow:hidden;"\n\t\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\'\n\t\t\tdojoAttachPoint="downArrowNode" waiRole="presentation"\n\t\t\tdojoAttachEvent="onmousedown:_onArrowMouseDown,onmouseup:_onMouse,onmouseenter:_onMouse,onmouseleave:_onMouse"\n\t\t\t><div class="dijitArrowButtonInner">&thinsp;</div\n\t\t\t><div class="dijitArrowButtonChar">&#9660;</div\n\t\t></div\n\t\t><div class="dijitReset dijitValidationIcon"><br></div\n\t\t><div class="dijitReset dijitValidationIconText">&Chi;</div\n\t\t><div class="dijitReset dijitInputField"\n\t\t\t><input ${nameAttrSetting} type="text" autocomplete="off" class=\'dijitReset\'\n\t\t\tdojoAttachEvent="onkeypress:_onKeyPress,compositionend"\n\t\t\tdojoAttachPoint="textbox,focusNode" waiRole="textbox" waiState="haspopup-true,autocomplete-list"\n\t\t/></div\n\t></div\n></div>\n',baseClass:"dijitComboBox",_getCaretPos:function(d){var f=0;if(typeof(d.selectionStart)=="number"){f=d.selectionStart}else{if(dojo.isIE){var b=dojo.doc.selection.createRange().duplicate();var a=d.createTextRange();b.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",b);f=String(a.text).replace(/\r/g,"").length}catch(c){}}}return f},_setCaretPos:function(b,a){a=parseInt(a);dijit.selectInputText(b,a,a)},_setDisabledAttr:function(a){this.inherited(arguments);dijit.setWaiState(this.comboNode,"disabled",a)},_onKeyPress:function(a){var d=a.charOrCode;if(a.altKey||(a.ctrlKey&&(d!="x"&&d!="v"))||a.key==dojo.keys.SHIFT){return}var b=false;var f=this._popupWidget;var c=dojo.keys;var k=null;if(this._isShowingNow){f.handleKey(d);k=f.getHighlightedOption()}switch(d){case c.PAGE_DOWN:case c.DOWN_ARROW:if(!this._isShowingNow||this._prev_key_esc){this._arrowPressed();b=true}else{if(k){this._announceOption(k)}}dojo.stopEvent(a);this._prev_key_backspace=false;this._prev_key_esc=false;break;case c.PAGE_UP:case c.UP_ARROW:if(this._isShowingNow){this._announceOption(k)}dojo.stopEvent(a);this._prev_key_backspace=false;this._prev_key_esc=false;break;case c.ENTER:if(k){if(k==f.nextButton){this._nextSearch(1);dojo.stopEvent(a);break}else{if(k==f.previousButton){this._nextSearch(-1);dojo.stopEvent(a);break}}}else{this._setDisplayedValueAttr(this.attr("displayedValue"),true)}a.preventDefault();case c.TAB:var g=this.attr("displayedValue");if(f&&(g==f._messages.previousMessage||g==f._messages.nextMessage)){break}if(this._isShowingNow){this._prev_key_backspace=false;this._prev_key_esc=false;if(k){f.attr("value",{target:k})}this._lastQuery=null;this._hideResultList()}break;case" ":this._prev_key_backspace=false;this._prev_key_esc=false;if(k){dojo.stopEvent(a);this._selectOption();this._hideResultList()}else{b=true}break;case c.ESCAPE:this._prev_key_backspace=false;this._prev_key_esc=true;if(this._isShowingNow){dojo.stopEvent(a);this._hideResultList()}break;case c.DELETE:case c.BACKSPACE:this._prev_key_esc=false;this._prev_key_backspace=true;b=true;break;case c.RIGHT_ARROW:case c.LEFT_ARROW:this._prev_key_backspace=false;this._prev_key_esc=false;break;default:this._prev_key_backspace=false;this._prev_key_esc=false;b=typeof d=="string"}if(this.searchTimer){clearTimeout(this.searchTimer)}if(b){setTimeout(dojo.hitch(this,"_startSearchFromInput"),1)}},_autoCompleteText:function(c){var b=this.focusNode;dijit.selectInputText(b,b.value.length);var a=this.ignoreCase?"toLowerCase":"substr";if(c[a](0).indexOf(this.focusNode.value[a](0))==0){var d=this._getCaretPos(b);if((d+1)>b.value.length){b.value=c;dijit.selectInputText(b,d)}}else{b.value=c;dijit.selectInputText(b)}},_openResultList:function(c,b){if(this.disabled||this.readOnly||(b.query[this.searchAttr]!=this._lastQuery)){return}this._popupWidget.clearResultList();if(!c.length){this._hideResultList();return}this.item=null;var a=new String(this.store.getValue(c[0],this.searchAttr));if(a&&this.autoComplete&&!this._prev_key_backspace&&(b.query[this.searchAttr]!="*")){this.item=c[0];this._autoCompleteText(a)}b._maxOptions=this._maxOptions;this._popupWidget.createOptions(c,b,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(b.direction){if(1==b.direction){this._popupWidget.highlightFirstOption()}else{if(-1==b.direction){this._popupWidget.highlightLastOption()}}this._announceOption(this._popupWidget.getHighlightedOption())}},_showResultList:function(){this._hideResultList();var d=this._popupWidget.getItems(),c=Math.min(d.length,this.maxListLength);this._arrowPressed();this.displayMessage("");dojo.style(this._popupWidget.domNode,{width:"",height:""});var f=this.open();var b=dojo.marginBox(this._popupWidget.domNode);this._popupWidget.domNode.style.overflow=((f.h==b.h)&&(f.w==b.w))?"hidden":"auto";var a=f.w;if(f.h<this._popupWidget.domNode.scrollHeight){a+=16}dojo.marginBox(this._popupWidget.domNode,{h:f.h,w:Math.max(a,this.domNode.offsetWidth)});dijit.setWaiState(this.comboNode,"expanded","true")},_hideResultList:function(){if(this._isShowingNow){dijit.popup.close(this._popupWidget);this._arrowIdle();this._isShowingNow=false;dijit.setWaiState(this.comboNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant")}},_setBlurValue:function(){var b=this.attr("displayedValue");var a=this._popupWidget;if(a&&(b==a._messages.previousMessage||b==a._messages.nextMessage)){this._setValueAttr(this._lastValueReported,true)}else{this.attr("displayedValue",b)}},_onBlur:function(){this._hideResultList();this._arrowIdle();this.inherited(arguments)},_announceOption:function(a){if(a==null){return}var b;if(a==this._popupWidget.nextButton||a==this._popupWidget.previousButton){b=a.innerHTML}else{b=this.store.getValue(a.item,this.searchAttr)}this.focusNode.value=this.focusNode.value.substring(0,this._getCaretPos(this.focusNode));dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(a,"id"));this._autoCompleteText(b)},_selectOption:function(a){var b=null;if(!a){a={target:this._popupWidget.getHighlightedOption()}}if(!a.target){this.attr("displayedValue",this.attr("displayedValue"));return}else{b=a.target}if(!a.noHide){this._hideResultList();this._setCaretPos(this.focusNode,this.store.getValue(b.item,this.searchAttr).length)}this._doSelect(b)},_doSelect:function(a){this.item=a.item;this.attr("value",this.store.getValue(a.item,this.searchAttr))},_onArrowMouseDown:function(a){if(this.disabled||this.readOnly){return}dojo.stopEvent(a);this.focus();if(this._isShowingNow){this._hideResultList()}else{this._startSearch("")}},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_getQueryString:function(a){return dojo.string.substitute(this.queryExpr,[a])},_startSearch:function(a){if(!this._popupWidget){var c=this.id+"_popup";this._popupWidget=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption),id:c});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",c)}this.item=null;var b=dojo.clone(this.query);this._lastInput=a;this._lastQuery=b[this.searchAttr]=this._getQueryString(a);this.searchTimer=setTimeout(dojo.hitch(this,function(l,k){var g={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:l,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(m){console.error("dijit.form.ComboBox: "+m);dojo.hitch(k,"_hideResultList")()},start:0,count:this.pageSize};dojo.mixin(g,k.fetchProperties);var f=k.store.fetch(g);var d=function(n,m){n.start+=n.count*m;n.direction=m;this.store.fetch(n)};this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,d,f)},b,this),this.searchDelay)},_setMaxOptions:function(b,a){this._maxOptions=b},_getValueField:function(){return this.searchAttr},_arrowPressed:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){dojo.addClass(this.downArrowNode,"dijitArrowButtonActive")}},_arrowIdle:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){dojo.removeClass(this.downArrowNode,"dojoArrowButtonPushed")}},compositionend:function(a){this._onKeyPress({charCode:-1})},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.hasDownArrow){this.baseClass="dijitTextBox"}if(!this.store){var b=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(b);if(!this.value||((typeof b.selectedIndex=="number")&&b.selectedIndex.toString()===this.value)){var a=this.store.fetchSelectedItem();if(a){this.value=this.store.getValue(a,this._getValueField())}}}this.inherited(arguments)},postCreate:function(){var a=dojo.query('label[for="'+this.id+'"]');if(a.length){a[0].id=(this.id+"_label");var b=this.comboNode;dijit.setWaiState(b,"labelledby",a[0].id)}this.inherited(arguments)},uninitialize:function(){if(this._popupWidget){this._hideResultList();this._popupWidget.destroy()}},_getMenuLabelFromItem:function(b){var c=this.store.getValue(b,this.labelAttr||this.searchAttr);var a=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){c=this.doHighlight(c,this._escapeHtml(this._lastInput));a="html"}return{html:a=="html",label:c}},doHighlight:function(d,f){var c="i"+(this.highlightMatch=="all"?"g":"");var a=this._escapeHtml(d);f=dojo.regexp.escapeString(f);var b=a.replace(new RegExp("(^|\\s)("+f+")",c),'$1<span class="dijitComboBoxHighlightMatch">$2</span>');return b},_escapeHtml:function(a){a=String(a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return a},open:function(){this._isShowingNow=true;return dijit.popup.open({popup:this._popupWidget,around:this.domNode,parent:this})},reset:function(){this.item=null;this.inherited(arguments)}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' tabIndex='-1' style='overflow: \"auto\"; overflow-x: \"hidden\";'><li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' waiRole='option'></li><li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' waiRole='option'></li></ul>",_messages:null,postMixInProperties:function(){this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);this.inherited(arguments)},_setValueAttr:function(a){this.value=a;this.onChange(a)},onChange:function(a){},onPage:function(a){},postCreate:function(){this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage;this.inherited(arguments)},onClose:function(){this._blurOptionNode()},_createOption:function(c,b){var d=b(c);var a=dojo.doc.createElement("li");dijit.setWaiRole(a,"option");if(d.html){a.innerHTML=d.label}else{a.appendChild(dojo.doc.createTextNode(d.label))}if(a.innerHTML==""){a.innerHTML="&nbsp;"}a.item=c;return a},createOptions:function(d,c,b){this.previousButton.style.display=(c.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(d,function(k,f){var g=this._createOption(k,b);g.className="dijitReset dijitMenuItem";dojo.attr(g,"id",this.id+f);this.domNode.insertBefore(g,this.nextButton)},this);var a=false;if(c._maxOptions&&c._maxOptions!=-1){if((c.start+c.count)<c._maxOptions){a=true}else{if((c.start+c.count)>(c._maxOptions-1)){if(c.count==d.length){a=true}}}}else{if(c.count==d.length){a=true}}this.nextButton.style.display=a?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next")},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2])}},getItems:function(){return this.domNode.childNodes},getListLength:function(){return this.domNode.childNodes.length-2},_onMouseDown:function(a){dojo.stopEvent(a)},_onMouseUp:function(a){if(a.target===this.domNode){return}else{if(a.target==this.previousButton){this.onPage(-1)}else{if(a.target==this.nextButton){this.onPage(1)}else{var b=a.target;while(!b.item){b=b.parentNode}this._setValueAttr({target:b},true)}}}},_onMouseOver:function(a){if(a.target===this.domNode){return}var b=a.target;if(!(b==this.previousButton||b==this.nextButton)){while(!b.item){b=b.parentNode}}this._focusOptionNode(b)},_onMouseOut:function(a){if(a.target===this.domNode){return}this._blurOptionNode()},_focusOptionNode:function(a){if(this._highlighted_option!=a){this._blurOptionNode();this._highlighted_option=a;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected")}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null}},_highlightNextOption:function(){var b=this.domNode.firstChild;if(!this.getHighlightedOption()){this._focusOptionNode(b.style.display=="none"?b.nextSibling:b)}else{var a=this._highlighted_option.nextSibling;if(a&&a.style.display!="none"){this._focusOptionNode(a)}}dijit.scrollIntoView(this._highlighted_option)},highlightFirstOption:function(){this._focusOptionNode(this.domNode.firstChild.nextSibling);dijit.scrollIntoView(this._highlighted_option)},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dijit.scrollIntoView(this._highlighted_option)},_highlightPrevOption:function(){var a=this.domNode.lastChild;if(!this.getHighlightedOption()){this._focusOptionNode(a.style.display=="none"?a.previousSibling:a)}else{var b=this._highlighted_option.previousSibling;if(b&&b.style.display!="none"){this._focusOptionNode(b)}}dijit.scrollIntoView(this._highlighted_option)},_page:function(a){var f=0;var d=this.domNode.scrollTop;var c=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption()}while(f<c){if(a){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break}this._highlightPrevOption()}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break}this._highlightNextOption()}var b=this.domNode.scrollTop;f+=(b-d)*(a?-1:1);d=b}},pageUp:function(){this._page(true)},pageDown:function(){this._page(false)},getHighlightedOption:function(){var a=this._highlighted_option;return(a&&a.parentNode)?a:null},handleKey:function(a){switch(a){case dojo.keys.DOWN_ARROW:this._highlightNextOption();break;case dojo.keys.PAGE_DOWN:this.pageDown();break;case dojo.keys.UP_ARROW:this._highlightPrevOption();break;case dojo.keys.PAGE_UP:this.pageUp();break}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(b,a){if(!b){b=""}dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,b,a)}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(a){this.root=a;dojo.query("> option",a).forEach(function(b){b.innerHTML=dojo.trim(b.innerHTML)})},getValue:function(c,a,b){return(a=="value")?c.value:(c.innerText||c.textContent||"")},isItemLoaded:function(a){return true},getFeatures:function(){return{"dojo.data.api.Read":true,"dojo.data.api.Identity":true}},_fetchItems:function(c,b,a){if(!c.query){c.query={}}if(!c.query.name){c.query.name=""}if(!c.queryOptions){c.queryOptions={}}var f=dojo.data.util.filter.patternToRegExp(c.query.name,c.queryOptions.ignoreCase),d=dojo.query("> option",this.root).filter(function(g){return(g.innerText||g.textContent||"").match(f)});if(c.sort){d.sort(dojo.data.util.sorter.createSortFunction(c.sort,this))}b(d,c)},close:function(a){return},getLabel:function(a){return a.innerHTML},getIdentity:function(a){return dojo.attr(a,"value")},fetchItemByIdentity:function(a){var b=dojo.query("option[value='"+a.identity+"']",this.root)[0];a.onItem(b)},fetchSelectedItem:function(){var a=this.root,b=a.selectedIndex;return dojo.query("> option:nth-child("+(b!=-1?b+1:1)+")",a)[0]}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch)}if(!dojo._hasResource["dijit.form.FilteringSelect"]){dojo._hasResource["dijit.form.FilteringSelect"]=true;dojo.provide("dijit.form.FilteringSelect");dojo.declare("dijit.form.FilteringSelect",[dijit.form.MappedTextBox,dijit.form.ComboBoxMixin],{_isvalid:true,required:true,_lastDisplayedValue:"",isValid:function(){return this._isvalid||(!this.required&&this.attr("displayedValue")=="")},_callbackSetLabel:function(b,c,a){if((c&&c.query[this.searchAttr]!=this._lastQuery)||(!c&&b.length&&this.store.getIdentity(b[0])!=this._lastQuery)){return}if(!b.length){this.valueNode.value="";dijit.form.TextBox.superclass._setValueAttr.call(this,"",a||(a===undefined&&!this._focused));this._isvalid=false;this.validate(this._focused);this.item=null}else{this._setValueFromItem(b[0],a)}},_openResultList:function(b,a){if(a.query[this.searchAttr]!=this._lastQuery){return}this._isvalid=b.length!=0;this.validate(true);dijit.form.ComboBoxMixin.prototype._openResultList.apply(this,arguments)},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValue:function(c,b,a){this.valueNode.value=c;dijit.form.FilteringSelect.superclass._setValueAttr.call(this,c,a,b);this._lastDisplayedValue=b},_setValueAttr:function(d,c){if(!this._onChangeActive){c=null}this._lastQuery=d;if(d===null||d===""){this._setDisplayedValueAttr("",c);return}var b=this;var a=function(f,g){if(f){if(b.store.isItemLoaded(f)){b._callbackSetLabel([f],undefined,g)}else{b.store.loadItem({item:f,onItem:function(l,k){b._callbackSetLabel(l,k,g)}})}}else{b._isvalid=false;b.validate(false)}};this.store.fetchItemByIdentity({identity:d,onItem:function(f){a(f,c)}})},_setValueFromItem:function(a,b){this._isvalid=true;this.item=a;this._setValue(this.store.getIdentity(a),this.labelFunc(a,this.store),b)},labelFunc:function(b,a){return a.getValue(b,this.searchAttr)},_doSelect:function(a){this._setValueFromItem(a.item,true)},_setDisplayedValueAttr:function(d,c){if(!this._created){c=false}if(this.store){var b=dojo.clone(this.query);this._lastQuery=b[this.searchAttr]=d.replace(/([\\\*\?])/g,"\\$1");this.textbox.value=d;this._lastDisplayedValue=d;var a=this;var f={query:b,queryOptions:{ignoreCase:this.ignoreCase,deep:true},onComplete:function(k,g){dojo.hitch(a,"_callbackSetLabel")(k,g,c)},onError:function(g){console.error("dijit.form.FilteringSelect: "+g);dojo.hitch(a,"_setValue")("",d,false)}};dojo.mixin(f,this.fetchProperties);this.store.fetch(f)}},postMixInProperties:function(){this.inherited(arguments);this._isvalid=!this.required},undo:function(){this.attr("displayedValue",this._lastDisplayedValue)}})}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{constructor:function(a){var b=this;dojo.mixin(b,a);b.node=a.node;b._showArgs=dojo.mixin({},a);b._showArgs.node=b.node;b._showArgs.duration=b.showDuration;b.showAnim=b.showFunc(b._showArgs);b._hideArgs=dojo.mixin({},a);b._hideArgs.node=b.node;b._hideArgs.duration=b.hideDuration;b.hideAnim=b.hideFunc(b._hideArgs);dojo.connect(b.showAnim,"beforeBegin",dojo.hitch(b.hideAnim,"stop",true));dojo.connect(b.hideAnim,"beforeBegin",dojo.hitch(b.showAnim,"stop",true))},node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,show:function(a){return this.showAnim.play(a||0)},hide:function(a){return this.hideAnim.play(a||0)}})}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var f=dojo,c={_fire:function(d,g){if(this[d]){this[d].apply(this,g||[])}return this}};var b=function(d){this._index=-1;this._animations=d||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;f.forEach(this._animations,function(g){this.duration+=g.duration;if(g.delay){this.duration+=g.delay}},this)};f.extend(b,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){f.disconnect(this._onAnimateCtx);f.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd")}else{this._current=this._animations[++this._index];this._onAnimateCtx=f.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=f.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true)}},play:function(k,d){if(!this._current){this._current=this._animations[this._index=0]}if(!d&&this._current.status()=="playing"){return this}var m=f.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin")}),l=f.connect(this._current,"onBegin",this,function(n){this._fire("onBegin",arguments)}),g=f.connect(this._current,"onPlay",this,function(n){this._fire("onPlay",arguments);f.disconnect(m);f.disconnect(l);f.disconnect(g)});if(this._onAnimateCtx){f.disconnect(this._onAnimateCtx)}this._onAnimateCtx=f.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){f.disconnect(this._onEndCtx)}this._onEndCtx=f.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var d=f.connect(this._current,"onPause",this,function(g){this._fire("onPause",arguments);f.disconnect(d)});this._current.pause()}return this},gotoPercent:function(d,k){this.pause();var g=this.duration*d;this._current=null;f.some(this._animations,function(l){if(l.duration<=g){this._current=l;return true}g-=l.duration;return false});if(this._current){this._current.gotoPercent(g/this._current.duration,k)}return this},stop:function(d){if(this._current){if(d){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true)}this._current=this._animations[this._index]}var g=f.connect(this._current,"onStop",this,function(k){this._fire("onStop",arguments);f.disconnect(g)});this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){if(this._onAnimateCtx){f.disconnect(this._onAnimateCtx)}if(this._onEndCtx){f.disconnect(this._onEndCtx)}}});f.extend(b,c);dojo.fx.chain=function(d){return new b(d)};var a=function(g){this._animations=g||[];this._connects=[];this._finished=0;this.duration=0;f.forEach(g,function(k){var l=k.duration;if(k.delay){l+=k.delay}if(this.duration<l){this.duration=l}this._connects.push(f.connect(k,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new f._Animation({curve:[0,1],duration:this.duration});var d=this;f.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop"],function(k){d._connects.push(f.connect(d._pseudoAnimation,k,function(){d._fire(k,arguments)}))})};f.extend(a,{_doAction:function(d,g){f.forEach(this._animations,function(k){k[d].apply(k,g)});return this},_onEnd:function(){if(++this._finished==this._animations.length){this._fire("onEnd")}},_call:function(d,g){var k=this._pseudoAnimation;k[d].apply(k,g)},play:function(g,d){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(k,g){var d=this.duration*k;f.forEach(this._animations,function(l){l.gotoPercent(l.duration<d?1:(d/l.duration),g)});this._call("gotoPercent",arguments);return this},stop:function(d){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){f.forEach(this._connects,dojo.disconnect)}});f.extend(a,c);dojo.fx.combine=function(d){return new a(d)};dojo.fx.wipeIn=function(d){d.node=f.byId(d.node);var k=d.node,g=k.style,m;var l=f.animateProperty(f.mixin({properties:{height:{start:function(){m=g.overflow;g.overflow="hidden";if(g.visibility=="hidden"||g.display=="none"){g.height="1px";g.display="";g.visibility="";return 1}else{var n=f.style(k,"height");return Math.max(n,1)}},end:function(){return k.scrollHeight}}}},d));f.connect(l,"onEnd",function(){g.height="auto";g.overflow=m});return l};dojo.fx.wipeOut=function(d){var k=d.node=f.byId(d.node),g=k.style,m;var l=f.animateProperty(f.mixin({properties:{height:{end:1}}},d));f.connect(l,"beforeBegin",function(){m=g.overflow;g.overflow="hidden";g.display=""});f.connect(l,"onEnd",function(){g.overflow=m;g.height="auto";g.display="none"});return l};dojo.fx.slideTo=function(d){var g=d.node=f.byId(d.node),m=null,l=null;var n=(function(o){return function(){var q=f.getComputedStyle(o);var r=q.position;m=(r=="absolute"?o.offsetTop:parseInt(q.top)||0);l=(r=="absolute"?o.offsetLeft:parseInt(q.left)||0);if(r!="absolute"&&r!="relative"){var p=f.coords(o,true);m=p.y;l=p.x;o.style.position="absolute";o.style.top=m+"px";o.style.left=l+"px"}}})(g);n();var k=f.animateProperty(f.mixin({properties:{top:d.top||0,left:d.left||0}},d));f.connect(k,"beforeBegin",k,n);return k}})()}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:'<span class="dijit dijitReset dijitLeft dijitInline"\n\tdojoAttachEvent="ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"\n\t><span class="dijitReset dijitRight dijitInline"\n\t\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\t\t><button class="dijitReset dijitStretch dijitButtonContents"\n\t\t\t\tdojoAttachPoint="titleNode,focusNode" \n\t\t\t\t${nameAttrSetting} type="${type}" value="${value}" waiRole="button" waiState="labelledby-${id}_label"\n\t\t\t\t><span class="dijitReset dijitInline" dojoAttachPoint="iconNode" \n\t\t\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#10003;</span \n\t\t\t\t></span \n\t\t\t\t><span class="dijitReset dijitInline dijitButtonText" \n\t\t\t\t\tid="${id}_label"  \n\t\t\t\t\tdojoAttachPoint="containerNode"\n\t\t\t\t></span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n',attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),_onClick:function(a){if(this.disabled||this.readOnly){return false}this._clicked();return this.onClick(a)},_onButtonClick:function(c){if(c.type!="click"&&!(this.type=="submit"||this.type=="reset")){dojo.stopEvent(c)}if(this._onClick(c)===false){c.preventDefault()}else{if(this.type=="submit"&&!this.focusNode.form){for(var b=this.domNode;b.parentNode;b=b.parentNode){var a=dijit.byNode(b);if(a&&typeof a._onSubmit=="function"){a._onSubmit(c);break}}}}},_setValueAttr:function(b){var a=this.attributeMap.value||"";if(this[a.node||a||"domNode"].tagName=="BUTTON"){if(b!=this.value){}}},_fillContent:function(a){if(a&&!("label" in this.params)){this.attr("label",a.innerHTML)}},postCreate:function(){if(this.showLabel==false){dojo.addClass(this.containerNode,"dijitDisplayNone")}dojo.setSelectable(this.focusNode,false);this.inherited(arguments)},onClick:function(a){return true},_clicked:function(a){},setLabel:function(a){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",a)},_setLabelAttr:function(a){this.containerNode.innerHTML=this.label=a;this._layoutHack();if(this.showLabel==false&&!this.params.title){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"")}}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container],{baseClass:"dijitDropDownButton",templateString:'<span class="dijit dijitReset dijitLeft dijitInline"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\t><span class=\'dijitReset dijitRight dijitInline\'\n\t\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\t\t><button class="dijitReset dijitStretch dijitButtonContents" \n\t\t\t\t${nameAttrSetting} type="${type}" value="${value}"\n\t\t\t\tdojoAttachPoint="focusNode,titleNode" \n\t\t\t\twaiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t\t\t><span class="dijitReset dijitInline" \n\t\t\t\t\tdojoAttachPoint="iconNode"\n\t\t\t\t></span\n\t\t\t\t><span class="dijitReset dijitInline dijitButtonText"  \n\t\t\t\t\tdojoAttachPoint="containerNode,popupStateNode" \n\t\t\t\t\tid="${id}_label"\n\t\t\t\t></span\n\t\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner">&thinsp;</span\n\t\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t\t></button\n\t\t></span\n\t></span\n></span>\n',_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started){return}if(!this.dropDown){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(a);delete this.dropDownContainer}dijit.popup.prepare(this.dropDown.domNode);this.inherited(arguments)},destroyDescendants:function(){if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown}this.inherited(arguments)},_onArrowClick:function(a){if(this.disabled||this.readOnly){return}this._toggleDropDown()},_onDropDownClick:function(a){var b=dojo.isFF&&dojo.isFF<3&&navigator.appVersion.indexOf("Macintosh")!=-1;if(!b||a.detail!=0||this._seenKeydown){this._onArrowClick(a)}this._seenKeydown=false},_onDropDownKeydown:function(a){this._seenKeydown=true},_onDropDownBlur:function(a){this._seenKeydown=false},_onKey:function(a){if(this.disabled||this.readOnly){return}if(a.charOrCode==dojo.keys.DOWN_ARROW){if(!this.dropDown||this.dropDown.domNode.style.visibility=="hidden"){dojo.stopEvent(a);this._toggleDropDown()}}},_onBlur:function(){this._closeDropDown();this.inherited(arguments)},_toggleDropDown:function(){if(this.disabled||this.readOnly){return}dijit.focus(this.popupStateNode);var c=this.dropDown;if(!c){return}if(!this._opened){if(c.href&&!c.isLoaded){var a=this;var b=dojo.connect(c,"onLoad",function(){dojo.disconnect(b);a._openDropDown()});c.refresh();return}else{this._openDropDown()}}else{this._closeDropDown()}},_openDropDown:function(){var c=this.dropDown;var a=c.domNode.style.width;var b=this;dijit.popup.open({parent:this,popup:c,around:this.domNode,orient:this.isLeftToRight()?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onExecute:function(){b._closeDropDown(true)},onCancel:function(){b._closeDropDown(true)},onClose:function(){c.domNode.style.width=a;b.popupStateNode.removeAttribute("popupActive");b._opened=false}});if(this.domNode.offsetWidth>c.domNode.offsetWidth){var f=null;if(!this.isLeftToRight()){f=c.domNode.parentNode;var d=f.offsetLeft+f.offsetWidth}dojo.marginBox(c.domNode,{w:this.domNode.offsetWidth});if(f){f.style.left=d-this.domNode.offsetWidth+"px"}}this.popupStateNode.setAttribute("popupActive","true");this._opened=true;if(c.focus){c.focus()}},_closeDropDown:function(a){if(this._opened){dijit.popup.close(this.dropDown);if(a){this.focus()}this._opened=false}}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:'<table class=\'dijit dijitReset dijitInline dijitLeft\'\n\tcellspacing=\'0\' cellpadding=\'0\' waiRole="presentation"\n\t><tbody waiRole="presentation"><tr waiRole="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonContents dijitButtonNode"\n\t\t\tdojoAttachEvent="ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"  dojoAttachPoint="titleNode"\n\t\t\twaiRole="button" waiState="labelledby-${id}_label"\n\t\t\t><div class="dijitReset dijitInline" dojoAttachPoint="iconNode" waiRole="presentation"></div\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode" waiRole="presentation"></div\n\t\t></td\n\t\t><td class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\'\n\t\t\tdojoAttachPoint="popupStateNode,focusNode"\n\t\t\tdojoAttachEvent="ondijitclick:_onArrowClick, onkeypress:_onKey,onmouseenter:_onMouse,onmouseleave:_onMouse"\n\t\t\tstateModifier="DownArrow"\n\t\t\ttitle="${optionsTitle}" ${nameAttrSetting}\n\t\t\twaiRole="button" waiState="haspopup-true"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" waiRole="presentation">&thinsp;</div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" waiRole="presentation">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n',attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"]}),optionsTitle:"",baseClass:"dijitComboButton",_focusedNode:null,postCreate:function(){this.inherited(arguments);this._focalNodes=[this.titleNode,this.popupStateNode];dojo.forEach(this._focalNodes,dojo.hitch(this,function(a){if(dojo.isIE){this.connect(a,"onactivate",this._onNodeFocus);this.connect(a,"ondeactivate",this._onNodeBlur)}else{this.connect(a,"onfocus",this._onNodeFocus);this.connect(a,"onblur",this._onNodeBlur)}}))},focusFocalNode:function(a){this._focusedNode=a;dijit.focus(a)},hasNextFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[1]},focusNext:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?1:0];dijit.focus(this._focusedNode)},hasPrevFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[0]},focusPrev:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?0:1];dijit.focus(this._focusedNode)},getFocalNodes:function(){return this._focalNodes},_onNodeFocus:function(a){this._focusedNode=a.currentTarget;var b=this._focusedNode==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.addClass(this._focusedNode,b)},_onNodeBlur:function(a){var b=a.currentTarget==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.removeClass(a.currentTarget,b)},_onBlur:function(){this.inherited(arguments);this._focusedNode=null}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(a){this.attr("checked",!this.checked)},_setCheckedAttr:function(a){this.checked=a;dojo.attr(this.focusNode||this.domNode,"checked",a);dijit.setWaiState(this.focusNode||this.domNode,"pressed",a);this._setStateClass();this._handleOnChange(a,true)},setChecked:function(a){dojo.deprecated("setChecked("+a+") is deprecated. Use attr('checked',"+a+") instead.","","2.0");this.attr("checked",a)},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false)}})}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton")}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",[dijit._Container],{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(d,b){var a=this._keyNavCodes={};var f=dojo.hitch(this,this.focusPrev);var c=dojo.hitch(this,this.focusNext);dojo.forEach(d,function(g){a[g]=f});dojo.forEach(b,function(g){a[g]=c});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"))},addChild:function(b,a){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(b)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusNext:function(){if(this.focusedChild&&this.focusedChild.hasNextFocalNode&&this.focusedChild.hasNextFocalNode()){this.focusedChild.focusNext();return}var a=this._getNextFocusableChild(this.focusedChild,1);if(a.getFocalNodes){this.focusChild(a,a.getFocalNodes()[0])}else{this.focusChild(a)}},focusPrev:function(){if(this.focusedChild&&this.focusedChild.hasPrevFocalNode&&this.focusedChild.hasPrevFocalNode()){this.focusedChild.focusPrev();return}var b=this._getNextFocusableChild(this.focusedChild,-1);if(b.getFocalNodes){var a=b.getFocalNodes();this.focusChild(b,a[a.length-1])}else{this.focusChild(b)}},focusChild:function(a,b){if(a){if(this.focusedChild&&a!==this.focusedChild){this._onChildBlur(this.focusedChild)}this.focusedChild=a;if(b&&a.focusFocalNode){a.focusFocalNode(b)}else{a.focus()}}},_startupChild:function(b){if(b.getFocalNodes){dojo.forEach(b.getFocalNodes(),function(c){dojo.attr(c,"tabindex",-1);this._connectNode(c)},this)}else{var a=b.focusNode||b.domNode;if(b.isFocusable()){dojo.attr(a,"tabindex",-1)}this._connectNode(a)}},_connectNode:function(a){this.connect(a,"onfocus","_onNodeFocus");this.connect(a,"onblur","_onNodeBlur")},_onContainerFocus:function(a){if(a.target!==this.domNode){return}this.focusFirstChild();dojo.removeAttr(this.domNode,"tabIndex")},_onBlur:function(a){if(this.tabIndex){dojo.attr(this.domNode,"tabindex",this.tabIndex)}},_onContainerKeypress:function(a){if(a.ctrlKey||a.altKey){return}var b=this._keyNavCodes[a.charOrCode];if(b){b();dojo.stopEvent(a)}},_onNodeFocus:function(a){var b=dijit.getEnclosingWidget(a.target);if(b&&b.isFocusable()){this.focusedChild=b}dojo.stopEvent(a)},_onNodeBlur:function(a){dojo.stopEvent(a)},_onChildBlur:function(a){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getNextFocusableChild:function(a,b){if(a){a=this._getSiblingOfChild(a,b)}var d=this.getChildren();for(var c=0;c<d.length;c++){if(!a){a=d[(b>0)?0:(d.length-1)]}if(a.isFocusable()){return a}a=this._getSiblingOfChild(a,b)}return null}})}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" waiRole="menuitem" tabIndex="-1"\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\n\t<td class="dijitReset" waiRole="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon" dojoAttachPoint="iconNode">\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" waiRole="presentation">\n\t\t<div dojoAttachPoint="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand">\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n',attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(a){if(a&&!("label" in this.params)){this.attr("label",a.innerHTML)}},postCreate:function(){dojo.setSelectable(this.domNode,false);dojo.attr(this.containerNode,"id",this.id+"_text");dijit.setWaiState(this.domNode,"labelledby",this.id+"_text")},_onHover:function(){dojo.addClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemHover(this)},_onUnhover:function(){dojo.removeClass(this.domNode,"dijitMenuItemHover");this.getParent().onItemUnhover(this)},_onClick:function(a){this.getParent().onItemClick(this,a);dojo.stopEvent(a)},onClick:function(a){},focus:function(){try{dijit.focus(this.focusNode)}catch(a){}},_onFocus:function(){this._setSelected(true)},_setSelected:function(a){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",a)},setDisabled:function(a){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",a)},_setDisabledAttr:function(a){this.disabled=a;dojo[a?"addClass":"removeClass"](this.domNode,"dijitMenuItemDisabled");dijit.setWaiState(this.focusNode,"disabled",a?"true":"false")},_setAccelKeyAttr:function(a){this.accelKey=a;this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;dojo.attr(this.containerNode,"colSpan",a?"1":"2")}})}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started){return}this.inherited(arguments);if(!this.popup){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(a)}dojo.body().appendChild(this.popup.domNode);this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","")}dijit.setWaiState(this.focusNode,"haspopup","true")},destroyDescendants:function(){if(this.popup){this.popup.destroyRecursive();delete this.popup}this.inherited(arguments)}})}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" waiRole="menuitemcheckbox" tabIndex="-1"\n\t\tdojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick">\n\t<td class="dijitReset" waiRole="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" dojoAttachPoint="iconNode">\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" waiRole="presentation">\n\t</td>\n</tr>\n',checked:false,_setCheckedAttr:function(a){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",a);dijit.setWaiState(this.domNode,"checked",a);this.checked=a},onChange:function(a){},_onClick:function(a){if(!this.disabled){this.attr("checked",!this.checked);this.onChange(this.checked)}this.inherited(arguments)}})}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:'<tr class="dijitMenuSeparator">\n\t<td colspan="4">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>\n',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return}dojo.forEach(this.getChildren(),function(a){a.startup()});this.startupKeyNavChildren();this.inherited(arguments)},onExecute:function(){},onCancel:function(a){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(a)}else{var b=this._getTopMenu();if(b&&b._isMenuBar){b.focusNext()}}},onItemHover:function(a){if(this.isActive){this.focusChild(a);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay)}}},_onChildBlur:function(a){a._setSelected(false);dijit.popup.close(a.popup);this._stopPopupTimer()},onItemUnhover:function(a){if(this.isActive){this._stopPopupTimer()}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null}},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu){}return a},onItemClick:function(b,a){if(b.disabled){return false}this.focusChild(b);if(b.popup){if(!this.is_open){this._openPopup()}}else{this.onExecute();b.onClick(a)}},_openPopup:function(){this._stopPopupTimer();var c=this.focusedChild;var b=c.popup;if(b.isShowingNow){return}b.parentMenu=this;var a=this;dijit.popup.open({parent:this,popup:b,around:c.domNode,orient:this._orient||(this.isLeftToRight()?{TR:"TL",TL:"TR"}:{TL:"TR",TR:"TL"}),onCancel:function(){dijit.popup.close(b);c.focus();a.currentPopup=null},onExecute:dojo.hitch(this,"_onDescendantExecute")});this.currentPopup=b;if(b.focus){setTimeout(dojo.hitch(b,"focus"),0)}},onOpen:function(a){this.isShowingNow=true},onClose:function(){this._stopPopupTimer();this.parentMenu=null;this.isShowingNow=false;this.currentPopup=null;if(this.focusedChild){this._onChildBlur(this.focusedChild);this.focusedChild=null}},_onFocus:function(){this.isActive=true;dojo.addClass(this.domNode,"dijitMenuActive");dojo.removeClass(this.domNode,"dijitMenuPassive");this.inherited(arguments)},_onBlur:function(){this.isActive=false;dojo.removeClass(this.domNode,"dijitMenuActive");dojo.addClass(this.domNode,"dijitMenuPassive");this.onClose();this.inherited(arguments)},_onDescendantExecute:function(){this.onClose()}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[]},templateString:'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" waiRole="menu" tabIndex="${tabIndex}" dojoAttachEvent="onkeypress:_onKeyPress">\n\t<tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody>\n</table>\n',targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,_contextMenuWithMouse:false,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body())}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this)}var b=dojo.keys,a=this.isLeftToRight();this._openSubMenuKey=a?b.RIGHT_ARROW:b.LEFT_ARROW;this._closeSubMenuKey=a?b.LEFT_ARROW:b.RIGHT_ARROW;this.connectKeyNavHandlers([b.UP_ARROW],[b.DOWN_ARROW])},_onKeyPress:function(a){if(a.ctrlKey||a.altKey){return}switch(a.charOrCode){case this._openSubMenuKey:this._moveToPopup(a);dojo.stopEvent(a);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev()}else{this.onCancel(false)}}else{dojo.stopEvent(a)}break}},_iframeContentWindow:function(a){var b=dijit.getDocumentWindow(dijit.Menu._iframeContentDocument(a))||dijit.Menu._iframeContentDocument(a)["__parent__"]||(a.name&&dojo.doc.frames[a.name])||null;return b},_iframeContentDocument:function(a){var b=a.contentDocument||(a.contentWindow&&a.contentWindow.document)||(a.name&&dojo.doc.frames[a.name]&&dojo.doc.frames[a.name].document)||null;return b},bindDomNode:function(a){a=dojo.byId(a);var b=dijit.getDocumentWindow(a.ownerDocument);if(a.tagName.toLowerCase()=="iframe"){b=this._iframeContentWindow(a);a=dojo.withGlobal(b,dojo.body)}var c=(a==dojo.body()?dojo.doc:a);a[this.id]=this._bindings.push([dojo.connect(c,(this.leftClickToOpen)?"onclick":"oncontextmenu",this,"_openMyself"),dojo.connect(c,"onkeydown",this,"_contextKey"),dojo.connect(c,"onmousedown",this,"_contextMouse")])},unBindDomNode:function(c){var f=dojo.byId(c);if(f){var d=f[this.id]-1,a=this._bindings[d];dojo.forEach(a,dojo.disconnect);delete this._bindings[d]}},_contextKey:function(b){this._contextMenuWithMouse=false;if(b.keyCode==dojo.keys.F10){dojo.stopEvent(b);if(b.shiftKey&&b.type=="keydown"){var a={target:b.target,pageX:b.pageX,pageY:b.pageY};a.preventDefault=a.stopPropagation=function(){};window.setTimeout(dojo.hitch(this,function(){this._openMyself(a)}),1)}}},_contextMouse:function(a){this._contextMenuWithMouse=true},_openMyself:function(g){if(this.leftClickToOpen&&g.button>0){return}dojo.stopEvent(g);var b,k;if(dojo.isSafari||this._contextMenuWithMouse){b=g.pageX;k=g.pageY}else{var f=dojo.coords(g.target,true);b=f.x+10;k=f.y+10}var d=this;var c=dijit.getFocus(this);function a(){dijit.focus(c);dijit.popup.close(d)}dijit.popup.open({popup:this,x:b,y:k,onExecute:a,onCancel:a,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this)}},uninitialize:function(){dojo.forEach(this.targetNodeIds,this.unBindDomNode,this);this.inherited(arguments)}})}if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2handles={};this.pane2menu={};this._subscriptions=[dojo.subscribe(this.containerId+"-startup",this,"onStartup"),dojo.subscribe(this.containerId+"-addChild",this,"onAddChild"),dojo.subscribe(this.containerId+"-removeChild",this,"onRemoveChild"),dojo.subscribe(this.containerId+"-selectChild",this,"onSelectChild"),dojo.subscribe(this.containerId+"-containerKeyPress",this,"onContainerKeyPress")]},onStartup:function(a){dojo.forEach(a.children,this.onAddChild,this);this.onSelectChild(a.selected)},destroy:function(){for(var a in this.pane2button){this.onRemoveChild(a)}dojo.forEach(this._subscriptions,dojo.unsubscribe);this.inherited(arguments)},onAddChild:function(g,l){var k=dojo.doc.createElement("span");this.domNode.appendChild(k);var m=dojo.getObject(this.buttonWidget);var f=new m({label:g.title,closeButton:g.closable},k);this.addChild(f,l);this.pane2button[g]=f;g.controlButton=f;var d=[];d.push(dojo.connect(f,"onClick",dojo.hitch(this,"onButtonClick",g)));if(g.closable){d.push(dojo.connect(f,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",g)));var c=dojo.i18n.getLocalization("dijit","common");var b=new dijit.Menu({targetNodeIds:[f.id],id:f.id+"_Menu"});var a=new dijit.MenuItem({label:c.itemClose});d.push(dojo.connect(a,"onClick",dojo.hitch(this,"onCloseButtonClick",g)));b.addChild(a);this.pane2menu[g]=b}this.pane2handles[g]=d;if(!this._currentChild){f.focusNode.setAttribute("tabIndex","0");this._currentChild=g}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList()}},onRemoveChild:function(b){if(this._currentChild===b){this._currentChild=null}dojo.forEach(this.pane2handles[b],dojo.disconnect);delete this.pane2handles[b];var c=this.pane2menu[b];if(c){c.destroyRecursive();delete this.pane2menu[b]}var a=this.pane2button[b];if(a){a.destroy();delete this.pane2button[b]}},onSelectChild:function(d){if(!d){return}if(this._currentChild){var c=this.pane2button[this._currentChild];c.attr("checked",false);c.focusNode.setAttribute("tabIndex","-1")}var b=this.pane2button[d];b.attr("checked",true);this._currentChild=d;b.focusNode.setAttribute("tabIndex","0");var a=dijit.byId(this.containerId);dijit.setWaiState(a.containerNode,"labelledby",b.id)},onButtonClick:function(b){var a=dijit.byId(this.containerId);a.selectChild(b)},onCloseButtonClick:function(d){var c=dijit.byId(this.containerId);c.closeChild(d);var a=this.pane2button[this._currentChild];if(a){dijit.focus(a.focusNode||a.domNode)}},adjacent:function(d){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){d=!d}var a=this.getChildren();var c=dojo.indexOf(a,this.pane2button[this._currentChild]);var b=d?1:a.length-1;return a[(c+b)%a.length]},onkeypress:function(c){if(this.disabled||c.altKey){return}var b=null;if(c.ctrlKey||!c._djpage){var a=dojo.keys;switch(c.charOrCode){case a.LEFT_ARROW:case a.UP_ARROW:if(!c._djpage){b=false}break;case a.PAGE_UP:if(c.ctrlKey){b=false}break;case a.RIGHT_ARROW:case a.DOWN_ARROW:if(!c._djpage){b=true}break;case a.PAGE_DOWN:if(c.ctrlKey){b=true}break;case a.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild)}dojo.stopEvent(c);break;default:if(c.ctrlKey){if(c.charOrCode===a.TAB){this.adjacent(!c.shiftKey).onClick();dojo.stopEvent(c)}else{if(c.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild)}dojo.stopEvent(c)}}}}if(b!==null){this.adjacent(b).onClick();dojo.stopEvent(c)}}},onContainerKeyPress:function(a){a.e._djpage=a.page;this.onkeypress(a.e)}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(a){dijit.setWaiRole((this.focusNode||this.domNode),"tab");this.inherited(arguments)},onClick:function(a){dijit.focus(this.focusNode)},onClickCloseButton:function(a){a.stopPropagation()}})}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",_started:false,postCreate:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(this._started){return}var b=this.getChildren();dojo.forEach(b,this._setupChild,this);if(this.persist){this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"))}else{dojo.some(b,function(c){if(c.selected){this.selectedChildWidget=c}return c.selected},this)}var a=this.selectedChildWidget;if(!a&&b[0]){a=this.selectedChildWidget=b[0];a.selected=true}dojo.publish(this.id+"-startup",[{children:b,selected:a}]);if(a){this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);dojo.removeClass(a.domNode,"dijitVisible");dojo.addClass(a.domNode,"dijitHidden");a.domNode.title="";return a},addChild:function(b,a){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[b,a]);this.layout();if(!this.selectedChildWidget){this.selectChild(b)}}},removeChild:function(b){this.inherited(arguments);if(this._beingDestroyed){return}if(this._started){dojo.publish(this.id+"-removeChild",[b]);this.layout()}if(this.selectedChildWidget===b){this.selectedChildWidget=undefined;if(this._started){var a=this.getChildren();if(a.length){this.selectChild(a[0])}}}},selectChild:function(a){a=dijit.byId(a);if(this.selectedChildWidget!=a){this._transition(a,this.selectedChildWidget);this.selectedChildWidget=a;dojo.publish(this.id+"-selectChild",[a]);if(this.persist){dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id)}}},_transition:function(b,a){if(a){this._hideChild(a)}this._showChild(b);if(this.doLayout&&b.resize){b.resize(this._containerContentBox||this._contentBox)}},_adjacent:function(c){var b=this.getChildren();var a=dojo.indexOf(b,this.selectedChildWidget);a+=c?1:b.length-1;return b[a%b.length]},forward:function(){this.selectChild(this._adjacent(true))},back:function(){this.selectChild(this._adjacent(false))},_onKeyPress:function(a){dojo.publish(this.id+"-containerKeyPress",[{e:a,page:this}])},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._contentBox)}},_showChild:function(a){var b=this.getChildren();a.isFirstChild=(a==b[0]);a.isLastChild=(a==b[b.length-1]);a.selected=true;dojo.removeClass(a.domNode,"dijitHidden");dojo.addClass(a.domNode,"dijitVisible");if(a._onShow){a._onShow()}else{if(a.onShow){a.onShow()}}},_hideChild:function(a){a.selected=false;dojo.removeClass(a.domNode,"dijitVisible");dojo.addClass(a.domNode,"dijitHidden");if(a.onHide){a.onHide()}},closeChild:function(b){var a=b.onClose(this,b);if(a){this.removeChild(b);b.destroyRecursive()}},destroy:function(){this._beingDestroyed=true;this.inherited(arguments)}});dojo.extend(dijit._Widget,{title:"",selected:false,closable:false,onClose:function(){return true}})}if(!dojo._hasResource["dijit.layout.AccordionPane"]){dojo._hasResource["dijit.layout.AccordionPane"]=true;dojo.provide("dijit.layout.AccordionPane");dojo.declare("dijit.layout.AccordionPane",dijit.layout.ContentPane,{constructor:function(){dojo.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0")},onSelected:function(){}})}if(!dojo._hasResource["dijit.layout.AccordionContainer"]){dojo._hasResource["dijit.layout.AccordionContainer"]=true;dojo.provide("dijit.layout.AccordionContainer");dojo.declare("dijit.layout.AccordionContainer",dijit.layout.StackContainer,{duration:dijit.defaultDuration,_verticalSpace:0,baseClass:"dijitAccordionContainer",postCreate:function(){this.domNode.style.overflow="hidden";this.inherited(arguments);dijit.setWaiRole(this.domNode,"tablist")},startup:function(){if(this._started){return}this.inherited(arguments);if(this.selectedChildWidget){var a=this.selectedChildWidget.containerNode.style;a.display="";a.overflow="auto";this.selectedChildWidget._buttonWidget._setSelectedState(true)}},_getTargetHeight:function(b){var a=dojo.getComputedStyle(b);return Math.max(this._verticalSpace-dojo._getPadBorderExtents(b,a).h,0)},layout:function(){var c=this.selectedChildWidget;var b=0;dojo.forEach(this.getChildren(),function(d){b+=d._buttonWidget.getTitleHeight()});var a=this._contentBox;this._verticalSpace=a.h-b;this._containerContentBox={h:this._verticalSpace,w:a.w};if(c){c.resize(this._containerContentBox)}},_setupChild:function(a){a._buttonWidget=new dijit.layout._AccordionButton({contentWidget:a,title:a.title,id:a.id+"_button",parent:this});dojo.place(a._buttonWidget.domNode,a.domNode,"before");this.inherited(arguments)},removeChild:function(a){a._buttonWidget.destroy();this.inherited(arguments)},getChildren:function(){return dojo.filter(this.inherited(arguments),function(a){return a.declaredClass!="dijit.layout._AccordionButton"})},destroy:function(){dojo.forEach(this.getChildren(),function(a){a._buttonWidget.destroy()});this.inherited(arguments)},_transition:function(d,l){if(this._inTransition){return}this._inTransition=true;var k=[];var g=this._verticalSpace;if(d){d._buttonWidget.setSelected(true);this._showChild(d);if(this.doLayout&&d.resize){d.resize(this._containerContentBox)}var f=d.domNode;dojo.addClass(f,"dijitVisible");dojo.removeClass(f,"dijitHidden");var c=f.style.overflow;f.style.overflow="hidden";k.push(dojo.animateProperty({node:f,duration:this.duration,properties:{height:{start:1,end:this._getTargetHeight(f)}},onEnd:dojo.hitch(this,function(){f.style.overflow=c;delete this._inTransition})}))}if(l){l._buttonWidget.setSelected(false);var a=l.domNode,b=a.style.overflow;a.style.overflow="hidden";k.push(dojo.animateProperty({node:a,duration:this.duration,properties:{height:{start:this._getTargetHeight(a),end:1}},onEnd:function(){dojo.addClass(a,"dijitHidden");dojo.removeClass(a,"dijitVisible");a.style.overflow=b;if(l.onHide){l.onHide()}}}))}dojo.fx.combine(k).play()},_onKeyPress:function(d,b){if(this._inTransition||this.disabled||d.altKey||!(b||d.ctrlKey)){if(this._inTransition){dojo.stopEvent(d)}return}var a=dojo.keys,f=d.charOrCode;if((b&&(f==a.LEFT_ARROW||f==a.UP_ARROW))||(d.ctrlKey&&f==a.PAGE_UP)){this._adjacent(false)._buttonWidget._onTitleClick();dojo.stopEvent(d)}else{if((b&&(f==a.RIGHT_ARROW||f==a.DOWN_ARROW))||(d.ctrlKey&&(f==a.PAGE_DOWN||f==a.TAB))){this._adjacent(true)._buttonWidget._onTitleClick();dojo.stopEvent(d)}}}});dojo.declare("dijit.layout._AccordionButton",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint='titleNode,focusNode' dojoAttachEvent='ondijitclick:_onTitleClick,onkeypress:_onTitleKeyPress,onfocus:_handleFocus,onblur:_handleFocus,onmouseenter:_onTitleEnter,onmouseleave:_onTitleLeave'\n\t\tclass='dijitAccordionTitle' wairole=\"tab\" waiState=\"expanded-false\"\n\t\t><span class='dijitInline dijitAccordionArrow' waiRole=\"presentation\"></span\n\t\t><span class='arrowTextUp' waiRole=\"presentation\">+</span\n\t\t><span class='arrowTextDown' waiRole=\"presentation\">-</span\n\t\t><span waiRole=\"presentation\" dojoAttachPoint='titleTextNode' class='dijitAccordionText'></span>\n</div>\n",attributeMap:dojo.mixin(dojo.clone(dijit.layout.ContentPane.prototype.attributeMap),{title:{node:"titleTextNode",type:"innerHTML"}}),baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);this.setSelected(this.selected);var a=dojo.attr(this.domNode,"id").replace(" ","_");dojo.attr(this.titleTextNode,"id",a+"_title");dijit.setWaiState(this.focusNode,"labelledby",dojo.attr(this.titleTextNode,"id"))},getTitleHeight:function(){return dojo.marginBox(this.titleNode).h},_onTitleClick:function(){var a=this.getParent();if(!a._inTransition){a.selectChild(this.contentWidget);dijit.focus(this.focusNode)}},_onTitleEnter:function(){dojo.addClass(this.focusNode,"dijitAccordionTitle-hover")},_onTitleLeave:function(){dojo.removeClass(this.focusNode,"dijitAccordionTitle-hover")},_onTitleKeyPress:function(a){return this.getParent()._onKeyPress(a,this.contentWidget)},_setSelectedState:function(a){this.selected=a;dojo[(a?"addClass":"removeClass")](this.titleNode,"dijitAccordionTitle-selected");dijit.setWaiState(this.focusNode,"expanded",a);dijit.setWaiState(this.focusNode,"selected",a);this.focusNode.setAttribute("tabIndex",a?"0":"-1")},_handleFocus:function(a){dojo[(a.type=="focus"?"addClass":"removeClass")](this.focusNode,"dijitAccordionFocused")},setSelected:function(b){this._setSelectedState(b);if(b){var a=this.contentWidget;if(a.onSelected){a.onSelected()}}}})}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.dnd._isMac=navigator.appVersion.indexOf("Macintosh")>=0;dojo.dnd._copyKey=dojo.dnd._isMac?"metaKey":"ctrlKey";dojo.dnd.getCopyKeyState=function(a){return a[dojo.dnd._copyKey]};dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var a;do{a=dojo._scopeName+"Unique"+(++dojo.dnd._uniqueId)}while(dojo.byId(a));return a};dojo.dnd._empty={};dojo.dnd.isFormElement=function(b){var a=b.target;if(a.nodeType==3){a=a.parentNode}return" button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")>=0};dojo.dnd._lmb=dojo.isIE?1:0;dojo.dnd._isLmbPressed=dojo.isIE?function(a){return a.button&1}:function(a){return a.button===0}}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.dnd.getViewport=function(){var g=dojo.doc,c=g.documentElement,f=window,a=dojo.body();if(dojo.isMozilla){return{w:c.clientWidth,h:f.innerHeight}}else{if(!dojo.isOpera&&f.innerWidth){return{w:f.innerWidth,h:f.innerHeight}}else{if(!dojo.isOpera&&c&&c.clientWidth){return{w:c.clientWidth,h:c.clientHeight}}else{if(a.clientWidth){return{w:a.clientWidth,h:a.clientHeight}}}}}return null};dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(d){var c=dojo.dnd.getViewport(),b=0,a=0;if(d.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){b=-dojo.dnd.H_AUTOSCROLL_VALUE}else{if(d.clientX>c.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){b=dojo.dnd.H_AUTOSCROLL_VALUE}}if(d.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){a=-dojo.dnd.V_AUTOSCROLL_VALUE}else{if(d.clientY>c.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){a=dojo.dnd.V_AUTOSCROLL_VALUE}}window.scrollBy(b,a)};dojo.dnd._validNodes={div:1,p:1,td:1};dojo.dnd._validOverflow={auto:1,scroll:1};dojo.dnd.autoScrollNodes=function(g){for(var d=g.target;d;){if(d.nodeType==1&&(d.tagName.toLowerCase() in dojo.dnd._validNodes)){var v=dojo.getComputedStyle(d);if(v.overflow.toLowerCase() in dojo.dnd._validOverflow){var m=dojo._getContentBox(d,v),r=dojo._abs(d,true);var p=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,m.w/2),f=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,m.h/2),c=g.pageX-r.x,a=g.pageY-r.y,u=0,q=0;if(dojo.isWebKit||dojo.isOpera){c+=dojo.body().scrollLeft,a+=dojo.body().scrollTop}if(c>0&&c<m.w){if(c<p){u=-p}else{if(c>m.w-p){u=p}}}if(a>0&&a<m.h){if(a<f){q=-f}else{if(a>m.h-f){q=f}}}var l=d.scrollLeft,k=d.scrollTop;d.scrollLeft=d.scrollLeft+u;d.scrollTop=d.scrollTop+q;if(l!=d.scrollLeft||k!=d.scrollTop){return}}}try{d=d.parentNode}catch(o){d=null}}dojo.dnd.autoScroll(g)}}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(f,g,c){this.node=dojo.byId(f);this.marginBox={l:g.pageX,t:g.pageY};this.mouseButton=g.button;var b=this.host=c,k=f.ownerDocument,a=dojo.connect(k,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(k,"onmousemove",this,"onMouseMove"),dojo.connect(k,"onmouseup",this,"onMouseUp"),dojo.connect(k,"ondragstart",dojo.stopEvent),dojo.connect(k.body,"onselectstart",dojo.stopEvent),a];if(b&&b.onMoveStart){b.onMoveStart(this)}},onMouseMove:function(b){dojo.dnd.autoScroll(b);var a=this.marginBox;this.host.onMove(this,{l:a.l+b.pageX,t:a.t+b.pageY});dojo.stopEvent(b)},onMouseUp:function(a){if(dojo.isWebKit&&dojo.dnd._isMac&&this.mouseButton==2?a.button==0:this.mouseButton==a.button){this.destroy()}dojo.stopEvent(a)},onFirstMove:function(){var p=this.node.style,d,o,f=this.host;switch(p.position){case"relative":case"absolute":d=Math.round(parseFloat(p.left));o=Math.round(parseFloat(p.top));break;default:p.position="absolute";var c=dojo.marginBox(this.node);var k=dojo.doc.body;var n=dojo.getComputedStyle(k);var a=dojo._getMarginBox(k,n);var g=dojo._getContentBox(k,n);d=c.l-(g.l-a.l);o=c.t-(g.t-a.t);break}this.marginBox.l=d-this.marginBox.l;this.marginBox.t=o-this.marginBox.t;if(f&&f.onFirstMove){f.onFirstMove(this)}dojo.disconnect(this.events.pop())},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var a=this.host;if(a&&a.onMoveStop){a.onMoveStop(this)}this.events=this.node=this.host=null}})}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(a,b){this.node=dojo.byId(a);if(!b){b={}}this.handle=b.handle?dojo.byId(b.handle):null;if(!this.handle){this.handle=this.node}this.delay=b.delay>0?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(b,a){return new dojo.dnd.Moveable(a,b)},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null},onMouseDown:function(a){if(this.skip&&dojo.dnd.isFormElement(a)){return}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=a.pageX;this._lastY=a.pageY}else{this.onDragDetected(a)}dojo.stopEvent(a)},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay){this.onMouseUp(a);this.onDragDetected(a)}dojo.stopEvent(a)},onMouseUp:function(b){for(var a=0;a<2;++a){dojo.disconnect(this.events.pop())}dojo.stopEvent(b)},onSelectStart:function(a){if(!this.skip||!dojo.dnd.isFormElement(a)){dojo.stopEvent(a)}},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){dojo.publish("/dnd/move/start",[a]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem")},onMoveStop:function(a){dojo.publish("/dnd/move/stop",[a]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem")},onFirstMove:function(a){},onMove:function(c,b){this.onMoving(c,b);var a=c.node.style;a.left=b.l+"px";a.top=b.t+"px";this.onMoved(c,b)},onMoving:function(b,a){},onMoved:function(b,a){}})}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(b,a){return new dojo.dnd.move.constrainedMoveable(a,b)},constructor:function(b,a){if(!a){a={}}this.constraints=a.constraints;this.within=a.within},onFirstMove:function(a){var d=this.constraintBox=this.constraints.call(this,a);d.r=d.l+d.w;d.b=d.t+d.h;if(this.within){var b=dojo.marginBox(a.node);d.r-=b.w;d.b-=b.h}},onMove:function(b,a){var f=this.constraintBox,d=b.node.style;d.left=(a.l<f.l?f.l:f.r<a.l?f.r:a.l)+"px";d.top=(a.t<f.t?f.t:f.b<a.t?f.b:a.t)+"px"}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(b,a){return new dojo.dnd.move.boxConstrainedMoveable(a,b)},constructor:function(b,c){var a=c&&c.box;this.constraints=function(){return a}}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(b,a){return new dojo.dnd.move.parentConstrainedMoveable(a,b)},constructor:function(b,c){var a=c&&c.area;this.constraints=function(){var k=this.node.parentNode,f=dojo.getComputedStyle(k),g=dojo._getMarginBox(k,f);if(a=="margin"){return g}var d=dojo._getMarginExtents(k,f);g.l+=d.l,g.t+=d.t,g.w-=d.w,g.h-=d.h;if(a=="border"){return g}d=dojo._getBorderExtents(k,f);g.l+=d.l,g.t+=d.t,g.w-=d.w,g.h-=d.h;if(a=="padding"){return g}d=dojo._getPadExtents(k,f);g.l+=d.l,g.t+=d.t,g.w-=d.w,g.h-=d.h;return g}}});dojo.dnd.move.constrainedMover=function(b,a){dojo.deprecated("dojo.dnd.move.constrainedMover, use dojo.dnd.move.constrainedMoveable instead");var c=function(f,g,d){dojo.dnd.Mover.call(this,f,g,d)};dojo.extend(c,dojo.dnd.Mover.prototype);dojo.extend(c,{onMouseMove:function(k){dojo.dnd.autoScroll(k);var d=this.marginBox,n=this.constraintBox,f=d.l+k.pageX,g=d.t+k.pageY;f=f<n.l?n.l:n.r<f?n.r:f;g=g<n.t?n.t:n.b<g?n.b:g;this.host.onMove(this,{l:f,t:g})},onFirstMove:function(){dojo.dnd.Mover.prototype.onFirstMove.call(this);var f=this.constraintBox=b.call(this);f.r=f.l+f.w;f.b=f.t+f.h;if(a){var d=dojo.marginBox(this.node);f.r-=d.w;f.b-=d.h}}});return c};dojo.dnd.move.boxConstrainedMover=function(b,a){dojo.deprecated("dojo.dnd.move.boxConstrainedMover, use dojo.dnd.move.boxConstrainedMoveable instead");return dojo.dnd.move.constrainedMover(function(){return b},a)};dojo.dnd.move.parentConstrainedMover=function(c,b){dojo.deprecated("dojo.dnd.move.parentConstrainedMover, use dojo.dnd.move.parentConstrainedMoveable instead");var a=function(){var k=this.node.parentNode,f=dojo.getComputedStyle(k),g=dojo._getMarginBox(k,f);if(c=="margin"){return g}var d=dojo._getMarginExtents(k,f);g.l+=d.l,g.t+=d.t,g.w-=d.w,g.h-=d.h;if(c=="border"){return g}d=dojo._getBorderExtents(k,f);g.l+=d.l,g.t+=d.t,g.w-=d.w,g.h-=d.h;if(c=="padding"){return g}d=dojo._getPadExtents(k,f);g.l+=d.l,g.t+=d.t,g.w-=d.w,g.h-=d.h;return g};return dojo.dnd.move.constrainedMover(a,b)};dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover}if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var a=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(c,b){if(!b){b={}}if(b.timeout&&typeof b.timeout=="number"&&b.timeout>=0){this.timeout=b.timeout}},markupFactory:function(c,b){return new dojo.dnd.TimedMoveable(b,c)},onMoveStop:function(b){if(b._timer){clearTimeout(b._timer);a.call(this,b,b._leftTop)}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments)},onMove:function(c,b){c._leftTop=b;if(!c._timer){var d=this;c._timer=setTimeout(function(){c._timer=null;a.call(d,c,c._leftTop)},this.timeout)}}})})()}if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{reset:function(){dojo.forEach(this.getDescendants(),function(a){if(a.reset){a.reset()}})},validate:function(){var a=false;return dojo.every(dojo.map(this.getDescendants(),function(b){b._hasBeenBlurred=true;var c=b.disabled||!b.validate||b.validate();if(!c&&!a){dijit.scrollIntoView(b.containerNode||b.domNode);b.focus();a=true}return c}),function(b){return b})},setValues:function(a){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use attr('value', val) instead.","","2.0");return this.attr("value",a)},_setValueAttr:function(d){var c={};dojo.forEach(this.getDescendants(),function(k){if(!k.name){return}var g=c[k.name]||(c[k.name]=[]);g.push(k)});for(var a in c){if(!c.hasOwnProperty(a)){continue}var f=c[a],b=dojo.getObject(a,false,d);if(b===undefined){continue}if(!dojo.isArray(b)){b=[b]}if(typeof f[0].checked=="boolean"){dojo.forEach(f,function(g,k){g.attr("value",dojo.indexOf(b,g.value)!=-1)})}else{if(f[0]._multiValue){f[0].attr("value",b)}else{dojo.forEach(f,function(g,k){g.attr("value",b[k])})}}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value")},_getValueAttr:function(){var a={};dojo.forEach(this.getDescendants(),function(b){var c=b.name;if(!c||b.disabled){return}var f=b.attr("value");if(typeof b.checked=="boolean"){if(/Radio/.test(b.declaredClass)){if(f!==false){dojo.setObject(c,f,a)}else{f=dojo.getObject(c,false,a);if(f===undefined){dojo.setObject(c,null,a)}}}else{var d=dojo.getObject(c,false,a);if(!d){d=[];dojo.setObject(c,d,a)}if(f!==false){d.push(f)}}}else{dojo.setObject(c,f,a)}});return a},isValid:function(){this._invalidWidgets=dojo.filter(this.getDescendants(),function(a){return !a.disabled&&a.isValid&&!a.isValid()});return !this._invalidWidgets.length},onValidStateChange:function(a){},_widgetChange:function(b){var a=this._lastValidState;if(!b||this._lastValidState===undefined){a=this.isValid();if(this._lastValidState===undefined){this._lastValidState=a}}else{if(b.isValid){this._invalidWidgets=dojo.filter(this._invalidWidgets||[],function(c){return(c!=b)},this);if(!b.isValid()&&!b.attr("disabled")){this._invalidWidgets.push(b)}a=(this._invalidWidgets.length===0)}}if(a!==this._lastValidState){this._lastValidState=a;this.onValidStateChange(a)}},connectChildren:function(){dojo.forEach(this._changeConnections,dojo.hitch(this,"disconnect"));var a=this;var b=this._changeConnections=[];dojo.forEach(dojo.filter(this.getDescendants(),function(c){return c.validate}),function(c){b.push(a.connect(c,"validate",dojo.hitch(a,"_widgetChange",c)));b.push(a.connect(c,"_setDisabledAttr",dojo.hitch(a,"_widgetChange",c)))});this._widgetChange(null)},startup:function(){this.inherited(arguments);this._changeConnections=[];this.connectChildren()}})}if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(a){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.attr("value"))},_getFocusItems:function(b){var a=dijit._getTabNavigable(dojo.byId(b));this._firstFocusItem=a.lowest||a.first||b;this._lastFocusItem=a.last||a.highest||this._firstFocusItem;if(dojo.isMoz&&this._firstFocusItem.tagName.toLowerCase()=="input"&&dojo.attr(this._firstFocusItem,"type").toLowerCase()=="file"){dojo.attr(b,"tabindex","0");this._firstFocusItem=b}}})}if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(a){dojo.attr(this.node,"id",a+"_underlay")},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a},postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode)},layout:function(){var b=this.node.style,c=this.domNode.style;c.display="none";var a=dijit.getViewport();c.top=a.t+"px";c.left=a.l+"px";b.width=a.w+"px";b.height=a.h+"px";c.display="block"},show:function(){this.domNode.style.display="block";this.layout();if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="block"}},hide:function(){this.domNode.style.display="none";if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="none"}},uninitialize:function(){if(this.bgIframe){this.bgIframe.destroy()}}})}if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:null,templateString:'<div waiRole="presentation">\n\t<div class="dijitTooltipContainer" waiRole="presentation">\n\t\t<div class ="dijitTooltipContents dijitTooltipFocusNode" dojoAttachPoint="containerNode" tabindex="-1" waiRole="dialog"></div>\n\t</div>\n\t<div class="dijitTooltipConnector" waiRole="presentation"></div>\n</div>\n',postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");this.containerNode.title=this.title},orient:function(d,b,a){var f=this._currentOrientClass;if(f){dojo.removeClass(this.domNode,f)}f="dijitTooltipAB"+(a.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(a.charAt(0)=="T"?"Below":"Above");dojo.addClass(this.domNode,f);this._currentOrientClass=f},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);this._onShow();if(this.autofocus){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem)}},_onKey:function(a){var c=a.target;var b=dojo.keys;if(a.charOrCode===b.TAB){this._getFocusItems(this.containerNode)}var d=(this._firstFocusItem==this._lastFocusItem);if(a.charOrCode==b.ESCAPE){this.onCancel();dojo.stopEvent(a)}else{if(c==this._firstFocusItem&&a.shiftKey&&a.charOrCode===b.TAB){if(!d){dijit.focus(this._lastFocusItem)}dojo.stopEvent(a)}else{if(c==this._lastFocusItem&&a.charOrCode===b.TAB&&!a.shiftKey){if(!d){dijit.focus(this._firstFocusItem)}dojo.stopEvent(a)}else{if(a.charOrCode===b.TAB){a.stopPropagation()}}}}}})}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{templateString:null,templateString:'<div class="dijitDialog" tabindex="-1" waiRole="dialog" waiState="labelledby-${id}_title">\n\t<div dojoAttachPoint="titleBar" class="dijitDialogTitleBar">\n\t<span dojoAttachPoint="titleNode" class="dijitDialogTitle" id="${id}_title"></span>\n\t<span dojoAttachPoint="closeButtonNode" class="dijitDialogCloseIcon" dojoAttachEvent="onclick: onCancel, onmouseenter: _onCloseEnter, onmouseleave: _onCloseLeave" title="${buttonCancel}">\n\t\t<span dojoAttachPoint="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t</span>\n\t</div>\n\t\t<div dojoAttachPoint="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n',attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}]}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,_fixSizes:true,postMixInProperties:function(){var a=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,a);this.inherited(arguments)},postCreate:function(){dojo.style(this.domNode,{visibility:"hidden",position:"absolute",display:"",top:"-9999px"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();this.inherited(arguments)},_endDrag:function(c){if(c&&c.node&&c.node===this.domNode){var a=dijit.getViewport();var b=c._leftTop||dojo.coords(c.node,true);this._relativePosition={t:b.t-a.t,l:b.l-a.l}}},_setup:function(){var b=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(dojo.isIE==6)?new dojo.dnd.TimedMoveable(b,{handle:this.titleBar}):new dojo.dnd.Moveable(b,{handle:this.titleBar,timeout:0});dojo.subscribe("/dnd/move/stop",this,"_endDrag")}else{dojo.addClass(b,"dijitDialogFixed")}var c={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(d){return d+"_underlay"}).join(" ")};var a=dijit._underlay;if(!a){a=dijit._underlay=new dijit.DialogUnderlay(c)}this._fadeIn=dojo.fadeIn({node:b,duration:this.duration,beforeBegin:function(){a.attr(c);a.show()},onEnd:dojo.hitch(this,function(){if(this.autofocus){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem)}})});this._fadeOut=dojo.fadeOut({node:b,duration:this.duration,onEnd:function(){b.style.visibility="hidden";b.style.top="-9999px";dijit._underlay.hide()}})},uninitialize:function(){var a=false;if(this._fadeIn&&this._fadeIn.status()=="playing"){a=true;this._fadeIn.stop()}if(this._fadeOut&&this._fadeOut.status()=="playing"){a=true;this._fadeOut.stop()}if(this.open||a){dijit._underlay.hide()}if(this._moveable){this._moveable.destroy()}},_size:function(){var b=dojo.marginBox(this.domNode);var a=dijit.getViewport();if(b.w>=a.w||b.h>=a.h){dojo.style(this.containerNode,{width:Math.min(b.w,Math.floor(a.w*0.75))+"px",height:Math.min(b.h,Math.floor(a.h*0.75))+"px",overflow:"auto",position:"relative"})}},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var b=this.domNode;var a=dijit.getViewport();var c=this._relativePosition;var d=c?null:dojo.marginBox(b);dojo.style(b,{left:Math.floor(a.l+(c?c.l:(a.w-d.w)/2))+"px",top:Math.floor(a.t+(c?c.t:(a.h-d.h)/2))+"px"})}},_onKey:function(a){if(a.charOrCode){var b=dojo.keys;var c=a.target;if(a.charOrCode===b.TAB){this._getFocusItems(this.domNode)}var f=(this._firstFocusItem==this._lastFocusItem);if(c==this._firstFocusItem&&a.shiftKey&&a.charOrCode===b.TAB){if(!f){dijit.focus(this._lastFocusItem)}dojo.stopEvent(a)}else{if(c==this._lastFocusItem&&a.charOrCode===b.TAB&&!a.shiftKey){if(!f){dijit.focus(this._firstFocusItem)}dojo.stopEvent(a)}else{while(c){if(c==this.domNode){if(a.charOrCode==b.ESCAPE){this.onCancel()}else{return}}c=c.parentNode}if(a.charOrCode!==b.TAB){dojo.stopEvent(a)}else{if(!dojo.isOpera){try{this._firstFocusItem.focus()}catch(d){}}}}}}},show:function(){if(this.open){return}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true}if(this._fadeOut.status()=="playing"){this._fadeOut.stop()}this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var a=dijit.getViewport();if(!this._oldViewport||a.h!=this._oldViewport.h||a.w!=this._oldViewport.w){this.layout();this._oldViewport=a}}));this._modalconnects.push(dojo.connect(dojo.doc.documentElement,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,visibility:""});if(this._fixSizes){dojo.style(this.containerNode,{width:"auto",height:"auto"})}this.open=true;this._onShow();this._size();this._position();this._fadeIn.play();this._savedFocus=dijit.getFocus(this)},hide:function(){if(!this._alreadyInitialized){return}if(this._fadeIn.status()=="playing"){this._fadeIn.stop()}this._fadeOut.play();if(this._scrollConnected){this._scrollConnected=false}dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];if(this.refocus){this.connect(this._fadeOut,"onEnd",dojo.hitch(dijit,"focus",this._savedFocus))}if(this._relativePosition){delete this._relativePosition}this.open=false},layout:function(){if(this.domNode.style.visibility!="hidden"){dijit._underlay.layout();this._position()}},destroy:function(){dojo.forEach(this._modalconnects,dojo.disconnect);if(this.refocus&&this.open){setTimeout(dojo.hitch(dijit,"focus",this._savedFocus),25)}this.inherited(arguments)},_onCloseEnter:function(){dojo.addClass(this.closeButtonNode,"dijitDialogCloseIcon-hover")},_onCloseLeave:function(){dojo.removeClass(this.closeButtonNode,"dijitDialogCloseIcon-hover")}})}if(!dojo._hasResource["dojox.fx._base"]){dojo._hasResource["dojox.fx._base"]=true;dojo.provide("dojox.fx._base");dojo.mixin(dojox.fx,{anim:dojo.anim,animateProperty:dojo.animateProperty,fadeTo:dojo._fade,fadeIn:dojo.fadeIn,fadeOut:dojo.fadeOut,combine:dojo.fx.combine,chain:dojo.fx.chain,slideTo:dojo.fx.slideTo,wipeIn:dojo.fx.wipeIn,wipeOut:dojo.fx.wipeOut});dojox.fx.sizeTo=function(o){var d=o.node=dojo.byId(o.node);var n=o.method||"chain";if(!o.duration){o.duration=500}if(n=="chain"){o.duration=Math.floor(o.duration/2)}var p,m,c,l,k,g=null;var q=(function(r){return function(){var t=dojo.getComputedStyle(r);var u=t.position;p=(u=="absolute"?r.offsetTop:parseInt(t.top)||0);c=(u=="absolute"?r.offsetLeft:parseInt(t.left)||0);k=parseInt(t.width);g=parseInt(t.height);l=c-Math.floor((o.width-k)/2);m=p-Math.floor((o.height-g)/2);if(u!="absolute"&&u!="relative"){var s=dojo.coords(r,true);p=s.y;c=s.x;r.style.position="absolute";r.style.top=p+"px";r.style.left=c+"px"}}})(d);q();var b=dojo.animateProperty(dojo.mixin({properties:{height:{start:g,end:o.height||0,unit:"px"},top:{start:p,end:m}}},o));var a=dojo.animateProperty(dojo.mixin({properties:{width:{start:k,end:o.width||0,unit:"px"},left:{start:c,end:l}}},o));var f=dojo.fx[(o.method=="combine"?"combine":"chain")]([b,a]);dojo.connect(f,"beforeBegin",f,q);return f};dojox.fx.slideBy=function(a){var c=a.node=dojo.byId(a.node);var f=null;var d=null;var g=(function(k){return function(){var m=dojo.getComputedStyle(k);var n=m.position;f=(n=="absolute"?k.offsetTop:parseInt(m.top)||0);d=(n=="absolute"?k.offsetLeft:parseInt(m.left)||0);if(n!="absolute"&&n!="relative"){var l=dojo.coords(k,true);f=l.y;d=l.x;k.style.position="absolute";k.style.top=f+"px";k.style.left=d+"px"}}})(c);g();var b=dojo.animateProperty(dojo.mixin({properties:{top:f+(a.top||0),left:d+(a.left||0)}},a));dojo.connect(b,"beforeBegin",b,g);return b};dojox.fx.crossFade=function(c){if(dojo.isArray(c.nodes)){var b=c.nodes[0]=dojo.byId(c.nodes[0]);var g=dojo.style(b,"opacity");var a=c.nodes[1]=dojo.byId(c.nodes[1]);var f=dojo.style(a,"opacity");var d=dojo.fx.combine([dojo[(g==0?"fadeIn":"fadeOut")](dojo.mixin({node:b},c)),dojo[(g==0?"fadeOut":"fadeIn")](dojo.mixin({node:a},c))]);return d}else{return false}};dojox.fx.highlight=function(c){var d=c.node=dojo.byId(c.node);c.duration=c.duration||400;var b=c.color||"#ffff99";var a=dojo.style(d,"backgroundColor");var g=(a=="transparent"||a=="rgba(0, 0, 0, 0)")?a:false;var f=dojo.animateProperty(dojo.mixin({properties:{backgroundColor:{start:b,end:a}}},c));if(g){dojo.connect(f,"onEnd",f,function(){d.style.backgroundColor=g})}return f};dojox.fx.wipeTo=function(b){b.node=dojo.byId(b.node);var g=b.node,d=g.style;var a=(b.width?"width":"height");var f=b[a];var c={};c[a]={start:function(){d.overflow="hidden";if(d.visibility=="hidden"||d.display=="none"){d[a]="1px";d.display="";d.visibility="";return 1}else{var l=dojo.style(g,a);return Math.max(l,1)}},end:f,unit:"px"};var k=dojo.animateProperty(dojo.mixin({properties:c},b));return k}}if(!dojo._hasResource["dojox.image.Lightbox"]){dojo._hasResource["dojox.image.Lightbox"]=true;dojo.provide("dojox.image.Lightbox");dojo.experimental("dojox.image.Lightbox");dojo.declare("dojox.image.Lightbox",dijit._Widget,{group:"",title:"",href:"",duration:500,_allowPassthru:false,_attachedDialog:null,startup:function(){this.inherited(arguments);var a=dijit.byId("dojoxLightboxDialog");if(a){this._attachedDialog=a}else{this._attachedDialog=new dojox.image.LightboxDialog({id:"dojoxLightboxDialog"});this._attachedDialog.startup()}if(!this.store){this._addSelf();this.connect(this.domNode,"onclick","_handleClick")}},_addSelf:function(){this._attachedDialog.addImage({href:this.href,title:this.title},this.group||null)},_handleClick:function(a){if(!this._allowPassthru){a.preventDefault()}else{return}this.show()},show:function(){this._attachedDialog.show(this)},disable:function(){this._allowPassthru=true},enable:function(){this._allowPassthru=false}});dojo.declare("dojox.image.LightboxDialog",dijit.Dialog,{title:"",inGroup:null,imgUrl:dijit._Widget.prototype._blankGif,errorMessage:"Image not found.",adjust:true,_groups:{XnoGroupX:[]},errorImg:dojo.moduleUrl("dojox.image","resources/images/warning.png"),_fixSizes:false,templateString:'<div class="dojoxLightbox" dojoAttachPoint="containerNode">\n\t<div style="position:relative">\n\t\t<div dojoAttachPoint="imageContainer" class="dojoxLightboxContainer">\n\t\t\t<img dojoAttachPoint="imgNode" src="${imgUrl}" class="dojoxLightboxImage" alt="${title}">\n\t\t\t<div class="dojoxLightboxFooter" dojoAttachPoint="titleNode">\n\t\t\t\t<div class="dijitInline LightboxClose" dojoAttachPoint="closeNode"></div>\n\t\t\t\t<div class="dijitInline LightboxNext" dojoAttachPoint="nextNode"></div>\t\n\t\t\t\t<div class="dijitInline LightboxPrev" dojoAttachPoint="prevNode"></div>\n\t\t\t\t<div class="dojoxLightboxText"><span dojoAttachPoint="textNode">${title}</span><span dojoAttachPoint="groupCount" class="dojoxLightboxGroupText"></span></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n',startup:function(){this.inherited(arguments);this._animConnects=[];this._clone=dojo.clone(this.imgNode);this.connect(this.nextNode,"onclick","_nextImage");this.connect(this.prevNode,"onclick","_prevImage");this.connect(this.closeNode,"onclick","hide");this._makeAnims();this._vp=dijit.getViewport();return this},show:function(a){var b=this;if(!b.open){b.inherited(arguments);this._modalconnects.push(dojo.connect(dojo.global,"onscroll",this,"_position"),dojo.connect(dojo.global,"onresize",this,"_position"),dojo.connect(dojo.body(),"onkeypress",this,"_handleKey"))}if(this._wasStyled){dojo.destroy(b.imgNode);b.imgNode=dojo.clone(b._clone);dojo.place(b.imgNode,b.imageContainer,"first");b._makeAnims();b._wasStyled=false}dojo.style(b.imgNode,"opacity","0");dojo.style(b.titleNode,"opacity","0");b._imageReady=false;b.imgNode.src=a.href;if((a.group&&a!=="XnoGroupX")||b.inGroup){if(!b.inGroup){b.inGroup=b._groups[(a.group)];dojo.forEach(b.inGroup,function(d,c){if(d.href==a.href){b._positionIndex=c}},b)}if(!b._positionIndex){b._positionIndex=0;b.imgNode.src=b.inGroup[b._positionIndex].href}b.groupCount.innerHTML=" ("+(b._positionIndex+1)+" of "+b.inGroup.length+")";b.prevNode.style.visibility="visible";b.nextNode.style.visibility="visible"}else{b.groupCount.innerHTML="";b.prevNode.style.visibility="hidden";b.nextNode.style.visibility="hidden"}b.textNode.innerHTML=a.title;if(!b._imageReady||b.imgNode.complete===true){b._imgConnect=dojo.connect(b.imgNode,"onload",b,function(){b._imageReady=true;b.resizeTo({w:b.imgNode.width,h:b.imgNode.height,duration:b.duration});dojo.disconnect(b._imgConnect);if(b._imgError){dojo.disconnect(b._imgError)}});b._imgError=dojo.connect(b.imgNode,"onerror",b,function(){dojo.disconnect(b._imgError);b.imgNode.src=b.errorImg;b._imageReady=true;b.textNode.innerHTML=b.errorMessage});if(dojo.isIE){b.imgNode.src=b.imgNode.src}}else{b.resizeTo({w:b.imgNode.width,h:b.imgNode.height,duration:1})}},_nextImage:function(){if(!this.inGroup){return}if(this._positionIndex+1<this.inGroup.length){this._positionIndex++}else{this._positionIndex=0}this._loadImage()},_prevImage:function(){if(this.inGroup){if(this._positionIndex==0){this._positionIndex=this.inGroup.length-1}else{this._positionIndex--}this._loadImage()}},_loadImage:function(){this._loadingAnim.play(1)},_prepNodes:function(){this._imageReady=false;this.show({href:this.inGroup[this._positionIndex].href,title:this.inGroup[this._positionIndex].title})},resizeTo:function(c){var b=((dojo.boxModel=="border-box"))?22:0;if(this.adjust&&(c.h+b+80>this._vp.h||c.w+b+50>this._vp.w)){c=this._scaleToFit(c)}var a=dojox.fx.sizeTo({node:this.containerNode,duration:c.duration||this.duration,width:c.w+b,height:c.h+30+b});this.connect(a,"onEnd","_showImage");a.play(15)},_showImage:function(){this._showImageAnim.play(1)},_showNav:function(){this._showNavAnim.play(1)},hide:function(){dojo.fadeOut({node:this.titleNode,duration:200,onEnd:dojo.hitch(this,function(){this.imgNode.src=this._blankGif})}).play(5);this.inherited(arguments);this.inGroup=null;this._positionIndex=null},addImage:function(a,c){var b=c;if(!a.href){return}if(b){if(!this._groups[b]){this._groups[b]=[]}this._groups[b].push(a)}else{this._groups.XnoGroupX.push(a)}},_handleKey:function(c){if(!this.open){return}var b=dojo.keys;var a=(c.charCode==b.SPACE?b.SPACE:c.keyCode);switch(a){case b.ESCAPE:this.hide();break;case b.DOWN_ARROW:case b.RIGHT_ARROW:case 78:this._nextImage();break;case b.UP_ARROW:case b.LEFT_ARROW:case 80:this._prevImage();break}},_scaleToFit:function(a){var c={};if(this._vp.h>this._vp.w){c.w=this._vp.w-70;c.h=c.w*(a.h/a.w)}else{c.h=this._vp.h-80;c.w=c.h*(a.w/a.h)}this._wasStyled=true;var b=this.imgNode.style;b.height=c.h+"px";b.width=c.w+"px";c.duration=a.duration;return c},_position:function(a){this.inherited(arguments);this._vp=dijit.getViewport()},_makeAnims:function(){dojo.forEach(this._animConnects,dojo.disconnect);this._animConnects=[];this._showImageAnim=dojo.fadeIn({node:this.imgNode,duration:this.duration});this._animConnects.push(dojo.connect(this._showImageAnim,"onEnd",this,"_showNav"));this._loadingAnim=dojo.fx.combine([dojo.fadeOut({node:this.imgNode,duration:175}),dojo.fadeOut({node:this.titleNode,duration:175})]);this._animConnects.push(dojo.connect(this._loadingAnim,"onEnd",this,"_prepNodes"));this._showNavAnim=dojo.fadeIn({node:this.titleNode,duration:225})}})}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return a*(a-2)*-1},quadInOut:function(a){a=a*2;if(a<1){return Math.pow(a,2)/2}return -1*((--a)*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},cubicOut:function(a){return Math.pow(a-1,3)+1},cubicInOut:function(a){a=a*2;if(a<1){return Math.pow(a,3)/2}a-=2;return(Math.pow(a,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return -1*(Math.pow(a-1,4)-1)},quartInOut:function(a){a=a*2;if(a<1){return Math.pow(a,4)/2}a-=2;return -1/2*(Math.pow(a,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a=a*2;if(a<1){return Math.pow(a,5)/2}a-=2;return(Math.pow(a,5)+2)/2},sineIn:function(a){return -1*Math.cos(a*(Math.PI/2))+1},sineOut:function(a){return Math.sin(a*(Math.PI/2))},sineInOut:function(a){return -1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return(a==0)?0:Math.pow(2,10*(a-1))},expoOut:function(a){return(a==1)?1:(-1*Math.pow(2,-10*a)+1)},expoInOut:function(a){if(a==0){return 0}if(a==1){return 1}a=a*2;if(a<1){return Math.pow(2,10*(a-1))/2}--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return -1*(Math.sqrt(1-Math.pow(a,2))-1)},circOut:function(a){a=a-1;return Math.sqrt(1-Math.pow(a,2))},circInOut:function(a){a=a*2;if(a<1){return -1/2*(Math.sqrt(1-Math.pow(a,2))-1)}a-=2;return 1/2*(Math.sqrt(1-Math.pow(a,2))+1)},backIn:function(b){var a=1.70158;return Math.pow(b,2)*((a+1)*b-a)},backOut:function(b){b=b-1;var a=1.70158;return Math.pow(b,2)*((a+1)*b+a)+1},backInOut:function(b){var a=1.70158*1.525;b=b*2;if(b<1){return(Math.pow(b,2)*((a+1)*b-a))/2}b-=2;return(Math.pow(b,2)*((a+1)*b+a)+2)/2},elasticIn:function(c){if(c==0||c==1){return c}var b=0.3;var a=b/4;c=c-1;return -1*Math.pow(2,10*c)*Math.sin((c-a)*(2*Math.PI)/b)},elasticOut:function(c){if(c==0||c==1){return c}var b=0.3;var a=b/4;return Math.pow(2,-10*c)*Math.sin((c-a)*(2*Math.PI)/b)+1},elasticInOut:function(c){if(c==0){return 0}c=c*2;if(c==2){return 1}var b=0.3*1.5;var a=b/4;if(c<1){c-=1;return -0.5*(Math.pow(2,10*c)*Math.sin((c-a)*(2*Math.PI)/b))}c-=1;return 0.5*(Math.pow(2,-10*c)*Math.sin((c-a)*(2*Math.PI)/b))+1},bounceIn:function(a){return(1-dojo.fx.easing.bounceOut(1-a))},bounceOut:function(d){var b=7.5625;var c=2.75;var a;if(d<(1/c)){a=b*Math.pow(d,2)}else{if(d<(2/c)){d-=(1.5/c);a=b*Math.pow(d,2)+0.75}else{if(d<(2.5/c)){d-=(2.25/c);a=b*Math.pow(d,2)+0.9375}else{d-=(2.625/c);a=b*Math.pow(d,2)+0.984375}}}return a},bounceInOut:function(a){if(a<0.5){return dojo.fx.easing.bounceIn(a*2)/2}return(dojo.fx.easing.bounceOut(a*2-1)/2)+0.5}}}if(!dojo._hasResource["dojox.fx.easing"]){dojo._hasResource["dojox.fx.easing"]=true;dojo.provide("dojox.fx.easing");dojo.deprecated("dojox.fx.easing","Upgraded to Core, use dojo.fx.easing instead","2.0");dojox.fx.easing=dojo.fx.easing}if(!dojo._hasResource["dojox.fx._core"]){dojo._hasResource["dojox.fx._core"]=true;dojo.provide("dojox.fx._core");dojox.fx._Line=function(c,b){this.start=c;this.end=b;var a=dojo.isArray(c),f=(a?[]:b-c);if(a){dojo.forEach(this.start,function(g,d){f[d]=this.end[d]-g},this);this.getValue=function(g){var d=[];dojo.forEach(this.start,function(l,k){d[k]=(f[k]*g)+l},this);return d}}else{this.getValue=function(d){return(f*d)+this.start}}}}if(!dojo._hasResource["dojox.fx.scroll"]){dojo._hasResource["dojox.fx.scroll"]=true;dojo.provide("dojox.fx.scroll");dojo.experimental("dojox.fx.scroll");dojox.fx.smoothScroll=function(a){if(!a.target){a.target=dojo.coords(a.node,true)}var d=dojo[(dojo.isIE?"isObject":"isFunction")](a.win.scrollTo);var c=(d)?(function(f){a.win.scrollTo(f[0],f[1])}):(function(f){a.win.scrollLeft=f[0];a.win.scrollTop=f[1]});var b=new dojo._Animation(dojo.mixin({beforeBegin:function(){if(this.curve){delete this.curve}var f=d?dojo._docScroll():{x:a.win.scrollLeft,y:a.win.scrollTop};b.curve=new dojox.fx._Line([f.x,f.y],[a.target.x,a.target.y])},onAnimate:c},a));return b}}if(!dojo._hasResource["dojox.fx"]){dojo._hasResource["dojox.fx"]=true;dojo.provide("dojox.fx")}if(!dojo._hasResource["dojox.html._base"]){dojo._hasResource["dojox.html._base"]=true;dojo.provide("dojox.html._base");(function(){if(dojo.isIE){var b=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g}var g=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g;var f=dojox.html._adjustCssPaths=function(n,m){if(!m||!n){return}if(b){m=m.replace(b,function(p,s,o,q,r){return s+(new dojo._Url(n,"./"+q).toString())+r})}return m.replace(g,function(t,s,r,q,p,o){if(r){return'@import "'+(new dojo._Url(n,"./"+r).toString())+'"'+o}else{return"url("+(new dojo._Url(n,"./"+p).toString())+")"+o}})};var d=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi;var k=dojox.html._adjustHtmlPaths=function(o,m){var n=o||"./";return m.replace(d,function(q,w,v,u,t,s,p,r){return w+(v?(v+"="+u+(new dojo._Url(n,t).toString())+u):("style="+s+f(n,p)+s))+r})};var l=dojox.html._snarfStyles=function(o,m,n){n.attributes=[];return m.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(z,x,w,v,t,p){var u,A=(x||v||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(w){u=n.push(o?f(o,w):w)}else{u=n.push('@import "'+p+'";');A=A.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"")}if(A){A=A.split(/\s+/);var q={},s;for(var r=0,y=A.length;r<y;r++){s=A[r].split("=");q[s[0]]=s[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1")}n.attributes[u-1]=q}return""})};var a=dojox.html._snarfScripts=function(m,o){o.code="";function n(p){if(o.downloadRemote){dojo.xhrGet({url:p,sync:true,load:function(q){o.code+=q+";"},error:o.errBack})}}return m.replace(/<script\s*(?![^>]*type=['"]?dojo)(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(s,r,q,p){if(q){n(q)}else{o.code+=p}return""})};var c=dojox.html.evalInGlobal=function(o,m){m=m||dojo.doc.body;var p=m.ownerDocument.createElement("script");p.type="text/javascript";m.appendChild(p);p.text=o};dojo.declare("dojox.html._ContentSetter",[dojo.html._ContentSetter],{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(n){this._styleNodes=[];var u,q,m,t=this.node.ownerDocument;var r=t.getElementsByTagName("head")[0];for(var o=0,p=n.length;o<p;o++){m=n[o];q=n.attributes[o];u=t.createElement("style");u.setAttribute("type","text/css");for(var s in q){u.setAttribute(s,q[s])}this._styleNodes.push(u);r.appendChild(u);if(u.styleSheet){u.styleSheet.cssText=m}else{u.appendChild(t.createTextNode(m))}}},empty:function(){this.inherited("empty",arguments);this._styles=[]},onBegin:function(){this.inherited("onBegin",arguments);var m=this.content,p=this.node;var o=this._styles;if(dojo.isString(m)){if(this.adjustPaths&&this.referencePath){m=k(this.referencePath,m)}if(this.renderStyles||this.cleanContent){m=l(this.referencePath,m,o)}if(this.executeScripts){var q=this;var n={downloadRemote:true,errBack:function(r){q._onError.call(q,"Exec",'Error downloading remote script in "'+q.id+'"',r)}};m=a(m,n);this._code=n.code}}this.content=m},onEnd:function(){var n=this._code,m=this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop())}}if(this.renderStyles&&m&&m.length){this._renderStyles(m)}if(this.executeScripts&&n){if(this.cleanContent){n=n.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"")}if(this.scriptHasHooks){n=n.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement)}try{c(n,this.node)}catch(o){this._onError("Exec","Error eval script in "+this.id+", "+o.message,o)}}this.inherited("onEnd",arguments)},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop())}}delete this._styleNodes;dojo.mixin(this,dojo.getObject(this.declaredClass).prototype)}});dojox.html.set=function(n,m,p){if(!p){return dojo.html._setNodeContent(n,m,true)}else{var o=new dojox.html._ContentSetter(dojo.mixin(p,{content:m,node:n}));return o.set()}}})()}if(!dojo._hasResource["dojox.layout.ContentPane"]){dojo._hasResource["dojox.layout.ContentPane"]=true;dojo.provide("dojox.layout.ContentPane");(function(){dojo.declare("dojox.layout.ContentPane",dijit.layout.ContentPane,{adjustPaths:false,cleanContent:false,renderStyles:false,executeScripts:true,scriptHasHooks:false,constructor:function(){this.ioArgs={};this.ioMethod=dojo.xhrGet;this.onLoadDeferred=new dojo.Deferred();this.onUnloadDeferred=new dojo.Deferred()},postCreate:function(){this._setUpDeferreds();dijit.layout.ContentPane.prototype.postCreate.apply(this,arguments)},onExecError:function(a){},_setContentAttr:function(b){var a=this._setUpDeferreds();this.inherited(arguments);return a},cancel:function(){if(this._xhrDfd&&this._xhrDfd.fired==-1){this.onUnloadDeferred=null}dijit.layout.ContentPane.prototype.cancel.apply(this,arguments)},_setUpDeferreds:function(){var b=this,d=function(){b.cancel()};var c=(b.onLoadDeferred=new dojo.Deferred());var a=(b._nextUnloadDeferred=new dojo.Deferred());return{cancel:d,addOnLoad:function(f){c.addCallback(f)},addOnUnload:function(f){a.addCallback(f)}}},_onLoadHandler:function(){dijit.layout.ContentPane.prototype._onLoadHandler.apply(this,arguments);if(this.onLoadDeferred){this.onLoadDeferred.callback(true)}},_onUnloadHandler:function(){this.isLoaded=false;this.cancel();if(this.onUnloadDeferred){this.onUnloadDeferred.callback(true)}dijit.layout.ContentPane.prototype._onUnloadHandler.apply(this,arguments);if(this._nextUnloadDeferred){this.onUnloadDeferred=this._nextUnloadDeferred}},_onError:function(a,b){dijit.layout.ContentPane.prototype._onError.apply(this,arguments);if(this.onLoadDeferred){this.onLoadDeferred.errback(b)}},refresh:function(){var a=this._setUpDeferreds();this.inherited(arguments);return a},_setContent:function(a){var b=this._contentSetter;if(!(b&&b instanceof dojox.html._ContentSetter)){b=this._contentSetter=new dojox.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(d){var c=this.onContentError(d);try{this.containerNode.innerHTML=c}catch(d){console.error("Fatal "+this.id+" could not change content due to "+d.message,d)}})})}this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};this.inherited("_setContent",arguments)}})})()}if(!dojo._hasResource["dojox.layout.ResizeHandle"]){dojo._hasResource["dojox.layout.ResizeHandle"]=true;dojo.provide("dojox.layout.ResizeHandle");dojo.experimental("dojox.layout.ResizeHandle");dojo.declare("dojox.layout.ResizeHandle",[dijit._Widget,dijit._Templated],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,templateString:'<div dojoAttachPoint="resizeHandle" class="dojoxResizeHandle"><div></div></div>',postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=dijit.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new dojox.layout._ResizeHelper({id:"dojoxGlobalResizeHelper"}).placeAt(dojo.body());dojo.addClass(this._resizeHelper.domNode,this.activeResizeClass)}}else{this.animateSizing=false}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight}}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight}}this._resizeX=this._resizeY=false;var a=dojo.partial(dojo.addClass,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case"xy":this._resizeX=this._resizeY=true;a("dojoxResizeNW");break;case"x":this._resizeX=true;a("dojoxResizeW");break;case"y":this._resizeY=true;a("dojoxResizeN");break}},_beginSizing:function(b){if(this._isSizing){return false}this.targetWidget=dijit.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:dojo.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer}if(!this.targetDomNode){return false}if(!this.activeResize){var g=dojo.coords(this.targetDomNode,true);this._resizeHelper.resize({l:g.x,t:g.y,w:g.w,h:g.h});this._resizeHelper.show()}this._isSizing=true;this.startPoint={x:b.clientX,y:b.clientY};var f=this.targetWidget?dojo.marginBox(this.targetDomNode):dojo.contentBox(this.targetDomNode);this.startSize={w:f.w,h:f.h};if(this.fixedAspect){var a,d;if(f.w>f.h){a="w";d=f.w/f.h}else{a="h";d=f.h/f.w}this._aspect={prop:a};this._aspect[a]=d}this._pconnects=[];this._pconnects.push(dojo.connect(dojo.doc,"onmousemove",this,"_updateSizing"));this._pconnects.push(dojo.connect(dojo.doc,"onmouseup",this,"_endSizing"));dojo.stopEvent(b)},_updateSizing:function(b){if(this.activeResize){this._changeSizing(b)}else{var a=this._getNewCoords(b);if(a===false){return}this._resizeHelper.resize(a)}b.preventDefault()},_getNewCoords:function(d){try{if(!d.clientX||!d.clientY){return false}}catch(d){return false}this._activeResizeLastEvent=d;var b=this.startPoint.x-d.clientX,a=this.startPoint.y-d.clientY,f=this.startSize.w-(this._resizeX?b:0),c=this.startSize.h-(this._resizeY?a:0);return this._checkConstraints(f,c)},_checkConstraints:function(f,d){if(this.minSize){var a=this.minSize;if(f<a.w){f=a.w}if(d<a.h){d=a.h}}if(this.constrainMax&&this.maxSize){var c=this.maxSize;if(f>c.w){f=c.w}if(d>c.h){d=c.h}}if(this.fixedAspect){var b=this._aspect[this._aspect.prop];if(f<d){d=f*b}else{if(d<f){f=d*b}}}return{w:f,h:d}},_changeSizing:function(c){var a=this._getNewCoords(c);if(a===false){return}if(this.targetWidget&&dojo.isFunction(this.targetWidget.resize)){this.targetWidget.resize(a)}else{if(this.animateSizing){var b=dojo.fx[this.animateMethod]([dojo.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:a.w,unit:"px"}},duration:this.animateDuration}),dojo.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:a.h,unit:"px"}},duration:this.animateDuration})]);b.play()}else{dojo.style(this.targetDomNode,{width:a.w+"px",height:a.h+"px"})}}if(this.intermediateChanges){this.onResize(c)}},_endSizing:function(a){dojo.forEach(this._pconnects,dojo.disconnect);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(a)}this._isSizing=false;this.onResize(a)},onResize:function(a){}});dojo.declare("dojox.layout._ResizeHelper",dijit._Widget,{show:function(){dojo.fadeIn({node:this.domNode,duration:120,beforeBegin:dojo.partial(dojo.style,this.domNode,"display","")}).play()},hide:function(){dojo.fadeOut({node:this.domNode,duration:250,onEnd:dojo.partial(dojo.style,this.domNode,"display","none")}).play()},resize:function(a){dojo.marginBox(this.domNode,a)}})}if(!dojo._hasResource["dojox.layout.FloatingPane"]){dojo._hasResource["dojox.layout.FloatingPane"]=true;dojo.provide("dojox.layout.FloatingPane");dojo.experimental("dojox.layout.FloatingPane");dojo.declare("dojox.layout.FloatingPane",[dojox.layout.ContentPane,dijit._Templated],{closable:true,dockable:true,resizable:false,maxable:false,resizeAxis:"xy",title:"",dockTo:"",duration:400,contentClass:"dojoxFloatingPaneContent",_showAnim:null,_hideAnim:null,_dockNode:null,_restoreState:{},_allFPs:[],_startZ:100,templateString:null,templateString:'<div class="dojoxFloatingPane" id="${id}">\n\t<div tabindex="0" waiRole="button" class="dojoxFloatingPaneTitle" dojoAttachPoint="focusNode">\n\t\t<span dojoAttachPoint="closeNode" dojoAttachEvent="onclick: close" class="dojoxFloatingCloseIcon"></span>\n\t\t<span dojoAttachPoint="maxNode" dojoAttachEvent="onclick: maximize" class="dojoxFloatingMaximizeIcon">&thinsp;</span>\n\t\t<span dojoAttachPoint="restoreNode" dojoAttachEvent="onclick: _restore" class="dojoxFloatingRestoreIcon">&thinsp;</span>\t\n\t\t<span dojoAttachPoint="dockNode" dojoAttachEvent="onclick: minimize" class="dojoxFloatingMinimizeIcon">&thinsp;</span>\n\t\t<span dojoAttachPoint="titleNode" class="dijitInline dijitTitleNode"></span>\n\t</div>\n\t<div dojoAttachPoint="canvas" class="dojoxFloatingPaneCanvas">\n\t\t<div dojoAttachPoint="containerNode" waiRole="region" tabindex="-1" class="${contentClass}">\n\t\t</div>\n\t\t<span dojoAttachPoint="resizeHandle" class="dojoxFloatingResizeHandle"></span>\n\t</div>\n</div>\n',postCreate:function(){this.setTitle(this.title);this.inherited(arguments);var a=new dojo.dnd.Moveable(this.domNode,{handle:this.focusNode});if(!this.dockable){this.dockNode.style.display="none"}if(!this.closable){this.closeNode.style.display="none"}if(!this.maxable){this.maxNode.style.display="none";this.restoreNode.style.display="none"}if(!this.resizable){this.resizeHandle.style.display="none"}else{var b=dojo.marginBox(this.domNode);this.domNode.style.width=b.w+"px"}this._allFPs.push(this);this.domNode.style.position="absolute";this.bgIframe=new dijit.BackgroundIframe(this.domNode)},startup:function(){if(this._started){return}this.inherited(arguments);if(this.resizable){if(dojo.isIE){this.canvas.style.overflow="auto"}else{this.containerNode.style.overflow="auto"}this._resizeHandle=new dojox.layout.ResizeHandle({targetId:this.id,resizeAxis:this.resizeAxis},this.resizeHandle)}if(this.dockable){var c=this.dockTo;if(this.dockTo){this.dockTo=dijit.byId(this.dockTo)}else{this.dockTo=dijit.byId("dojoxGlobalFloatingDock")}if(!this.dockTo){var b;var a;if(c){b=c;a=dojo.byId(c)}else{a=document.createElement("div");dojo.body().appendChild(a);dojo.addClass(a,"dojoxFloatingDockDefault");b="dojoxGlobalFloatingDock"}this.dockTo=new dojox.layout.Dock({id:b,autoPosition:"south"},a);this.dockTo.startup()}if((this.domNode.style.display=="none")||(this.domNode.style.visibility=="hidden")){this.minimize()}}this.connect(this.focusNode,"onmousedown","bringToTop");this.connect(this.domNode,"onmousedown","bringToTop");this.resize(dojo.coords(this.domNode));this._started=true},setTitle:function(a){this.titleNode.innerHTML=a;this.title=a},close:function(){if(!this.closable){return}dojo.unsubscribe(this._listener);this.hide(dojo.hitch(this,function(){this.destroyRecursive()}))},hide:function(a){dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";this.domNode.style.visibility="hidden";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null)}if(a){a()}})}).play()},show:function(a){var b=dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){this.domNode.style.display="";this.domNode.style.visibility="visible";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null)}if(typeof a=="function"){a()}this._isDocked=false;if(this._dockNode){this._dockNode.destroy();this._dockNode=null}})}).play();this.resize(dojo.coords(this.domNode))},minimize:function(){if(!this._isDocked){this.hide(dojo.hitch(this,"_dock"))}},maximize:function(){if(this._maximized){return}this._naturalState=dojo.coords(this.domNode);if(this._isDocked){this.show();setTimeout(dojo.hitch(this,"maximize"),this.duration)}dojo.addClass(this.focusNode,"floatingPaneMaximized");this.resize(dijit.getViewport());this._maximized=true},_restore:function(){if(this._maximized){this.resize(this._naturalState);dojo.removeClass(this.focusNode,"floatingPaneMaximized");this._maximized=false}},_dock:function(){if(!this._isDocked&&this.dockable){this._dockNode=this.dockTo.addNode(this);this._isDocked=true}},resize:function(c){this._currentState=c;var a=this.domNode.style;if(c.t){a.top=c.t+"px"}if(c.l){a.left=c.l+"px"}a.width=c.w+"px";a.height=c.h+"px";var b={l:0,t:0,w:c.w,h:(c.h-this.focusNode.offsetHeight)};dojo.marginBox(this.canvas,b);this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(b)}},bringToTop:function(){var a=dojo.filter(this._allFPs,function(b){return b!==this},this);a.sort(function(d,c){return d.domNode.style.zIndex-c.domNode.style.zIndex});a.push(this);dojo.forEach(a,function(c,b){c.domNode.style.zIndex=this._startZ+(b*2);dojo.removeClass(c.domNode,"dojoxFloatingPaneFg")},this);dojo.addClass(this.domNode,"dojoxFloatingPaneFg")},destroy:function(){this._allFPs.splice(dojo.indexOf(this._allFPs,this),1);if(this._resizeHandle){this._resizeHandle.destroy()}this.inherited(arguments)}});dojo.declare("dojox.layout.Dock",[dijit._Widget,dijit._Templated],{templateString:'<div class="dojoxDock"><ul dojoAttachPoint="containerNode" class="dojoxDockList"></ul></div>',_docked:[],_inPositioning:false,autoPosition:false,addNode:function(a){var c=document.createElement("li");this.containerNode.appendChild(c);var b=new dojox.layout._DockNode({title:a.title,paneRef:a},c);b.startup();return b},startup:function(){if(this.id=="dojoxGlobalFloatingDock"||this.isFixedDock){dojo.connect(window,"onresize",this,"_positionDock");dojo.connect(window,"onscroll",this,"_positionDock");if(dojo.isIE){this.connect(this.domNode,"onresize","_positionDock")}}this._positionDock(null);this.inherited(arguments)},_positionDock:function(a){if(!this._inPositioning){if(this.autoPosition=="south"){setTimeout(dojo.hitch(this,function(){this._inPositiononing=true;var c=dijit.getViewport();var b=this.domNode.style;b.left=c.l+"px";b.width=(c.w-2)+"px";b.top=(c.h+c.t)-this.domNode.offsetHeight+"px";this._inPositioning=false}),125)}}}});dojo.declare("dojox.layout._DockNode",[dijit._Widget,dijit._Templated],{title:"",paneRef:null,templateString:'<li dojoAttachEvent="onclick: restore" class="dojoxDockNode"><span dojoAttachPoint="restoreNode" class="dojoxDockRestoreButton" dojoAttachEvent="onclick: restore"></span><span class="dojoxDockTitleNode" dojoAttachPoint="titleNode">${title}</span></li>',restore:function(){this.paneRef.show();this.paneRef.bringToTop();this.destroy()}})}if(!dojo._hasResource["dojox.layout.ScrollPane"]){dojo._hasResource["dojox.layout.ScrollPane"]=true;dojo.provide("dojox.layout.ScrollPane");dojo.experimental("dojox.layout.ScrollPane");dojo.declare("dojox.layout.ScrollPane",[dijit.layout.ContentPane,dijit._Templated],{_line:null,_lo:null,_offset:15,orientation:"vertical",autoHide:true,templateString:'<div class="dojoxScrollWindow" dojoAttachEvent="onmouseenter: _enter, onmouseleave: _leave">\n    <div class="dojoxScrollWrapper" style="${style}" dojoAttachPoint="wrapper" dojoAttachEvent="onmousemove: _calc">\n\t<div class="dojoxScrollPane" dojoAttachPoint="containerNode"></div>\n    </div>\n    <div dojoAttachPoint="helper" class="dojoxScrollHelper"><span class="helperInner">|</span></div>\n</div>\n',resize:function(f){if(f){if(f.h){dojo.style(this.domNode,"height",f.h+"px")}if(f.w){dojo.style(this.domNode,"width",f.w+"px")}}var d=this._dir,a=this._vertical,l=this.containerNode[(a?"scrollHeight":"scrollWidth")];dojo.style(this.wrapper,this._dir,this.domNode.style[this._dir]);this._lo=dojo.coords(this.wrapper,true);this._size=Math.max(0,l-this._lo[(a?"h":"w")]);if(!this._size){this.helper.style.display="none";this.wrapper[this._scroll]=0;return}else{this.helper.style.display=""}this._line=new dojo._Line(0-this._offset,this._size+(this._offset*2));var b=this._lo[(a?"h":"w")],k=Math.min(1,b/l),g=b*k,m=Math.floor(b-(b*k));this._helpLine=new dojo._Line(0,m);dojo.style(this.helper,d,Math.floor(g)+"px")},postCreate:function(){this.inherited(arguments);if(this.autoHide){this._showAnim=dojo._fade({node:this.helper,end:0.5,duration:350});this._hideAnim=dojo.fadeOut({node:this.helper,duration:750})}this._vertical=(this.orientation=="vertical");if(!this._vertical){dojo.addClass(this.containerNode,"dijitInline");this._dir="width";this._edge="left";this._scroll="scrollLeft"}else{this._dir="height";this._edge="top";this._scroll="scrollTop"}if(this._hideAnim){this._hideAnim.play()}dojo.style(this.wrapper,"overflow","hidden")},_set:function(a){if(!this._size){return}this.wrapper[this._scroll]=Math.floor(this._line.getValue(a));dojo.style(this.helper,this._edge,Math.floor(this._helpLine.getValue(a))+"px")},_calc:function(a){if(!this._lo){this.resize()}this._set(this._vertical?((a.pageY-this._lo.y)/this._lo.h):((a.pageX-this._lo.x)/this._lo.w))},_enter:function(a){if(this._hideAnim){if(this._hideAnim.status()=="playing"){this._hideAnim.stop()}this._showAnim.play()}},_leave:function(a){if(this._hideAnim){this._hideAnim.play()}}})}if(!dojo._hasResource["dojox.embed.Flash"]){dojo._hasResource["dojox.embed.Flash"]=true;dojo.provide("dojox.embed.Flash");(function(){var _765,_766;var _767=9;var _768="dojox-embed-flash-",_769=0;var _76a={expressInstall:false,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};function prep(_76c){_76c=dojo.delegate(_76a,_76c);if(!("path" in _76c)){console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided.");return null}if(!("id" in _76c)){_76c.id=(_768+_769++)}return _76c}if(dojo.isIE){_765=function(_76d){_76d=prep(_76d);if(!_76d){return null}var p;var path=_76d.path;if(_76d.vars){var a=[];for(p in _76d.vars){a.push(p+"="+_76d.vars[p])}path+=((path.indexOf("?")==-1)?"?":"&")+a.join("&")}var s='<object id="'+_76d.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+_76d.width+'" height="'+_76d.height+'"'+((_76d.style)?' style="'+_76d.style+'"':"")+'><param name="movie" value="'+path+'" />';if(_76d.params){for(p in _76d.params){s+='<param name="'+p+'" value="'+_76d.params[p]+'" />'}}s+="</object>";return{id:_76d.id,markup:s}};_766=(function(){var _772=10,_773=null;while(!_773&&_772>7){try{_773=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_772--)}catch(e){}}if(_773){var v=_773.GetVariable("$version").split(" ")[1].split(",");return{major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0}}return{major:0,minor:0,rev:0}})();dojo.addOnUnload(function(){var _776=function(){};var objs=dojo.query("object").reverse().style("display","none").forEach(function(i){for(var p in i){if((p!="FlashVars")&&dojo.isFunction(i[p])){try{i[p]=_776}catch(e){}}}})})}else{_765=function(_77a){_77a=prep(_77a);if(!_77a){return null}var p;var path=_77a.path;if(_77a.vars){var a=[];for(p in _77a.vars){a.push(p+"="+_77a.vars[p])}path+=((path.indexOf("?")==-1)?"?":"&")+a.join("&")}var s='<embed type="application/x-shockwave-flash" src="'+path+'" id="'+_77a.id+'" width="'+_77a.width+'" height="'+_77a.height+'"'+((_77a.style)?' style="'+_77a.style+'" ':"")+'swLiveConnect="'+_77a.swLiveConnect+'" allowScriptAccess="'+_77a.allowScriptAccess+'" allowNetworking="'+_77a.allowNetworking+'" pluginspage="'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(_77a.params){for(p in _77a.params){s+=" "+p+'="'+_77a.params[p]+'"'}}s+=" />";return{id:_77a.id,markup:s}};_766=(function(){var _77f=navigator.plugins["Shockwave Flash"];if(_77f&&_77f.description){var v=_77f.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return{major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0}}return{major:0,minor:0,rev:0}})()}dojox.embed.Flash=function(_781,node){if(location.href.toLowerCase().indexOf("file://")>-1){throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.")}this.available=dojox.embed.Flash.available;this.minimumVersion=_781.minimumVersion||_767;this.id=null;this.movie=null;this.domNode=null;if(node){node=dojo.byId(node)}setTimeout(dojo.hitch(this,function(){if(this.available&&this.available>=this.minimumVersion){if(_781&&node){this.init(_781,node)}}else{if(!this.available){this.onError("Flash is not installed.")}else{this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion)}}}),100)};dojo.extend(dojox.embed.Flash,{onReady:function(_783){},onLoad:function(_784){},onError:function(msg){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(_786,node){this.destroy();node=dojo.byId(node||this.domNode);if(!node){throw new Error("dojox.embed.Flash: no domNode reference has been passed.")}var p=0,_789=false;this._poller=null;this._pollCount=0;this._pollMax=5;this.pollTime=100;if(dojox.embed.Flash.initialized){this.id=dojox.embed.Flash.place(_786,node);this.domNode=node;setTimeout(dojo.hitch(this,function(){this.movie=this.byId(this.id,_786.doc);this.onReady(this.movie);this._poller=setInterval(dojo.hitch(this,function(){try{p=this.movie.PercentLoaded()}catch(e){console.warn("this.movie.PercentLoaded() failed")}if(p==100){this._onload()}else{if(p==0&&this._pollCount++>this._pollMax){clearInterval(this._poller);throw new Error("Building SWF failed.")}}}),this.pollTime)}),1)}},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(e){}this.id=this.movie=this.domNode=null},destroy:function(){if(!this.movie){return}var test=dojo.delegate({id:true,movie:true,domNode:true,onReady:true,onLoad:true});for(var p in this){if(!test[p]){delete this[p]}}if(this._poller){dojo.connect(this,"onLoad",this,"_destroy")}else{this._destroy()}},byId:function(_78c,doc){doc=doc||document;if(doc.embeds[_78c]){return doc.embeds[_78c]}if(doc[_78c]){return doc[_78c]}if(window[_78c]){return window[_78c]}if(document[_78c]){return document[_78c]}return null}});dojo.mixin(dojox.embed.Flash,{minSupported:8,available:_766.major,supported:(_766.major>=_766.required),minimumRequired:_766.required,version:_766,initialized:false,onInitialize:function(){dojox.embed.Flash.initialized=true},__ie_markup__:function(_78e){return _765(_78e)},proxy:function(obj,_790){dojo.forEach((dojo.isArray(_790)?_790:[_790]),function(item){this[item]=dojo.hitch(this,function(){return(function(){return eval(this.movie.CallFunction('<invoke name="'+item+'" returntype="javascript"><arguments>'+dojo.map(arguments,function(item){return __flash__toXML(item)}).join("")+"</arguments></invoke>"))}).apply(this,arguments||[])})},obj)}});if(dojo.isIE){if(dojo._initFired){var e=document.createElement("script");e.type="text/javascript";e.src=dojo.moduleUrl("dojox","embed/IE/flash.js");document.getElementsByTagName("head")[0].appendChild(e)}else{document.write('<script type="text/javascript" src="'+dojo.moduleUrl("dojox","embed/IE/flash.js")+'"><\/script>')}}else{dojox.embed.Flash.place=function(_793,node){var o=_765(_793);node=dojo.byId(node);if(!node){node=dojo.doc.createElement("div");node.id=o.id+"-container";dojo.body().appendChild(node)}if(o){node.innerHTML=o.markup;return o.id}return null};dojox.embed.Flash.onInitialize()}})()}if(!dojo._hasResource["dojox.json.ref"]){dojo._hasResource["dojox.json.ref"]=true;dojo.provide("dojox.json.ref");dojox.json.ref={resolveJson:function(k,g){g=g||{};var o=g.idAttribute||"id";var m=g.idPrefix||"";var c=g.assignAbsoluteIds;var b=g.index||{};var a=g.timeStamps;var d,q=[];var n=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/;var f=this._addProp;var p=function(){};function l(C,E,x,u,s){var H,A,w=o in C?C[o]:x;if(w!==undefined){w=(m+w).replace(n,"$2$3")}var y=s||C;if(w!==undefined){if(c){C.__id=w}if(g.schemas&&(!(C instanceof Array))&&(A=w.match(/^(.+\/)[^\.\[]*$/))){u=g.schemas[A[1]]}if(b[w]&&((C instanceof Array)==(b[w] instanceof Array))){y=b[w];delete y.$ref;H=true}else{var v=u&&u.prototype;if(v){p.prototype=v;y=new p()}}b[w]=y;if(a){a[w]=g.time}}var t=u&&u.properties;var r=C.length;for(var B in C){if(B==r){break}if(C.hasOwnProperty(B)){A=C[B];var G=t&&t[B];if(G&&G.format=="date-time"&&typeof A=="string"){A=dojo.date.stamp.fromISOString(A)}else{if((typeof A=="object")&&A&&!(A instanceof Date)){d=A.$ref;if(d){delete C[B];var F=d.replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/);if((d=(F[1]=="$"||F[1]=="this"||F[1]=="")?k:b[(m+F[1]).replace(n,"$2$3")])){if(F[3]){F[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(K,J,I,M,L){d=d&&d[I?I.replace(/[\"\'\\]/,""):L]})}}if(d){A=d}else{if(!E){var D;if(!D){q.push(y)}D=true}else{A=l(A,false,A.$ref,G);A._loadObject=g.loader}}}else{if(!E){A=l(A,q==C,w&&f(w,B),G,y!=C&&typeof y[B]=="object"&&y[B])}}}}C[B]=A;if(y!=C&&!y.__isDirty){var z=y[B];y[B]=A;if(H&&A!==z&&!y._loadObject&&!(A instanceof Date&&z instanceof Date&&A.getTime()==z.getTime())&&!(typeof A=="function"&&typeof z=="function"&&A.toString()==z.toString())&&b.onUpdate){b.onUpdate(y,B,z,A)}}}}if(H){for(B in y){if(!y.__isDirty&&y.hasOwnProperty(B)&&!C.hasOwnProperty(B)&&B!="__id"&&B!="__clientId"&&!(y instanceof Array&&isNaN(B))){if(b.onUpdate&&B!="_loadObject"&&B!="_idAttr"){b.onUpdate(y,B,y[B],undefined)}delete y[B];while(y instanceof Array&&y.length&&y[y.length-1]===undefined){y.length--}}}}else{if(b.onLoad){b.onLoad(y)}}return y}if(k&&typeof k=="object"){k=l(k,false,g.defaultId);l(q,false)}return k},fromJson:function(str,args){function ref(_7bc){return{$ref:_7bc}}try{var root=eval("("+str+")")}catch(e){throw new SyntaxError("Invalid JSON string: "+e.message+" parsing: "+str)}if(root){return this.resolveJson(root,args)}return root},toJson:function(c,n,m,l){var k=this._useRefs;var g=this._addProp;m=m||"";var f={};var d={};function a(y,C,u){if(typeof y=="object"&&y){var z;if(y instanceof Date){return'"'+dojo.date.stamp.toISOString(y,{zulu:true})+'"'}var r=y.__id;if(r){if(C!="#"&&((k&&!r.match(/#/))||f[r])){var t=r;if(r.charAt(0)!="#"){if(y.__clientId==r){t="cid:"+r}else{if(r.substring(0,m.length)==m){t=r.substring(m.length)}else{t=r}}}return a({$ref:t},"#")}C=r}else{y.__id=C;d[C]=y}f[C]=y;u=u||"";var w=n?u+dojo.toJsonIndentStr:"";var v=n?"\n":"";var B=n?" ":"";if(y instanceof Array){var A=dojo.map(y,function(E,D){var F=a(E,g(C,D),w);if(typeof F!="string"){F="undefined"}return v+w+F});return"["+A.join(","+B)+v+u+"]"}var q=[];for(var x in y){if(y.hasOwnProperty(x)){var p;if(typeof x=="number"){p='"'+x+'"'}else{if(typeof x=="string"&&(x.charAt(0)!="_"||x.charAt(1)!="_")){p=dojo._escapeString(x)}else{continue}}var s=a(y[x],g(C,x),w);if(typeof s!="string"){continue}q.push(v+w+p+":"+B+s)}}return"{"+q.join(","+B)+v+u+"}"}else{if(typeof y=="function"&&dojox.json.ref.serializeFunctions){return y.toString()}}return dojo.toJson(y)}var o=a(c,"#","");if(!l){for(var b in d){delete d[b].__id}}return o},_addProp:function(b,a){return b+(b.match(/#/)?b.length==1?"":".":"#")+a},_useRefs:false,serializeFunctions:false}}if(!dojo._hasResource["dojo_widgets.layout.DynamicDialog"]){dojo._hasResource["dojo_widgets.layout.DynamicDialog"]=true;dojo.provide("dojo_widgets.layout.DynamicDialog");dojo.experimental("dojo_widgets.layout.DynamicDialog");dojo.declare("dojo_widgets.layout.DynamicDialog",[dijit._Widget,dijit._Templated],{widgetID:null,theId:null,title:null,theDialog:null,contentHref:null,button:null,loaded:false,templatePath:"/js/dojo/dojo_widgets/layout/resources/DynamicDialog.html",postCreate:function(){this.inherited(arguments);this.widgetID=this.id;this.theDialog=new dijit.Dialog({id:this.theId,title:this.title}),this.DojoBannerCanvas},startup:function(){this.inherited(arguments)},init:function(){var a=this.theDialog;dojo.xhrGet({url:this.contentHref,handle:function(c,b){if(typeof c=="error"){console.warn("error!",b)}else{a.setContent(c);dojo.parser.parse(a);this.loaded=true}}});return true},showBanner:function(a){this.theDialog.href=this.contentHref;this.theDialog.show()},hideBanner:function(a){alert("shnay")}})}if(!dojo._hasResource["dojo_widgets.banners.BannerPicker"]){dojo._hasResource["dojo_widgets.banners.BannerPicker"]=true;dojo.provide("dojo_widgets.banners.BannerPicker");dojo.experimental("dojo_widgets.banners.BannerPicker");dojo.declare("dojo_widgets.banners.BannerPicker",[dojo_widgets.layout.DynamicDialog],{bannerId:156,bannerSrc:"/images/Banners/tattoojohnny/120x90findmytattoo.jpg",selectedType:"Homepage",isText:false,templatePath:"/js/dojo/dojo_widgets/banners/resources/BannerPicker.html",formProp:null,postCreate:function(){this.inherited(arguments);if(dojo.byId("AffiliateLinks")){this.formProp="AffiliateLinks"}if(dojo.byId("ResourceBanners")){this.formProp="ResourceBanners"}if(dojo.byId("affiliate_link_description").value!=""){dojo.byId("affiliate_link_text").value=dojo.byId("affiliate_link_description").value;dojo.byId("affiliate_link_preview").innerHTML=dojo.byId("affiliate_link_description").value}dojo.connect(this.theDialog,"onLoad",this,"linkBanners");dojo.connect(dojo.byId("affiliate_link_destination"),"onchange",this,"doSelect");dojo.connect(dojo.byId("affiliate_link_keyword"),"onblur",this,"createHTML");dojo.connect(dojo.byId("AffiliateLinks"),"onsubmit",this,"checkHTML");dojo.connect(dojo.byId("affiliate_preview"),"onclick",this,"doPreview");this.theDialog.href=this.contentHref},startup:function(){(document.forms[this.formProp].elements.fk_banner_id.value>0)?(this.bannerId=dojo.byId("fk_banner_id").value):null;(document.forms[this.formProp].elements.fk_banner_url.value.length>0)?(this.bannerSrc=dojo.byId("fk_banner_url").value):null;(document.forms[this.formProp].elements.fk_banner_id.value<0)?(this.isText=true):null;this.selectedType=dojo.byId("affiliate_link_destination").value;this.inherited(arguments);if(this.isText){this.assignText()}if(dojo.byId("affiliate_link_text").innerHTML==""){this.doSelect()}},linkBanners:function(){var a=this;dojo.query(".linkbanner").forEach(function(c,b){dojo.connect(c,"onclick",a,"assignId")})},assignId:function(a){if(dojo.style("affiliate_text","display")!="none"){toggleDiv("affiliate_text")}dojo.byId("affiliate_link_description").value="";this.bannerId=a.target.id.replace("banner_","");this.bannerSrc=a.target.getAttribute("src");this.theDialog.hide();this.createHTML()},assignText:function(a){this.theDialog.hide();document.forms[this.formProp].elements.affiliate_link_description.value="";toggleDiv("affiliate_text");if(dojo.style("banner_preview","display")=="none"){toggleDiv("banner_preview","null")}},applyText:function(a){this.bannerId=-1;document.forms[this.formProp].elements.fk_banner_id.value=-1;this.bannerSrc="";this.createHTMLText();if(dojo.style("banner_preview","display")=="none"){toggleDiv("banner_preview","null")}},checkHTML:function(){dojo.style("banner_preview","opacity",0);dojo.style("banner_preview","display","block");if(document.forms[this.formProp].elements.fk_banner_id.value<1){this.createHTMLText()}else{this.createHTML()}},createHTML:function(){var a='<a href="'+this.buildURL()+'" border="0" target="_new"><img src="'+this.bannerSrc+'" border="0" alt="'+this.buildAlt()+'"></a>';dojo.byId("affiliate_link_text").value=a;dojo.byId("affiliate_link_preview").innerHTML=a;dojo.byId("fk_banner_id").value=this.bannerId;dojo.byId("fk_banner_url").value=this.bannerSrc},createHTMLText:function(){var a='<a href="'+this.buildURL()+'" border="0" target="_new">'+dojo.byId("affiliate_link_description").value+"</a>";dojo.byId("affiliate_link_text").value=a;dojo.byId("affiliate_link_preview").innerHTML=a},buildURL:function(){var a=new Array();a.Homepage="http://www.tattoojohnny.com/";a["Most Popular"]="http://www.tattoojohnny.com/search";a["Keyword Search"]="http://www.tattoojohnny.com/search/"+dojo.byId("affiliate_link_keyword").value;dojo.byId("affiliate_link_destination_url").value=a[this.selectedType];var b="http://www.tattoojohnny.com/tattoo_designs/tattoos";if(this.selectedType=="Keyword Search"){b=b+"/"+dojo.byId("affiliate_link_keyword").value}return b},buildAlt:function(){var c;var b=new Array("Tattoos","Tattoo Designs","Tattoo Design Gallery","Downloadable Tattoos","Downloadable Tattoo Designs");var a=Math.round((b.length-1)*Math.random());switch(this.selectedType){case"Homepage":c=b[a];break;case"Most Popular":c=b[a];break;case"Keyword Search":c=dojo.byId("affiliate_link_keyword").value+" "+b[a];break}return c},doSelect:function(){this.selectedType=dojo.byId("affiliate_link_destination").value;if(((this.selectedType=="Keyword Search")&&(dojo.byId("affiliate_keyword").style.display!="block"))||((this.selectedType!="Keyword Search")&&(dojo.byId("affiliate_keyword").style.display=="block"))){toggleDiv("affiliate_keyword");(dojo.byId("vreqaffiliate_link_keyword").innerHTML=="TRUE")?dojo.byId("vreqaffiliate_link_keyword").innerHTML="FALSE":dojo.byId("vreqaffiliate_link_keyword").innerHTML="TRUE"}this.createHTML()},doPreview:function(b){dojo.stopEvent(b);var a=dojo.fadeIn({node:"banner_preview"});dojo.connect(a,"beforeBegin",function(){dojo.style("banner_preview","opacity",0);dojo.style("banner_preview","display","block")});a.play()}})}if(!dojo._hasResource["dojo_widgets.banners.ResourceUpload"]){dojo._hasResource["dojo_widgets.banners.ResourceUpload"]=true;dojo.provide("dojo_widgets.banners.ResourceUpload");dojo.experimental("dojo_widgets.banners.ResourceUpload");dojo.declare("dojo_widgets.banners.ResourceUpload",[dijit._Widget],{postCreate:function(){this.inherited(arguments);dojo.connect(dojo.byId("resource_banner_style_0"),"onclick",this,"showURL");dojo.connect(dojo.byId("resource_banner_style_1"),"onclick",this,"showFile");dojo.connect(dojo.byId("resource_banner_style_2"),"onclick",this,"showHTML")},startup:function(){},showURL:function(){this.doHide("banner_file");this.doHide("banner_html");this.doShow("banner_url")},showHTML:function(){this.doHide("banner_file");this.doHide("banner_url");this.doShow("banner_html")},showFile:function(){this.doHide("banner_url");this.doHide("banner_html");this.doShow("banner_file")},doShow:function(b){var a=dojo.fadeIn({node:b});dojo.connect(a,"beforeBegin",function(){dojo.style(b,"opacity",0);dojo.style(b,"display","block")});a.play()},doHide:function(a){var b=dojo.fadeOut({node:a});dojo.connect(b,"onEnd",function(){dojo.style(a,"opacity",0);dojo.style(a,"display","none")});b.play()}})}if(!dojo._hasResource["dojo_widgets.checkout.Cart"]){dojo._hasResource["dojo_widgets.checkout.Cart"]=true;dojo.provide("dojo_widgets.checkout.Cart");dojo.experimental("dojo_widgets.checkout.Cart");dojo.declare("dojo_widgets.checkout.Cart",[dijit._Widget,dijit._Templated],{widgetID:null,theId:null,title:null,theDialog:null,content:null,showing:true,loaded:false,form:null,shipping_reqs:null,templateString:'<div dojoAttachPoint="CartContainer"><div dojoAttachPoint="CartDialogContainer"></div></div>',postCreate:function(){this.inherited(arguments);if(dojo.byId("Cart")){dojo.connect(dojo.byId("Cart"),"onsubmit",this,"doSubmit")}if(dojo.byId("cart")){dojo.connect(dojo.byId("cart"),"onsubmit",this,"doBillingSubmit")}if(dojo.byId("cart.help")){dojo.connect(dojo.byId("cart.help"),"onclick",this,"doHelp")}if(dojo.byId("cart.privacy")){dojo.connect(dojo.byId("cart.privacy"),"onclick",this,"doPrivacy")}if(dojo.byId("cart.continue")){dojo.connect(dojo.byId("cart.continue"),"onclick",this,"doContinue")}if(dojo.byId("cart.secure")){dojo.connect(dojo.byId("cart.secure"),"onclick",this,"doSecure")}if(dojo.byId("cart.secure_bottom")){dojo.connect(dojo.byId("cart.secure_bottom"),"onclick",this,"doSecure")}if(dojo.byId("cart.signin")){dojo.connect(dojo.byId("cart.signin"),"onclick",this,"doSignin")}if(dojo.byId("cart.phone")){dojo.connect(dojo.byId("cart.phone"),"onclick",this,"doPhone")}if(dojo.byId("cart.email")){dojo.connect(dojo.byId("cart.email"),"onclick",this,"doEmail")}if(dojo.byId("cart.terms")){dojo.connect(dojo.byId("cart.terms"),"onclick",this,"doTerms")}if(dojo.byId("checkout.security_code")){dojo.connect(dojo.byId("checkout.security_code"),"onclick",this,"doSecureCode")}if(dojo.byId("shipping_address_0")){dojo.connect(dojo.byId("shipping_address_0"),"onclick",this,"hideShipping")}if(dojo.byId("user_order_billing_country")){dojo.connect(dojo.byId("user_order_billing_country"),"onchange",this,"swapBillState")}if(dojo.byId("shipping_address_1")){dojo.connect(dojo.byId("shipping_address_1"),"onclick",this,"showShipping");if(dojo.byId("shipping_address_1").checked){this.showShipping()}}this.shipping_reqs=new Array();var a=this;dojo.query(".cart_recalculate").forEach(function(c,b){dojo.connect(c,"onclick",a,"doRecalc")})},startup:function(){this.inherited(arguments);this.theDialog=new dijit.Dialog({id:"checkoutDialog",title:this.title}),this.CartDialogContainer;var a=this;dojo.connect(this.theDialog,"onLoad",a,a.connectClose)},connectClose:function(){var a=this;dojo.query(".dialog_close",a.theDialog.containerNode).forEach(function(c,b){dojo.connect(c,"onclick",a,a.doClose)})},doClose:function(a){this.theDialog.hide()},doSubmit:function(c){dojo.stopEvent(c);var b=true;var a=true;if(document.forms.Cart.elements.zip.value==""){document.forms.Cart.elements.zip.className="inputtiny_error";var b=false}else{document.forms.Cart.elements.zip.className="inputtiny"}if(document.forms.Cart.elements.country.selectedIndex==0){document.forms.Cart.elements.country.className="countryselect_error";var a=false}else{document.forms.Cart.elements.country.className="countryselect"}dojo.attr(dojo.byId("Cart"),"action","/cart/calculate");if((b)&&(a)){document.forms.Cart.submit()}},doBillingSubmit:function(b){dojo.stopEvent(b);var a=checkForm(thisValidator,"cart");if(a){dojo.attr(dojo.byId("cart"),"action","/cart/create");dojo.byId("SUBMIT_Review_order").disabled=true;document.forms.cart.submit()}},doSignin:function(a){dojo.stopEvent(a);this.theDialog.setHref("/services/Login/form/cart/total");this.theDialog.show()},doPhone:function(a){dojo.stopEvent(a);this.theDialog.setHref("/services/Download/phone");this.theDialog.show()},doEmail:function(a){dojo.stopEvent(a);this.theDialog.setHref("/services/Download/email");this.theDialog.show()},doTerms:function(a){dojo.stopEvent(a);this.theDialog.setHref("/services/Download/terms");this.theDialog.show()},doSubmitShip:function(b){dojo.stopEvent(b);var a=true;if(document.forms.Cart.elements.zip.value==""){document.forms.Cart.elements.zip.className="inputtiny_error";a=false}else{document.forms.Cart.elements.zip.className="inputtiny"}if(document.forms.Cart.elements.country.selectedIndex==0){document.forms.Cart.elements.country.className="countryselect_error";a=false}else{document.forms.Cart.elements.country.className="countryselect"}dojo.attr(dojo.byId("Cart"),"action","/cart/submit");if(a){document.forms.Cart.submit()}},doRecalc:function(a){dojo.stopEvent(a);dojo.attr(dojo.byId("Cart"),"action","/cart/recalculate");document.forms.Cart.submit()},doContinue:function(a){dojo.stopEvent(a);window.history.go(-1)},doHelp:function(a){dojo.stopEvent(a);this.theDialog.setHref("/services/Cart/help");this.theDialog.show()},doPrivacy:function(a){dojo.stopEvent(a);this.theDialog.setHref("/services/Cart/privacy");this.theDialog.show()},doSecureCode:function(a){dojo.stopEvent(a);this.theDialog.setHref("/services/Download/securecode");this.theDialog.show()},doSecure:function(a){dojo.stopEvent(a);this.theDialog.setHref("/services/Cart/secure");this.theDialog.show()},hideShipping:function(a){toggleDiv("shipping_wrapper");this.clearShipFields()},showShipping:function(b){var a=this;if(this.shipping_container==null){this.shipping_container=new dijit.layout.ContentPane({id:"shipping_container_contentPane",onLoad:function(){dojo.hitch(a.connectShip())}},dojo.byId("shipping_container"));this.shipping_container.setHref("/services/Cart/shipping");if((dojo.byId("user_id"))&&(dojo.byId("user_id").innerHTML!="")){this.shipping_container.setHref("/services/Cart/shipping/"+dojo.byId("user_id").innerHTML)}}else{this.setShipFields()}toggleDiv("shipping_wrapper")},connectShip:function(){if(dojo.byId("user_order_ship_country")){dojo.connect(dojo.byId("user_order_ship_country"),"onchange",this,"swapShipState")}},clearShipFields:function(){var a=this;dojo.query("span[id^='vrequser_order_ship']").forEach(function(b,c){b.innerHTML="FALSE"},a);dojo.byId("vrequser_order_ship_address_2").innerHTML="FALSE"},setShipFields:function(){var a=this;dojo.query("span[id^='vrequser_order_ship']").forEach(function(b,c){b.innerHTML="TRUE"},a);dojo.byId("vrequser_order_ship_address_2").innerHTML="VNN"},swapBillState:function(){if(dojo.byId("user_order_billing_country").selectedIndex!=1){dojo.style(dojo.byId("user_order_billing_state_select_div"),"display","none");dojo.style(dojo.byId("user_order_billing_state_text_div"),"display","block");dojo.byId("vrequser_order_billing_state_text").innerHTML="TRUE";dojo.byId("vrequser_order_billing_state_select").innerHTML="FALSE"}else{dojo.style(dojo.byId("user_order_billing_state_text_div"),"display","none");dojo.style(dojo.byId("user_order_billing_state_select_div"),"display","block");dojo.byId("vrequser_order_billing_state_text").innerHTML="FALSE";dojo.byId("vrequser_order_billing_state_select").innerHTML="TRUE"}},swapShipState:function(){if(dojo.byId("user_order_ship_country").selectedIndex!=1){dojo.style(dojo.byId("user_order_ship_state_select_div"),"display","none");dojo.style(dojo.byId("user_order_ship_state_text_div"),"display","block");dojo.byId("vrequser_order_ship_state_text").innerHTML="TRUE";dojo.byId("vrequser_order_ship_state_select").innerHTML="FALSE"}else{dojo.style(dojo.byId("user_order_ship_state_text_div"),"display","none");dojo.style(dojo.byId("user_order_ship_state_select_div"),"display","block");dojo.byId("vrequser_order_ship_state_text").innerHTML="FALSE";dojo.byId("vrequser_order_ship_state_select").innerHTML="TRUE"}}})}if(!dojo._hasResource["dojo_widgets.checkout.Shipping"]){dojo._hasResource["dojo_widgets.checkout.Shipping"]=true;dojo.provide("dojo_widgets.checkout.Shipping");dojo.experimental("dojo_widgets.checkout.Shipping");dojo.declare("dojo_widgets.checkout.Shipping",[dijit._Widget,dijit._Templated],{widgetID:null,theId:null,title:null,theDialog:null,content:null,showing:true,loaded:false,form:null,templatePath:"/js/dojo/dojo_widgets/checkout/resources/Shipping.html",postCreate:function(){this.inherited(arguments);if(dojo.byId("Shipping")){dojo.connect(dojo.byId("Shipping"),"onsubmit",this,"doSubmit")}dojo.connect(dojo.byId("cart.secure"),"onclick",this,"doSecure")},startup:function(){this.inherited(arguments);this.theDialog=new dijit.Dialog({id:"checkoutDialog",title:this.title}),this.ShippingDialogContainer},doSecure:function(a){dojo.stopEvent(a);this.theDialog.setHref("/services/Download/secure");this.theDialog.show()},doSubmit:function(a){dojo.stopEvent(a);dojo.attr(dojo.byId("Shipping"),"action","/cart/dobilling");document.forms.Shipping.submit()}})}if(!dojo._hasResource["dojo_widgets.faq.FAQ"]){dojo._hasResource["dojo_widgets.faq.FAQ"]=true;dojo.provide("dojo_widgets.faq.FAQ");dojo.experimental("dojo_widgets.faq.FAQ");dojo.declare("dojo_widgets.faq.FAQ",[dijit._Widget],{postCreate:function(){this.inherited(arguments);var a=this;dojo.query(".reveal").forEach(function(c,b){dojo.connect(c,"onclick",a.doReveal)});if(window.location.hash!=""){toggleDiv(window.location.hash.replace("#",""))}},doReveal:function(a){dojo.stopEvent(a);toggleDiv(a.target.getAttribute("name"))}})}if(!dojo._hasResource["dojo_widgets.image.ProductCarousel"]){dojo._hasResource["dojo_widgets.image.ProductCarousel"]=true;dojo.provide("dojo_widgets.image.ProductCarousel");dojo.experimental("dojo_widgets.image.ProductCarousel");dojo.declare("dojo_widgets.image.ProductCarousel",[dijit._Widget,dijit._Templated],{widgetID:null,imageStore:null,imageNodes:null,imageCount:0,request:null,size:120,ImageArray:null,InterFaceWidth:520,ViewingAreaWidth:0,OffstageWidth:null,ImagesShowing:null,ViewingAreaHeight:131,ImageValignment:"middle",templatePath:"/js/dojo/dojo_widgets/image/resources/ProductCarousel.html",header:"",viewLink:"",viewText:"",hitch:"null",init:true,currentImage:0,isMoving:false,postCreate:function(){this.inherited(arguments);this.widgetID=this.id;this.ViewingAreaWidth=this.InterFaceWidth-60;this.OffstageWidth=this.InterFaceWidth+this.size+50;if(this.ImagesShowing==null){this.ImagesShowing=Math.floor(this.InterFaceWidth/this.size)}dojo.style(this.DojoCarouselViewingArea,"opacity","0");this.init()},init:function(){this.connect(this.DojoCarouselNavPrev,"onclick","_prev");this.connect(this.DojoCarouselNavNext,"onclick","_next");this.setDataStore();return true},update:function(){this.hideNode(this.DojoCarouselLoader);this.setStyles();this.setIDs();this.attachEventhandlers();this.showNode(this.DojoCarouselViewingArea)},setDataStore:function(){this.imageNodes=new dojo.data.ItemFileReadStore({data:this.imageStore,scope:this});this.imageNodes.fetch({onItem:this.setImage,onComplete:this.update,scope:this})},setImage:function(c,b){atitle=this.imageNodes.getValue(c,"title");image=this.imageNodes.getValue(c,"thumb");desc=this.imageNodes.getValue(c,"desc");guid=this.imageNodes.getValue(c,"guid");NewElement=document.createElement("span");NewElement.setAttribute("class","DojoCarouselSpan");var a=(this.currentImage>(this.ImagesShowing-1))?this.OffstageWidth:this.currentImage*this.size;NewElement.style.left=a+"px";NewElement.innerHTML='<div guid="'+guid+'" class="DojoCarouselThumbnailWrapper" onClick="'+this.hitch+"('"+guid+'\')" title="'+desc+'"><img src="'+image+'" title="'+desc+'" alt="'+desc+'" /></div><div class="DojoCarouselThumbnailTitle">'+atitle+"</div>";this.DojoCarouselImageContainer.appendChild(NewElement);this.currentImage++},setStyles:function(){dojo.style(this.DojoCarouselInterface,"width",this.ViewingAreaWidth+"px");dojo.style(this.DojoCarouselVerbiage,"width",this.InterFaceWidth-80+"px");dojo.style(this.DojoCarouselViewingArea,"zIndex",2);dojo.style(this.DojoCarouselVerbiage,"zIndex",5);dojo.style(this.DojoCarouselViewingArea,"left",0+"px");dojo.style(this.DojoCarouselVerbiage,"left",40+"px");dojo.style(this.DojoCarouselViewingArea,"top",0+"px");dojo.style(this.DojoCarouselVerbiage,"top",35+"px");dojo.style(this.DojoCarouselViewingArea,"height",this.ViewingAreaHeight+"px");dojo.style(this.DojoCarouselInterface,"height",this.ViewingAreaHeight+35+"px");dojo.style(this.DojoCarouselContainerScrollRight,"left",this.InterFaceWidth-25+"px");dojo.style(this.DojoCarouselVerbiage,"textAlign","center");dojo.query("span div",this.DojoCarouselInterface).style("vertialAlign",this.ImageValignment)},setIDs:function(){var a=this.widgetID;dojo.query("span.DojoCarouselSpan",this.DojoCarouselImageContainer).forEach(function(c,b){dojo.attr(c,"id",a+"_"+b)})},attachEventhandlers:function(){var b=this.widgetID;var a=this.hitch;dojo.query("div.DojoCarouselThumbnailWrapper",this.DojoCarouselImageContainer).forEach(function(c,d){dojo.attr(c,"id",b+"Image_"+d)})},showNode:function(a){dojo.fadeIn({node:a,duration:500}).play()},hideNode:function(a){dojo.fadeOut({node:a,duration:200}).play()},_next:function(){if((this.currentImage<3)||(this.isMoving)){return}this.isMoving=true;firstDiv=dojo.byId(this.widgetID+"_0");dupDiv=firstDiv.cloneNode(true);this.DojoCarouselImageContainer.appendChild(dupDiv);dojo.style(dupDiv,"left",this.OffstageWidth+"px");dojo.attr(dupDiv,"id","tmp");for(h=0;h<5;h++){var b=(h==0)?true:false;var a=(h==this.ImagesShowing)?true:false;this.leftSuperSlide(h,a,b)}},_prev:function(){if((this.currentImage<4)||(this.isMoving)){return}this.isMoving=true;lastDiv=dojo.byId(this.widgetID+"_"+(this.currentImage-1));dupDiv=lastDiv.cloneNode(true);this.DojoCarouselImageContainer.insertBefore(dupDiv,dojo.byId(this.widgetID+"_0"));this.update();dojo.style(dojo.byId(this.widgetID+"_0"),"left",-this.size+"px");for(h=this.ImagesShowing+1;h>-1;h--){var b=(h==0)?true:false;var a=(h==this.ImagesShowing)?true:false;this.rightSuperSlide(h,b,a)}},leftSuperSlide:function(b,a,d){var c=dojo.fx.slideTo({node:this.widgetID+"_"+b,duration:500,left:((b-1)*this.size)});if(a){dojo.connect(c,"onEnd",this,function(){this.isMoving=false})}if(d){dojo.connect(c,"onEnd",this,function(){this.DojoCarouselImageContainer.removeChild(dojo.byId(this.widgetID+"_"+b));this.update()})}c.play()},rightSuperSlide:function(d,b,c){var f=(c)?(this.OffstageWidth):(d*this.size);var a=dojo.fx.slideTo({node:this.widgetID+"_"+d,duration:500,left:f});if(b){dojo.connect(a,"onEnd",this,function(){this.isMoving=false})}a.play()}})}if(!dojo._hasResource["dojo_widgets.product.Product"]){dojo._hasResource["dojo_widgets.product.Product"]=true;dojo.provide("dojo_widgets.product.Product");dojo.experimental("dojo_widgets.product.Product");dojo.declare("dojo_widgets.product.Product",[dijit._Widget],{widgetID:null,theselect:null,thewidget:null,postCreate:function(){this.inherited(arguments);this.theselect=dijit.byId("fk_artist_id");dojo.connect(this.theselect,"onChange",this,"selectArtist")},selectArtist:function(){dojo.xhrGet({url:"/services/artist_users/royalty/"+this.theselect,handle:function(b,a){if(typeof b=="error"){console.warn("error!",a)}else{dojo.byId("product_artist_royalty").value=b}}})}})}if(!dojo._hasResource["dojo_widgets.search.Search"]){dojo._hasResource["dojo_widgets.search.Search"]=true;dojo.provide("dojo_widgets.search.Search");dojo.experimental("dojo_widgets.search.Search");dojo.declare("dojo_widgets.search.Search",[dijit._Widget],{artistStore:null,artistSelect:null,DojoSearchField:null,DojoSearchSubmit:null,DojoRecordsField:null,SearchURL:null,theDialog:null,postCreate:function(){this.inherited(arguments);this.DojoSearchField=document.forms.searchForm.elements.key;this.DojoSearchSubmit=dojo.byId("DojoSearchSubmit");this.DojoRecordsField=dojo.byId("DojoRecordsField");this.artistSelect=dojo.byId("artist_search");this.DojoSearchField.value="Enter Tattoo Keyword";dojo.connect(this.DojoSearchField,"onfocus",null,this.toggleSearchInputIn);dojo.connect(this.DojoSearchField,"onblur",null,this.toggleSearchInputOut);dojo.connect(this.DojoSearchSubmit,"onclick",this,this.submitSearch);dojo.connect(this.artistSelect,"onchange",this,this.submitSearch);if(dojo.byId("DojoSearchSuggestions")){dojo.connect(dojo.byId("DojoSearchSuggestions"),"onclick",this,this.showKeys)}if(dojo.byId("DojoSearchSuggestions")){dojo.connect(document,"onkeypress",this,this.doKeyPress)}this.SearchURL=location.pathname.split("/");this.update();this.init()},startup:function(){this.inherited(arguments)},submitSearch:function(a){dojo.stopEvent(a);this.doSearch()},doSearch:function(){var b=new Array;var a=new Array;if((this.artistSelect.value=="Search by Artist")&&((this.DojoSearchField.value=="")||(this.DojoSearchField.value=="Enter Tattoo Keyword"))){window.location="/search/featured?result=false";return false}url="/search";if(this.DojoSearchField.value!="Enter Tattoo Keyword"){url=url+"/"+this.DojoSearchField.value}if(this.artistSelect.value!="Search by Artist"){url=url+"/artist/"+this.artistSelect.value}if(this.DojoRecordsField.value!=12){url=url+"/records/"+this.DojoRecordsField.value}if(document.forms.searchForm.elements.bw.checked){b[b.length]="bw"}if(document.forms.searchForm.elements.color.checked){b[b.length]="color"}if(b.length==1){url=url+"/cmap/"+b.join(",")}if(document.forms.searchForm.elements.small.checked){a[a.length]="small"}if(document.forms.searchForm.elements.medium.checked){a[a.length]="medium"}if(document.forms.searchForm.elements.large.checked){a[a.length]="large"}if((a.length>0)&&(a.length<3)){url=url+"/size/"+a.join(",")}if(document.forms.searchForm.elements.adult_search.checked){url=url+"/adult/true"}document.location.href=url;return false},init:function(){if(dojo.byId("DojoSearchSuggestions")){this.theDialog=new dijit.Dialog({id:"keyword_suggestion_dialog",title:"Keyword Suggestions"}),dojo.byId("keyword_suggestions_dialog");var a=this.theDialog;dojo.style(this.theDialog,"display","none");dojo.style(dojo.byId("keyword_suggestion_dialog"),"display","none");_5=dojo.byId("keywordsuggestions").innerHTML;a.setContent(_5);dojo.byId("keywordsuggestions").innerHTML=""}return true},setKeyword:function(){var c=document.forms.keyword_form.elements.keyword_suggest_select;var a;var b;a="";for(var b=1;b<c.length;b++){if(c.options[b].selected==true){a=c.options[b].text}}this.DojoSearchField.value=a;this.doSearch()},toggleSearchInputIn:function(){(this.value=="Enter Tattoo Keyword")?this.value="":null},toggleSearchInputOut:function(){(this.value=="")?this.value="Enter Tattoo Keyword":null},update:function(){var k=(dojo.byId("search_params"))?dojo.byId("search_params").innerHTML:false;if(k!=""){var g=dojo.fromJson(k)}if(g){var c=(g.cmap)?g.cmap:false;var b=(g.size)?g.size:false;var a=(g.adult)?g.adult:false;var g=(g.records)?g.records:false;var f=(g.artist)?g.artist:false;var l=(g.op)?g.op:false}else{var c=this.in_url("cmap");var b=this.in_url("size");var a=this.in_url("adult");var g=this.in_url("records");var f=this.in_url("artist")}var l=(dojo.byId("search_term"))?dojo.byId("search_term").innerHTML:false;if((l!=false)&&(l!="last")&&(l!="Artist")){this.DojoSearchField.value=l.replace("%20"," ")}if(g!=false){var d;switch(g){case"12":d=0;break;case"24":d=1;break;case"36":d=2;break;case"60":d=3;break;default:d=0;break}this.DojoRecordsField.options[d].selected=true}if(a!=false){if(a.match(/true/)){document.getElementById("adult_search").checked=true}}if(b!=false){if(!b.match(/small/)){document.getElementById("small").checked=false}if(!b.match(/medium/)){document.getElementById("medium").checked=false}if(!b.match(/large/)){document.getElementById("large").checked=false}}if(c!=false){if(!c.match(/bw/)){document.getElementById("bw").checked=false}if(!c.match(/color/)){document.getElementById("color").checked=false}}if(f!=false){for(i=1;i<this.artistSelect.options.length;i++){if(this.artistSelect.options[i].value==f.replace("%20"," ")){this.artistSelect.selectedIndex=i;break}}}},toggleDiv:function(a){if((!dojo.style(a,"display"))||(dojo.style(a,"display")=="none")){var b=dojo.fadeIn({node:a});dojo.connect(b,"beforeBegin",function(){dojo.style(a,"opacity",0);dojo.style(a,"display","block")});b.play()}else{var c=dojo.fadeOut({node:a});dojo.connect(c,"onEnd",function(){dojo.style(a,"opacity",0);dojo.style(a,"display","none")});c.play()}},in_url:function(d){var b=false;for(var c=0;c<this.SearchURL.length;c++){if(d==this.SearchURL[c]){b=this.SearchURL[c+1];break}}return b},doKeyPress:function(a){switch(a.charOrCode){case dojo.keys.ENTER:dojo.stopEvent(a);this.submitSearch(a);break}},showKeys:function(a){dojo.stopEvent(a);this.theDialog.show();dojo.style(this.theDialog,"display","block");dojo.style(dojo.byId("keyword_suggestion_dialog"),"display","block");dojo.connect(dojo.byId("keyword_suggest_submit"),"onclick",this,this.setSelectedKeyword)},setSelectedKeyword:function(a){dojo.stopEvent(a);this.DojoSearchField.value=dojo.byId("keyword_suggest_select").options[dojo.byId("keyword_suggest_select").selectedIndex].value;this.theDialog.hide();this.submitSearch(a)}})}if(!dojo._hasResource["dojo_widgets.search.CategorySearch"]){dojo._hasResource["dojo_widgets.search.CategorySearch"]=true;dojo.provide("dojo_widgets.search.CategorySearch");dojo.experimental("dojo_widgets.search.CategorySearch");dojo.declare("dojo_widgets.search.CategorySearch",[dijit._Widget],{artistStore:null,artistSelect:null,DojoSearchField:null,DojoSearchSubmit:null,DojoRecordsField:null,SearchURL:null,theDialog:null,postCreate:function(){this.inherited(arguments);this.DojoSearchField=dojo.byId("DojoSearchField");this.DojoSearchSubmit=dojo.byId("DojoSearchSubmit");this.DojoSearchField.value="Enter Tattoo Keyword";dojo.connect(this.DojoSearchField,"onfocus",null,this.toggleSearchInputIn);dojo.connect(this.DojoSearchField,"onblur",null,this.toggleSearchInputOut);dojo.connect(this.DojoSearchSubmit,"onclick",this,this.submitSearch);this.SearchURL=location.pathname.split("/")},startup:function(){this.inherited(arguments)},submitSearch:function(a){dojo.stopEvent(a);this.doSearch()},doSearch:function(){if(this.DojoSearchField.value=="Enter Tattoo Keyword"){window.location="/search/featured?result=false";return false}url="/search";if(this.DojoSearchField.value!="Enter Tattoo Keyword"){url=url+"/"+this.DojoSearchField.value}document.location.href=url;return false},toggleSearchInputIn:function(){(this.value=="Enter Tattoo Keyword")?this.value="":null},toggleSearchInputOut:function(){(this.value=="")?this.value="Enter Tattoo Keyword":null},update:function(){var m=(dojo.byId("search_term"))?dojo.byId("search_term").innerHTML:false;var a=(dojo.byId("search_params"))?dojo.byId("search_params").innerHTML:false;if(a!=""){var g=dojo.fromJson(a)}if(g){var f=(g.cmap)?g.cmap:false;var d=(g.size)?g.size:false;var c=(g.adult)?g.adult:false;var l=(g.records)?g.records:false;var k=(g.artist)?g.artist:false;var m=(g.op)?g.op:false}else{var f=this.in_url("cmap");var d=this.in_url("size");var c=this.in_url("adult");var l=this.in_url("records");var k=this.in_url("artist")}if((m!=false)&&(m!="last")&&(m!="Artist")){this.DojoSearchField.value=m.replace("%20"," ")}if(l!=false){var b;switch(l){case"12":b=0;break;case"24":b=1;break;case"36":b=2;break;case"60":b=3;break;default:b=0;break}this.DojoRecordsField.options[b].selected=true}if(c!=false){if(c.match(/true/)){document.getElementById("adult_search").checked=true}}if(d!=false){if(!d.match(/small/)){document.getElementById("small").checked=false}if(!d.match(/medium/)){document.getElementById("medium").checked=false}if(!d.match(/large/)){document.getElementById("large").checked=false}}if(f!=false){if(!f.match(/bw/)){document.getElementById("bw").checked=false}if(!f.match(/color/)){document.getElementById("color").checked=false}}if((k!=false)&&(k!=undefined)){for(i=1;i<this.artistSelect.options.length;i++){if(this.artistSelect.options[i].value==k.replace("%20"," ")){this.artistSelect.selectedIndex=i;break}}}},toggleDiv:function(a){if((!dojo.style(a,"display"))||(dojo.style(a,"display")=="none")){var b=dojo.fadeIn({node:a});dojo.connect(b,"beforeBegin",function(){dojo.style(a,"opacity",0);dojo.style(a,"display","block")});b.play()}else{var c=dojo.fadeOut({node:a});dojo.connect(c,"onEnd",function(){dojo.style(a,"opacity",0);dojo.style(a,"display","none")});c.play()}},in_url:function(d){var b=false;for(var c=0;c<this.SearchURL.length;c++){if(d==this.SearchURL[c]){b=this.SearchURL[c+1];break}}return b}})}if(!dojo._hasResource["dojo_widgets.search.WikiSearch"]){dojo._hasResource["dojo_widgets.search.WikiSearch"]=true;dojo.provide("dojo_widgets.search.WikiSearch");dojo.experimental("dojo_widgets.search.WikiSearch");dojo.declare("dojo_widgets.search.WikiSearch",[dijit._Widget],{DojoSearchField:null,DojoSearchSubmit:null,SearchURL:null,initval:null,postCreate:function(){this.inherited(arguments);this.DojoSearchField=dojo.byId("DojoSearchField");this.DojoSearchSubmit=dojo.byId("DojoSearchSubmit");this.DojoSearchField.value=this.initval;dojo.connect(this.DojoSearchField,"onfocus",this,this.toggleSearchInputIn);dojo.connect(this.DojoSearchField,"onblur",this,this.toggleSearchInputOut);dojo.connect(this.DojoSearchSubmit,"onclick",this,this.submitSearch);this.SearchURL=location.pathname.split("/");this.update();this.init()},startup:function(){this.inherited(arguments)},submitSearch:function(a){dojo.stopEvent(a);this.doSearch()},doSearch:function(){if((this.DojoSearchField.value=="")||(this.DojoSearchField.value==this.initval)){return false}url="/wiki/search";if(this.DojoSearchField.value!=this.initval){url=url+"/"+this.DojoSearchField.value}document.location.href=url;return false},init:function(){return true},toggleSearchInputIn:function(){(this.DojoSearchField.value==this.initval)?this.DojoSearchField.value="":null},toggleSearchInputOut:function(){(this.DojoSearchField.value=="")?this.DojoSearchField.value=this.initval:null},update:function(){var a=this.in_url("search");if(a!=false){this.DojoSearchField.value=a.replace("%20"," ")}},toggleDiv:function(a){if((!dojo.style(a,"display"))||(dojo.style(a,"display")=="none")){var b=dojo.fadeIn({node:a});dojo.connect(b,"beforeBegin",function(){dojo.style(a,"opacity",0);dojo.style(a,"display","block")});b.play()}else{var c=dojo.fadeOut({node:a});dojo.connect(c,"onEnd",function(){dojo.style(a,"opacity",0);dojo.style(a,"display","none")});c.play()}},in_url:function(d){var b=false;for(var c=0;c<this.SearchURL.length;c++){if(d==this.SearchURL[c]){b=this.SearchURL[c+1];break}}return b},doKeyPress:function(a){switch(a.charOrCode){case dojo.keys.ENTER:dojo.stopEvent(a);this.submitSearch(a);break}},showKeys:function(a){dojo.stopEvent(a);this.theDialog.show();dojo.connect(dojo.byId("keyword_suggest_submit"),"onclick",this,this.setSelectedKeyword)}})}dojo.provide("dojo.nls.tattoojohnny_en");dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.en");dijit.nls.loading.en={loadingState:"Loading...",errorState:"Sorry, an error occurred"};dojo.provide("dijit.form.nls.validate");dijit.form.nls.validate._built=true;dojo.provide("dijit.form.nls.validate.en");dijit.form.nls.validate.en={rangeMessage:"This value is out of range.",invalidMessage:"The value entered is not valid.",missingMessage:"This value is required."};dojo.provide("dijit.form.nls.ComboBox");dijit.form.nls.ComboBox._built=true;dojo.provide("dijit.form.nls.ComboBox.en");dijit.form.nls.ComboBox.en={previousMessage:"Previous choices",nextMessage:"More choices"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en");dijit.nls.common.en={buttonOk:"OK",buttonCancel:"Cancel",buttonSave:"Save",itemClose:"Close"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en");dijit.nls.common.en={buttonOk:"OK",buttonCancel:"Cancel",buttonSave:"Save",itemClose:"Close"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en");dijit.nls.common.en={buttonOk:"OK",buttonCancel:"Cancel",buttonSave:"Save",itemClose:"Close"};dojo.registerModulePath("dojo_widgets","/js/dojo/dojo_widgets");dojo.registerModulePath("dojo","/js/dojo/dojo");dojo.registerModulePath("dijit","/js/dojo/dijit");dojo.registerModulePath("dojox","/js/dojo/dojox");dojo.require("dojo.parser");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.layout.AccordionContainer");dojo.require("dojox.fx.easing");dojo.require("dojox.fx.scroll");dojo.require("dojox.embed.Flash");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.Tooltip");dojo.require("dojo_widgets.wishlist.Wishlist");dojo.require("dojo_widgets.checkout.Checkout");dojo.require("dojo_widgets.checkout.Cart");dojo.require("dojo_widgets.checkout.Shipping");dojo.require("dojo_widgets.faq.FAQ");dojo.require("dojo_widgets.search.CategorySearch");dojo.require("dojo_widgets.search.Search");dojo.addOnLoad(function(){dojo.parser.parse();fillJSONContainer(document);dojo.connect(dojo.byId("sharethis"),"onclick",connectAddThis)});if(!window._ate){var _atd="www.addthis.com/",_atr="//s7.addthis.com/",_euc=encodeURIComponent,_duc=decodeURIComponent,_atu="undefined",_atc={dr:0,ver:250,loc:0,enote:"",cwait:500,tamp:0.2,samp:0.01,camp:1,vamp:1,addr:-1,addt:1,xfl:!!window.addthis_disable_flash,abf:!!window.addthis_do_ab};(function(){try{var J=window.location;if(J.protocol.indexOf("file")===0){_atr="http:"+_atr}if(J.hostname.indexOf("localhost")!=-1){_atc.loc=1}}catch(O){}var M=navigator.userAgent.toLowerCase(),P=document,v=window,u=v.addEventListener,k=v.attachEvent,K=P.location,R={win:/windows/.test(M),chr:/chrome/.test(M),iph:/iphone/.test(M),saf:/safari/.test(M),web:/webkit/.test(M),opr:/opera/.test(M),msi:(/msie/.test(M))&&!(/opera/.test(M)),ffx:/firefox/.test(M),ff2:/firefox\/2/.test(M),ie6:/msie 6.0/.test(M),ie7:/msie 7.0/.test(M),mod:-1},g={isBound:false,isReady:false,readyList:window.addthis_onload||[],onReady:function(){if(!g.isReady){g.isReady=true;var a=g.readyList;for(var b=0;b<a.length;b++){a[b].call(window)}g.readyList=[]}},addLoad:function(b){var a=v.onload;if(typeof v.onload!="function"){v.onload=b}else{v.onload=function(){if(a){a()}b()}}},bindReady:function(){if(E.isBound){return}E.isBound=true;if(P.addEventListener&&!R.opr){P.addEventListener("DOMContentLoaded",E.onReady,false)}var a=window.addthis_product;if(a&&a.indexOf("f")>-1){E.onReady();return}if(R.msi&&window==top){(function(){if(E.isReady){return}try{P.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,0);return}E.onReady()})()}if(R.opr){P.addEventListener("DOMContentLoaded",function(){if(E.isReady){return}for(var c=0;c<P.styleSheets.length;c++){if(P.styleSheets[c].disabled){setTimeout(arguments.callee,0);return}}E.onReady()},false)}if(R.saf){var b;(function(){if(E.isReady){return}if(P.readyState!="loaded"&&P.readyState!="complete"){setTimeout(arguments.callee,0);return}if(b===undefined){var l=P.gn("link");for(var c=0;c<l.length;c++){if(l[c].getAttribute("rel")=="stylesheet"){b++}}var d=P.gn("style");b+=d.length}if(P.styleSheets.length!=b){setTimeout(arguments.callee,0);return}E.onReady()})()}E.addLoad(E.onReady)},append:function(b,a){E.bindReady();if(E.isReady){b.call(window,[])}else{E.readyList.push(function(){return b.call(window,[])})}}},E=g,f=function(r,p,q,d){if(!r){return q}if(r instanceof Array){for(var l=0,b=r.length,c=r[0];l<b;c=r[++l]){q=p.call(d||r,q,c,l,r)}}else{for(var a in r){q=p.call(d||r,q,r[a],a,r)}}return q},D=Array.prototype.slice,B=function(b){return D.apply(b,D.call(arguments,1))},A=function(a){return a.replace(/(^\s+|\s+$)/g,"")},t=function(b,a){return f(b,function(l,d,c){c=A(c);if(c){l.push(_euc(c)+"="+_euc(A(d)))}return l},[]).join(a||"&")},z=function(b,a){return f((b||"").split(a||"&"),function(q,l){var p=l.split("="),d=A(_duc(p[0])),c=A(_duc(p.slice(1).join("=")));if(d){q[d]=c}return q},{})},N={vst:[],rev:"$Rev: 70591 $",bro:R,clck:1,show:1,dl:K,camp:_atc.camp-Math.random(),samp:_atc.samp-Math.random(),vamp:_atc.vamp-Math.random(),tamp:_atc.tamp-Math.random(),ab:"-",scnt:1,seq:1,inst:1,wait:500,tmo:null,cvt:[],svt:[],sttm:new Date().getTime(),max:268435455,pix:"tev",sid:0,sub:!!window.at_sub,uid:null,oot:null,swf:"//bin.clearspring.com/at/v/1/button1.6.swf",evu:"//e1.clearspring.com/at/",spt:"static/r07/widget09.png",ifpp:null,com:function(a){if(window.parent&&window.postMessage){window.parent.postMessage(a,"*")}else{N.ifm(a)}},ifwn:function(){var b=N;try{b.rec(b.sifr.contentWindow.name)}catch(c){}},ifm:function(b){if(addthis_wpl){var c=(addthis_wpl.split("#"))[0];window.parent.location.href=c+"#at"+b}return false},hash:window.location.hash,ifp:function(){var c=N,b=window.location.hash,q=0;if(b&&b.indexOf("#at")>-1){b=b.substr(3).split(";");for(var l in b){var d=b[l].length>3?b[l].substr(0,3):null;switch(d){case"ssh":q=1;c.ssh(b[l].substr(4));break;case"uid":q=1;c.asetup(b[l].substr(4));break}}if(q){if(!c.hash.length||c.hash==""){c.hash="#"}window.location.hash=c.hash}}if(c.gssh&&c.guid){clearInterval(c.ifpp)}},pmh:function(a){if(a.origin.slice(-12)==".addthis.com"){N.rec(a.data)}},rec:function(l){if(!l){return}var d=z(l),b=N,c=b.sifr;if(d.ssh){b.ssh(d.ssh)}if(d.uid){b.asetup(d.uid)}if(c&&c.parentNode){c.parentNode.removeChild(c);b.sifr=null}},ssh:function(a){N.gssh=1;window.addthis_ssh=_duc(a)},mun:function(c){var a=291;if(c){for(var b=0;b<c.length;b++){a=(a*(c.charCodeAt(b)+b)+3)&1048575}}return(a&16777215).toString(32)},ibt:function(){if(N.bti){return N.bti}var b=(window.addthis_product||"men").substr(0,3),a=b=="bkm"||b=="fct"||b=="fxe";if(a){N.bti=a}return a},off:function(){return Math.floor((new Date().getTime()-N.sttm)/100).toString(16)},ran:function(){return Math.floor(Math.random()*4294967295).toString(36)},srd:function(){if(N.dr){return"&pre="+_euc(N.dr)}else{return""}},cst:function(a){return"CXNID=2000001.521545608054043907"+(a||2)+"NXC"},imgz:[],hrr:function(c){if(c&&c.urls&&c.urls instanceof Array){for(var b=0;b<c.urls.length;b++){var a=new Image();N.imgz.push(a);a.src=c.urls[b]}}},img:function(p,r){if(!window.at_sub&&!_atc.xtr){var d=N,q=d.dr,b=((d.rev||"").split(" "));if(q){q=(q.split("?")).shift();q=(q.split("http://")).pop();if(q.length>25){q=q.substr(0,25)}}var l=new Image();d.imgz.push(l);l.src=_atr+"live/t00/"+p+".gif?"+(d.uid!==null?"uid="+d.uid+"&":"")+d.ran()+"&"+d.cst(r)+(d.pub()?"&pub="+d.pub():"")+(q?"&dr="+_euc(q):"")+(b.length>1?"&rev="+b[1]:"")}},cuid:function(){return(N.sttm&N.max).toString(16)+(Math.floor(Math.random()*N.max)).toString(16)},ssid:function(){if(N.sid===0){N.sid=N.cuid()}return N.sid},sev:function(b,a){N.pix="sev-"+(typeof(b)!=="number"?_euc(b):b);N.svt.push(b+";"+N.off());if(a===1){N.xmi(true)}else{N.sxm(true)}},cev:function(b,a){N.pix="cev-"+_euc(b);N.cvt.push(_euc(b)+"="+_euc(a)+";"+N.off());N.sxm(true)},sxm:function(a){if(N.tmo!==null){clearTimeout(N.tmo)}if(a){N.tmo=N.sto("_ate.xmi(false)",N.wait)}},sto:function(b,a){return setTimeout(b,a)},sta:function(){var b=N;return"AT-"+(b.pub()?b.pub():"unknown")+"/-/"+b.ab+"/"+b.ssid()+"/"+(b.seq++)+(b.uid!==null?"/"+b.uid:"")},xred:function(){var r=window,q=N,s=0,d=P.referer||P.referrer||"",b=K?K.href:null,p=0;if(q.camp>=0&&b&&K&&K.protocol&&(d.indexOf(".com")>-1)&&(K.protocol.indexOf("https")==-1)){if(d&&d.match(/ws\/results\/(Web|Images|Video|News)/)){p=1}else{if(d.indexOf(".com/search")>-1){var x=d.split("?").pop().split("&");for(var l=0;l<x.length;l++){if(x[l].indexOf("q=")===0||x[l].indexOf("p=")===0||x[l].indexOf("query")===0||x[l].indexOf("qry")===0||x[l].indexOf("text")===0){p=1;break}}}}if(!_atc.xtr&&!_atc.xck&&p&&q.mun(q.pub())!=="mu2r"){var c=P.ce("script");c.src="//cf.addthis.com/red/p.json?callback=_ate.hrr"+(q.pub()?"&pub="+q.pub():"")+(q.uid&&q.uid!=="anonymous"?"&uid="+_euc(q.uid):"")+"&url="+_euc(b)+"&ref="+_euc((P.referer||P.referrer));P.gn("head")[0].appendChild(c)}}},xld:function(){var b=N;if(!b.xld_p){b.xld_p=1;if(b.samp>=0&&!b.sub){b.sev("20");b.cev("plo",Math.round(1/_atc.samp));if(b.dr){b.cev("pre",b.dr)}}b.xred();b.img(_atc.ver+"lo","2")}},xmi:function(r){var b=N,q=b.dl?b.dl.hostname:"";if(!b.uid){b.dck("X"+b.cuid())}else{b.coo()}if(b.cvt.length+b.svt.length>0){b.sxm(false);if(b.seq===1){b.cev("pin",b.inst)}if(_atc.xtr){return}if(q.indexOf(".gov")>-1||q.indexOf(".mil")>-1){_atc.xck=1}var w=b.pix+"-"+b.ran()+".png?ev="+N.sta()+"&se="+b.svt.join(",")+"&ce="+b.cvt.join(",")+(_atc.xck?"&xck=1":""),l=b.evu+w;b.cvt=[];b.svt=[];if(r){var s=document,p=s.ce("iframe");p.id="_atf";p.src=l;N.opp(p.style);s.body.appendChild(p);p=s.getElementById("_atf")}else{var c=new Image();b.imgz.push(c);c.src=l}}},loc:function(){return _atc.loc},opp:function(a){a.width=a.height="1px";a.position="absolute";a.zIndex=100000},pub:function(){return window.addthis_config&&addthis_config.username?_euc(addthis_config.username):(window.addthis_pub||"")},plo:[],lad:function(a){N.plo.push(a)},lng:function(a){var b=document;if(a&&(a.toLowerCase()).indexOf("en")!==0&&!N.pll){N.pll=N.ajs("static/r07/lang01.js")}},ajs:function(a){var b=P.ce("script");b.src=_atr+a;P.gn("head")[0].appendChild(b);return b},jlo:function(){try{var q=document,b=N,p=(window.addthis_language||addthis_config.ui_language||(b.bro.msi?navigator.userLanguage:navigator.language));b.lng(p);if(!b.pld){if(b.bro.ie6){var c=new Image();b.imgz.push(c);c.src=_atr+b.spt;if(window.addthis_feed){c=new Image();b.imgz.push(c);c.src=_atr+"static/r05/feed00.gif"}}b.pld=b.ajs("static/r07/menu37.js")}}catch(l){}},igv:function(a,b){if(!v.addthis_share){v.addthis_share={url:v.addthis_url||a,title:v.addthis_title||b}}if(!v.addthis_config){v.addthis_config={username:v.addthis_pub}}else{if(addthis_config.data_use_flash===false){_atc.xfl=1}if(addthis_config.data_use_cookies===false){_atc.xck=1}}},lod:function(p){try{var V=window,ak=N,c=ak.bro.msi,b=0,Z=P.referer||P.referrer||"",Y=K?K.href:null,ag=K.hostname,aj=Y?Y.indexOf("sms_ss"):-1,ah=((p===1||V.addthis_load_flash)&&!_atc.abf),ac=((V.addthis_language||(V.addthis_config?V.addthis_config.ui_language:null)||(ak.bro.msi?navigator.userLanguage:navigator.language)).split("-")).shift(),q,d,ad=P.gn("link"),r,T=_atr+"static/r07/sh09.html",x="//"+ag+"/favicon.ico",s="_ate.ifwn()",r;if(!V.postMessage){var X=P.gn("img");for(var ae=0;ae<X.length;ae++){if(X[ae].src.split("//").pop().indexOf(ag)==0){x=X[ae].src;break}}}if(!_atc.xic||(V.postMessage||ak.bro.msi)){if(!c){r=P.ce("iframe")}else{var W=P.ce("div");W.style.visibility="hidden";ak.opp(W.style);P.body.insertBefore(W,P.body.firstChild);W.innerHTML='<iframe id="_atssh" width="1" height="1" name="_atssh" '+(!V.postMessage?'onload="'+s+'" ':"")+">";r=P.getElementById("_atssh")}}for(var ae=0;ae<ad.length;ae++){var ab=ad[ae];if(ab.rel&&ab.rel=="canonical"&&ab.href){Y=ab.href}}ak.igv(Y,P.title||"");ak.gov();ak.dr=Z;ak.ab=(!ac||ac=="en")&&(ak.bro.ffx||ak.bro.msi)&&!ak.ibt()?"ps-"+(window.addthis_ab!==undefined?addthis_ab:(ak.tamp>0?Math.min(4,Math.floor(Math.random()*4+1)):0)):"~";var U=(ak.swf&&!_atc.xfl&&!(ak.loc())&&!_atc.abf&&(ah||ak.uid===null||(ak.uid!=="anonymous"&&ak.oot&&((new Date()).getTime()-ak.oot>60480000))));T+="#swfp="+(U&&c?1:0);if(!c&&U){var y=function(l,al,a){var w=P.ce("param");w.name=al;w.value=a;l.appendChild(w)},W=P.ce("div"),aa=P.ce("object");aa.id="atff";aa.data=ak.swf;aa.width=aa.height="1px";aa.quality="high";aa.type="application/x-shockwave-flash";y(aa,"wmode","transparent");y(aa,"allowScriptAccess","always");W.appendChild(aa);P.body.insertBefore(W,P.body.firstChild)}if(K.href.indexOf(_atr)==-1&&r){r.id="_atssh";ak.opp(r.style);r.width=r.height=1;r.frameborder=r.style.border=0;r.style.top=r.style.left=0;if(V.postMessage){r.src=T;if(c){V.attachEvent("onmessage",ak.pmh)}else{V.addEventListener("message",ak.pmh,false)}r=P.body.appendChild(r)}else{if(false&&!_atc.xic&&ak.bro.msi&&window==top){r.onload=s;r.src=x;r=P.body.appendChild(r);r.src=T+"&wpl="+_euc(x)}}ak.sifr=r}if(!ah){if(U){ak.uoo();if(ak.bro.ie6||ak.bro.ie7){ak.sto("if (_ate.xld) _ate.xld()",5000)}else{ak.sto("_ate.xld()",5000)}}else{ak.guid=1;ak.xld()}if(aj>-1&&Y.indexOf(_atd+"book")==-1){var af=Y.substr(aj);af=af.split("&").shift().split("#").shift().split("=").pop();if(ak.vamp>=0&&!ak.sub&&af.length){ak.cev("plv",Math.round(1/_atc.vamp));ak.cev("rsc",af)}}}if(ak.plo.length>0){ak.jlo()}}catch(ai){}},kck:function(a){var b=document;if(b.cookie){b.cookie=a+"= ; expires=Tue, 31 Mar 2009 05:47:11 UTC; path=/"}},rck:function(l){var q=document;if(q.cookie){var b=q.cookie.split(";");for(var p=0;p<b.length;p++){var r=b[p],a=r.indexOf(l+"=");if(a>=0){return r.substring(a+(l.length+1))}}}return},uoo:function(){N.sck("_csoot",(new Date().getTime()))},coo:function(a){if(N.uid=="anonymous"&&!N.oot){N.xck=1;N.uoo()}},dck:function(a){N.uid=a;N.sck("_csuid",a);N.coo()},gov:function(){var b=N.dl?N.dl.hostname:"";if(b.indexOf(".gov")>-1||b.indexOf(".mil")>-1){_atc.xck=1;_atc.xfl=1}var c=N.pub(),a=["usarmymedia","govdelivery"];for(L in a){if(c==a[L]){_atc.xck=1;_atc.xfl=1;break}}},sck:function(b,a,c){N.gov();if(!_atc.xck){P.cookie=b+"="+a+(!c?"; expires=Wed, 04 Oct 2028 03:19:53 GMT":"")+"; path=/"}},asetup:function(b){var c=N;try{if(!c.guid){c.guid=1;if(b!==null&&b!==_atu){c.dck(b)}c.xld()}}catch(d){}return b},ao:function(d,c,b,a,p,l){N.lad(["open",d,c,b,a,p,l]);N.jlo();return false},ac:function(){},as:function(b,c,a){N.lad(["send",b,c,a]);N.jlo()}},S=N;v._ate=S;v._adr=E;P.ce=P.createElement;P.gn=P.getElementsByTagName;E.bindReady();if(!_atc.ost){if(!v.addthis_conf){v.addthis_conf={}}for(var L in addthis_conf){_atc[L]=addthis_conf[L]}_atc.ost=1}E.append(S.lod);if(P.cookie){var n=P.cookie.split(";");for(var L=0;L<n.length;L++){var Q=n[L],o=Q.indexOf("_csuid="),m=Q.indexOf("_csoot=");if(o>=0){N.uid=Q.substring(o+7)}else{if(m>=0){N.oot=Q.substring(m+7)}}}}try{var J=P.ce("link");J.rel="stylesheet";J.type="text/css";J.href=_atr+"static/r07/widget21.css";J.media="all";P.gn("head")[0].appendChild(J)}catch(O){}var I=P.gn("script"),C=I[I.length-1],F=C.src.indexOf("#")>-1?C.src.replace(/^[^\#]+\#?/,""):C.src.replace(/^[^\?]+\??/,""),G=z(F);if(G.pub){v.addthis_pub=_duc(G.pub)}else{if(G.username){v.addthis_pub=_duc(G.username)}}if(v.addthis_pub&&v.addthis_config){v.addthis_config.username=v.addthis_pub}if(G.domready){_atc.dr=1}try{if(_atc.ver===120){var H="atb"+v._ate.cuid();P.write('<span id="'+H+'"></span>');v._ate.igv();v._ate.lad(["span",H,addthis_share.url||"[url]",addthis_share.title||"[title]"])}if(v.addthis_clickout){N.lad(["cout"])}}catch(O){}})();function addthis_open(d,c,b,g,a,f){if(typeof a=="string"){a=null}return _ate.ao(d,c,b,g,a,f)}function addthis_close(){_ate.ac()}function addthis_sendto(b,c,a){_ate.as(b,c,a);return false}if(_atc.dr){_adr.onReady()}}else{_ate.inst++}if(_atc.abf){addthis_open(document.getElementById("ab"),"emailab",window.addthis_url||"[URL]",window.addthis_title||"[TITLE]")}if(!window.addthis||window.addthis.nodeType!==undefined){window.addthis={ost:0,cache:{},plo:[],links:[],ems:[],button:function(){this.plo.push({call:"button",args:arguments})},toolbox:function(){this.plo.push({call:"toolbox",args:arguments})},update:function(){this.plo.push({call:"update",args:arguments})}}}_adr.append((function(){if(!window.addthis.ost){var d=document,u=undefined,w=window,_4={},_5=w.addthis_config,_6=w.addthis_share,_7={},_8={},_9=d.gn("body").item(0),_a=function(o,n){if(n&&o!==n){for(var k in n){if(o[k]===u){o[k]=n[k]}}}},_e=function(o,n){var r={};for(var k in o){if(n[k]){r[k]=n[k]}else{r[k]=o[k]}}return r},_13=window.addthis,_14=function(_15){return"mailto:?subject="+(_15.title?_15.title:"%20")+"&body="+(_15.title?_15.title+"%0D%0A":"")+(_15.url)+"%0D%0A%0D%0AShared via AddThis.com"},_16=function(_17,tag,_19,_1a,_1b){tag=tag.toUpperCase();var els=(_17==_9&&_13.cache[tag]?_13.cache[tag]:(_17||_9).getElementsByTagName(tag)),rv=[],i,o;if(_17==_9){_13.cache[tag]=els}if(_1b){for(i=0;i<els.length;i++){o=els[i];if(o.className.indexOf(_19)>-1){rv.push(o)}}}else{_19=_19.replace(/\-/g,"\\-");var rx=new RegExp("(^|\\s)"+_19+(_1a?"\\w*":"")+"(\\s|$)");for(i=0;i<els.length;i++){o=els[i];if(rx.test(o.className)){rv.push(o)}}}return(rv)},_21={aim:"AIM",kirtsy:"kIRTSY",linkagogo:"Link-a-Gogo",meneame:"Men&eacute;ame",misterwong:"Mister Wong",myaol:"myAOL",myspace:"MySpace",yahoobkm:"Y! Bookmarks",typepad:"TypePad",wordpress:"WordPress"},_22={email:"Email",print:"Print",favorites:"Save to Favorites",twitter:"Tweet This",digg:"Digg This"},_23={services_custom:1},_24={more:1,email:1},_25={email:1,print:1,more:1,favorites:1},_26=["username","services_custom","services_custom_name","services_custom_url","services_custom_title","services_exclude","services_compact","services_expanded","ui_click","ui_hide_embed","ui_delay","ui_hover_direction","ui_language","ui_offset_top","ui_offset_left","ui_header_color","ui_header_background","ui_use_embeddable_services_beta","ui_icons","ui_cobrand","data_use_flash","data_use_cookies","data_track_linkback"],_27=["url","title","swfurl","width","height","html","screenshot","author","templates","email_template","email_vars","description","content"],_28=d.getElementsByClassname||_16,_29=function(_2a,_2b){var sv=_2a.services instanceof Array?_2a.services[0]:_2a.services||"";return"http://"+_atd+"bookmark.php?v="+_atc.ver+"&pub="+_euc(_ate.pub())+"&s="+sv+(_2b.url?"&url="+_euc(_2b.url):"")+(_2b.title?"&title="+_euc(_2b.title):"")},_2d=function(_2e){if(typeof _2e=="string"){var c=_2e.substr(0,1);if(c=="#"){_2e=d.getElementById(_2e.substr(1))}else{if(c=="."){_2e=_28(_9,"*",_2e.substr(1))}else{}}}if(!(_2e instanceof Array)){_2e=[_2e]}return _2e},_30=function(el,_32,_33,_34){var rv={};_33=_33||{};for(var i=0;i<_32.length;i++){if(_33[_32[i]]&&!_34){rv[_32[i]]=_33[_32[i]]}else{if(el){var p="addthis:"+_32[i],v=el.getAttribute?el.getAttribute(p)||el[p]:el[p];if(v){rv[_32[i]]=v}else{if(_33[_32[i]]){rv[_32[i]]=_33[_32[i]]}}if(rv[_32[i]]==="true"){rv[_32[i]]=true}else{if(rv[_32[i]]==="false"){rv[_32[i]]=false}}}}if(rv[_32[i]]!==undefined&&_23[_32[i]]&&(typeof rv[_32[i]]=="string")){eval("var e = "+rv[_32[i]]);rv[_32[i]]=e}}return rv},_39=function(_3a){var acs=(_3a||{}).services_custom;if(!acs){return}if(!(acs instanceof Array)){acs=[acs]}for(var i=0;i<acs.length;i++){var _3d=acs[i];if(_3d.name&&_3d.icon&&_3d.url){_3d.code=_3d.url=_3d.url.replace(/ /g,"");if(_3d.code.indexOf("http")===0){_3d.code=_3d.code.substr((_3d.code.indexOf("https")===0?8:7))}_3d.code=_3d.code.split("?").shift().split("/").shift().toLowerCase();_4[_3d.code]=_3d}}},_3e=function(ss,_40){return _4[ss]||{}},_41=function(el,_43,_44,_45){var rv={conf:_43||{},share:_44||{}};rv.conf=_30(el,_26,_43,_45);rv.share=_30(el,_27,_44,_45);return rv},_47=function(_48,_49,_4a){if(_48){_49=_49||{};_4a=_4a||{};var _4b=_49.conf||_5,_4c=_49.share||_6;var _4d=_4a.onmouseover,_4e=_4a.onmouseout,_4f=_4a.onclick,_50=_4a.internal,ss=_4a.singleservice;if(ss){_4b.product="tbx-"+_atc.ver;if(_4f===u){_4f=_24[ss]?function(el,_53,_54){var s=_e(_54,_8);return addthis_open(el,ss,s.url,s.title,_e(_53,_7),s)}:_25[ss]?function(el,_57,_58){var s=_e(_58,_8);return addthis_sendto(ss,_e(_57,_7),s)}:null}}else{if(!_4a.noevents){if(!_4a.nohover&&(!_4b||!_4b.ui_click)){if(_4d===u){_4d=function(el,_5b,_5c){return addthis_open(el,"",null,null,_5b,_5c)}}if(_4e===u){_4e=function(el){return addthis_close()}}if(_4f===u){_4f=function(el,_5f,_60){return addthis_sendto("more",_5f,_60)}}}else{if(!_4b||!_4b.ui_click){if(_4f===u){_4f=function(el,_62,_63){return addthis_open(el,"more")}}}else{if(_4f===u){_4f=function(el,_65,_66){return addthis_open(el,"",null,null,_65,_66)}}}}}}_48=_2d(_48);for(var i=0;i<_48.length;i++){var o=_48[i],_69=_41(o,_4b,_4c,true)||{};_a(_69.conf,_5);_a(_69.share,_6);o.conf=_69.conf;o.share=_69.share;if(o.conf.ui_language){_ate.lng(o.conf.ui_language)}_39(o.conf);if(_4d){o.onmouseover=function(){return _4d(this,this.conf,this.share)}}if(_4e){o.onmouseout=function(){return _4e(this)}}if(_4f){o.onclick=function(){return _4f(this,this.conf,this.share)}}if(o.tagName.toLowerCase()=="a"){if(ss){var _6a=_3e(ss,o.conf);o.conf.product="tbx-"+_atc.ver;if(_6a&&_6a.code&&_6a.icon){if(o.firstChild&&o.firstChild.className.indexOf("at300bs")>-1){o.firstChild.style.background="url("+_6a.icon+") no-repeat top left"}}if((_ate.bro.ffx||_ate.bro.saf||_ate.bro.chr||_ate.bro.iph)&&!_25[ss]){var _6b=o.share.templates&&o.share.templates[ss]?o.share.templates[ss]:"";o.href="//"+_atd+"bookmark.php?pub="+_euc(addthis_config.username||o.conf.username||_ate.pub())+"&v="+_atc.ver+"&source=tbx-"+_atc.ver+"&s="+ss+"&url="+_euc(_69.share.url||addthis_share.url||"")+"&title="+_euc(_69.share.title||addthis_share.title||"")+"&content="+_euc(_69.share.content||addthis_share.content||"")+(_6b?"&template="+_euc(_6b):"")+(o.conf.data_track_linkback?"&sms_ss=1":"")+(_6a&&_6a.url?"&acn="+_euc(_6a.name)+"&acc="+_euc(_6a.code)+"&acu="+_euc(_6a.url):"");o.target="_blank";_13.links.push(o)}else{if(!_25[ss]){o.onclick=function(){return addthis_sendto.call(this,ss,_e(this.conf,_7),_e(this.share,_8))}}else{if(ss=="email"&&(o.conf.ui_use_mailto||_ate.bro.iph)){o.href=_14(o.share);o.onclick=null;_13.ems.push(o)}}}if(!o.title){o.title=_22[ss]?_22[ss]:"Send to "+(_21[ss]?_21[ss]:ss.substr(0,1).toUpperCase()+ss.substr(1))}}}if(_50){var app=_50;if(!o.hasChildNodes()){if(_50=="img"){var img=d.ce("img");img.width=125;img.height=16;img.border=0;img.alt="Share";img.src="//s7.addthis.com/static/btn/v2/lg-share-en.gif";app=img}o.appendChild(app)}}}}},_6e=_16(_9,"A","addthis_button_",true,true),_6f=function(_70,_71,_72,_73){for(var i=0;i<_70.length;i++){var b=_70[i];if(b==null){continue}if(_73!==false||!b.ost){var _71=_71||_5,_72=_72||_6,_76=_41(b,_71,_72,true),hc=0,a="at300",c=b.className||"",s=c.match(/addthis_button_([\w\.]+)(?:\s|$)/),_7b=u,sv=s&&s.length?s[1]:0;if(sv){if(!b.childNodes.length){var sp=d.ce("span");b.appendChild(sp);sp.className=a+"bs at15t_"+sv}else{if(b.childNodes.length==1){var cn=b.childNodes[0];if(cn.nodeType==3){var sp=d.ce("span"),tv=cn.nodeValue;b.insertBefore(sp,cn);sp.className=a+"bs at15t_"+sv}}else{hc=1}}if(sv==="compact"){if(!hc&&c.indexOf(a)==-1){b.className+=" "+a+"m"}}else{if(sv==="expanded"){if(!hc&&c.indexOf(a)==-1){b.className+=" "+a+"m"}_7b={nohover:true}}else{if(!hc&&c.indexOf(a)==-1){b.className+=" "+a+"b"}_7b={singleservice:sv}}}_47([b],_76,_7b);b.ost=1}}}};_13.update=function(_80,_81,_82){if(_80=="share"){if(!window.addthis_share){window.addthis_share={}}window.addthis_share[_81]=_82;_8[_81]=_82;for(var i in _13.links){var o=_13.links[i],rx=new RegExp("&"+_81+"=(.*)&"),ns="&"+_81+"="+_euc(_82)+"&";o.href=o.href.replace(rx,ns);if(o.href.indexOf(_81)==-1){o.href+=ns}}for(var i in _13.ems){var o=_13.ems[i];o.href=_14(addthis_share)}}else{if(_80=="config"){if(!window.addthis_config){window.addthis_config={}}window.addthis_config[_81]=_82;_7[_81]=_82}}};_13.button=function(_87,_88,_89){_47(_87,{conf:_88,share:_89},{internal:"img"})};_13.toolbox=function(_8a,_8b,_8c){var _8d=_2d(_8a);for(var i=0;i<_8d.length;i++){var tb=_8d[i],_90=_41(tb,_8b,_8c),sp=d.ce("div"),c=tb.getElementsByTagName("a");if(c){_6f(c,_90.conf,_90.share)}tb.appendChild(sp);sp.className="atclear"}};_13.ready=function(){if(this.ost){return}this.ost=1;var a=".addthis_";_13.toolbox(a+"toolbox");_13.button(a+"button");_6f(_6e,null,null,false);for(var i=0;i<this.plo.length;i++){_13[this.plo[i].call].apply(this,this.plo[i].args)}};window.addthis=_13;window.addthis.ready()}}));function connectAddThis(a){dojo.stopEvent(a);if(share){addthis_open(a.target,"","[URL]","[TITLE]")}}deleteIcon=function(b,d){if(confirm("Are you sure you want to delete this image?")){var a=b.id;var c=b.previousSibling;c.setAttribute("value","true");b.parentNode.parentNode.style.display="none"}};function appendVar(g,a,c){var b=new RegExp(/\?/);delim=(b.exec(g))?"&":"?";if(a=="date"){var f=new Date();return g+delim+"ts="+f.getTime()}else{return g+delim+a+"="+c}}function getURL(d,c,b,a){dojo.xhrGet({url:d,handle:c,handleAs:b,async:a,load:function(g,k,f){return k},error:function(g,f){},mimetype:"text/plain"})}function hitURL(a){dojo.xhrGet({url:a,async:true,load:function(c,d,b){},error:function(c,b){},mimetype:"text/plain"})}getPageURL=function(){var c=document.URL.split("/");var a="";var b=/^[a-z0-9\._]+$/;for(i=3;i<c.length;i++){if(b.exec(c[i])){a+=c[i]+"/"}}return a};function pageScroll(){window.scrollBy(0,-80);scrolldelay=setTimeout("pageScroll()",100);if(getScrollXY()[1]==0){stopScroll()}}function stopScroll(){clearTimeout(scrolldelay)}function getScrollXY(){var b=0,a=0;if(typeof(window.pageYOffset)=="number"){a=window.pageYOffset;b=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollTop;b=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollTop;b=document.documentElement.scrollLeft}}}return[b,a]}function openLink(a){window.open(a);return true}function flopUp(c){if(!c.refresh){c.refresh=false}if(!c.refreshargs){c.refreshargs=null}var a=document.createElement("div");document.body.appendChild(a);href=appendVar(c.href,"date");b=dijit.byId(c.anid+"_floatingPane");if(!b){var b=new dojo_widgets.layout.HitchPane({id:c.anid+"_floatingPane",title:c.title,dockable:false,maxable:false,shadable:true,closable:true,resizable:false,autoSize:c.autoSize,autoSizeNodes:c.autoSizeNodes,onRefresh:c.refresh,onRefreshArgs:c.refreshargs},a);b.startup()}if(c.hitch!=null){var d=c.hitch.split(":")}if((d)&&(d[0]=="form")){hitchForm(d[1],c.anid+"_floatingPane",c.href)}else{if((d)&&(d[0]=="hitch")){b.setHitch(d[1],c.href)}else{b.attr("href",c.href)}}}var hitchForm=function(b,c,a){console.debug("Hitching form ",b," to node ",c);if(a){dijit.byId(c).setHref(a)}dojo.connect(dojo.byId(b),"onsubmit",function(d){formSubmit(d,b,c)})};var formSubmit=function(c,a,b){c.preventDefault();dojo.xhrPost({form:a,handleAs:"text",handle:function(g,f){if(typeof g=="error"){console.warn("error!",f)}else{console.log("Successfully posted form ",a);try{var d=dijit.byId(b)}catch(k){var d=b}d.setContent(g);try{}catch(k){}}}})};function fillJSONContainer(a){dojo.query(".styro_container").forEach(function(c,b){fillFragments(c)})}fillFragments=function(d){var g=d.childNodes[0].id.split("_");var k=d.childNodes[0].innerHTML;var c=d.childNodes[0].getAttribute("name").split("_");var a=dojo.fromJson(k);if(a){for(i=0;i<a.items.length;i++){if(i>0){uuid=duplicateFragment(g[1],true);if(uuid){var f=g[1]+"_";var b=new RegExp(g[1]);uuid=uuid.replace(b,"")}}else{uuid=""}setFragment(c[2],g[1],uuid,a.items[i])}}};setFragment=function(a,f,c,d){var g=f+c;for(key in d){var b=document.getElementById(c+key);if((b)&&(b.type)){switch(b.type){case"text":case"hidden":b.value=d[key];break;case"select-one":setSelect(b,d[key]);break}}else{if(b){if(b.src){b.src=d[key]}else{b.innerHTML=d[key]}}}}};setSelect=function(a,b){var c=a.options;for(j=0;j<c.length;j++){if(c[j].value==b){a.selectedIndex=j}}};duplicateFragment=function(l,m){var n=document.getElementById(l);if(!n){return false}var b=n.parentNode;var f=b.elements[l+"_total"];var d=document.getElementById(l+"_track");if(!f){var g=document.createElement("input");g.setAttribute("type","hidden");g.setAttribute("value",1);g.setAttribute("name",l+"_total");b.appendChild(g)}if(!d){var d=document.createElement("div");d.setAttribute("id",l+"_track");d.style.display="none";d.innerHTML=l;b.appendChild(d)}var a=dojo.dnd.getUniqueId();var k=a+"_"+l;var c=n.cloneNode(true);firstDiv=dojo.query("*",c)[0].parentNode;firstDiv.setAttribute("id",k);firstDiv.setAttribute("class","row");dojo.query("img:not(.remove_iterator|.delete_icon)",c).forEach(function(p,o){p.setAttribute("src","")});if(!m){dojo.query("img.delete_icon",c).forEach(function(p,o){p.setAttribute("src","")})}dojo.query("input",c).forEach(function(p,o){the_id=p.getAttribute("id");p.setAttribute("id",a+"_"+the_id)});dojo.query("select",c).forEach(function(p,o){the_id=p.getAttribute("id");p.setAttribute("id",a+"_"+the_id)});dojo.query("img:not(.remove_iterator|.delete_icon)",c).forEach(function(p,o){the_id=p.getAttribute("id");p.setAttribute("id",a+"_"+the_id)});dojo.query("span.display",c).forEach(function(p,o){the_id=p.getAttribute("id");p.setAttribute("id",a+"_"+the_id)});dojo.query("span.displayselect",c).forEach(function(p,o){the_id=p.getAttribute("id");p.setAttribute("id",a+"_"+the_id)});b.elements[l+"_total"].value++;dojo.query("img.remove_iterator",c).forEach(function(p,o){the_id=p.getAttribute("id");p.setAttribute("src","/images/Neu/16x16/actions/undo.png");p.setAttribute("border",0);p.setAttribute("onclick","removeFragment('"+k+"')")});trackString=d.innerHTML;trackArray=trackString.split(",");placeFrag=document.getElementById(trackArray[trackArray.length-1]);dojo.place(c,placeFrag,"after");d.innerHTML+=","+k;return k};removeFragment=function(c){var d=document.getElementById(c);var a=d.parentNode;dojo._destroyElement(d);rootID=c.split("_")[1];a.elements[rootID+"_total"].value--;trackElement=document.getElementById(rootID+"_track");trackString=trackElement.innerHTML;var b=new RegExp(","+c,"g");trackString=trackString.replace(b,"");trackElement.innerHTML=trackString};function toggleDiv(d,b){b=(typeof b=="undefined")?"null":b;if((!dojo.style(d,"display"))||(dojo.style(d,"display")=="none")){console.log("fading in "+d);var a=dojo.fadeIn({node:d});dojo.connect(a,"beforeBegin",function(){dojo.style(d,"opacity",0);dojo.style(d,"display","block")});if(b!="null"){dojo.connect(a,"onEnd",function(){dojo.removeClass(b,"windowshade_closed");dojo.addClass(b,"windowshade_open")})}a.play()}else{console.log("fading out "+d);var c=dojo.fadeOut({node:d});dojo.connect(c,"onEnd",function(){dojo.style(d,"opacity",0);dojo.style(d,"display","none");if(b!="null"){dojo.removeClass(b,"windowshade_open");dojo.addClass(b,"windowshade_closed")}});c.play()}console.log("done toggling "+d)}var message="Copying images from Tattoo Johnny has been disabled.";function noClick(a){if(document.all){if(event.button==2||event.button==3){alert(message);return false}}if(document.layers){if(a.which==3){alert(message);return false}}}if((document.layers)&&(letclick==undefined)){document.captureEvents(Event.MOUSEDOWN)}if(letclick==undefined){document.onmousedown=noClick}var thisValidator=new FormValidator();function checkForm(a,b){thisValidator.init(b);thisValidator.checkForm();if(thisValidator.debug==0){return thisValidator.validated}else{if(thisValidator.debug==2){console.log("The form "+b+" has "+thisValidator.theElementsLength+" elements.")}console.info("Total Errors: "+thisValidator.err);return false}}function setAction(c,f){var b=c.form;var a=b.elements.styroaction;if(!a||a=="undefined"){var d=document.createElement("input");d.setAttribute("type","hidden");d.setAttribute("name","styroaction");d.setAttribute("value",f);b.appendChild(d)}else{a.value=f}}function setEdit(a){thisValidator.skipcheck=true}function dropEdit(a){}function FormValidator(){}FormValidator.prototype.init=function(b,a){if(b!=undefined){this.theForm=document.forms[b];this.theElements=this.theForm.elements;this.theElementsLength=this.theElements.length}this.err=0;this.setValidators()};FormValidator.prototype.skipcheck=false;FormValidator.prototype.debug=0;FormValidator.prototype.vcqk=new Object();FormValidator.prototype.vcqkloaded=false;FormValidator.prototype.err=0;FormValidator.prototype.selset=0;FormValidator.prototype.firsterror="";FormValidator.prototype.currentElement="";FormValidator.prototype.required="";FormValidator.prototype.doval="";FormValidator.prototype.gotit="";FormValidator.prototype.useBeacons=true;FormValidator.prototype.editor=null;FormValidator.prototype.validated=false;FormValidator.prototype.thisIE=function(){var a=navigator.appName;if(a=="Microsoft Internet Explorer"){return true}else{return false}};FormValidator.prototype.setValidators=function(){if(!this.vcqkloaded){thisParse=new XMLParser;var vdoc=thisParse.getDoc("/xml/StyroformValidators.xml");var validators=vdoc.getElementsByTagName("validator");for(var i=0;i<validators.length;i++){var thistype=validators[i].getElementsByTagName("type")[0].firstChild.data;var thisexpr=validators[i].getElementsByTagName("expression")[0].firstChild.data;eval("this.vcqk."+thistype+"= eval(thisexpr)")}this.vcqkloaded=true}};FormValidator.prototype.showerrors=function(){if(this.theElements.showerrors.value=="TRUE"){return true}else{return false}};FormValidator.prototype.checkForm=function(){if(this.skipcheck){(FormValidator.prototype.useBeacons)?this.sendBeacon():null;FormValidator.prototype.validated=true}else{for(var a=0;a<this.theElementsLength;a++){this.currentElement=this.theElements[a];if(this.debug==2){console.log("Debugging Form Item "+a+"::"+this.currentElement.type+" -> "+this.currentElement.name)}this.validateItem()}this.setGlobalErrorNotice()}};FormValidator.prototype.setGlobalErrorNotice=function(){if(this.err>0){if(document.getElementById("errornotice_"+this.theForm.name).className=="errornotice"){document.getElementById("errornotice_"+this.theForm.name).className="errornotice_visible"}if(document.getElementById("errornotice_"+this.theForm.name).style.display=="none"){document.getElementById("errornotice_"+this.theForm.name).style.display="block"}(FormValidator.prototype.useBeacons)?this.sendBeacon(false):null;FormValidator.prototype.validated=false}else{(FormValidator.prototype.useBeacons)?this.sendBeacon(true):null;FormValidator.prototype.validated=true}};FormValidator.prototype.sendBeacon=function(a){thisParse=new XMLParser;var b=this.theElements.beacon_sig.value+","+this.theElements.beacon_data.value;thisParse.touchUrl("/services/Beacon/form/"+b+"/"+a)};FormValidator.prototype.initItem=function(){this.required=false;this.doval=false;this.currentElement.vtip=this.getDocValue("vtip");this.currentElement.vskip=this.getDocValue("vskip");this.currentElement.vreq=this.getDocValue("vreq");this.currentElement.spec=(this.getDocValue("spec")!="")?this.getDocValue("spec"):"FALSE";this.currentElement.asize=this.getDocValue("size");if((this.currentElement.type!="select-multiple")&&(this.currentElement.type!="select-one")){}this.currentElement.thisclass=this.getaclass(this.currentElement.className);this.currentElement.parentclass=this.getaclass(this.currentElement.parentNode.className);this.currentElement.parentparentclass=this.getaclass(this.currentElement.parentNode.parentNode.className);this.required=this.currentElement.vreq;this.editor=null};FormValidator.prototype.validateItem=function(){this.initItem();if(this.currentElement.vtip!=null){if(this.currentElement.vtip.length>0){this.doval=true}}if(this.debug==2){console.info("Name:"+this.currentElement.name+" Required: "+this.currentElement.vreq+" Validation:"+this.currentElement.vtip)}var elementType=this.currentElement.type.replace(/[-]/,"");if(elementType=="hidden"){this.required="FALSE";this.doval=false}else{if((this.currentElement.vreq=="VNN")&&(this.currentElement.value.length>0)){this.required="TRUE"}else{if((this.currentElement.vreq=="VNN")&&(this.currentElement.value.length==0)){this.required="TRUE";this.doval=false}else{if(elementType=="reset"){console.info("Name:"+this.currentElement.name+"( "+this.currentElement.type+" ) has no validation method, skipping...");this.required="FALSE";this.doval=false}}}}if(this.currentElement.vskip!="false"){this.required="FALSE"}if((this.required=="TRUE")&&(!this.currentElement.vtip.substring(0,2)=="js")&&(this.currentElement.type!="select-multiple")&&(this.currentElement.type!="select-one")&&(!this.vcqk[this.currentElement.vtip])){if(this.debug==2){console.error("No validator for "+this.currentElement.vtip)}this.err++;return false}if(this.doval!=false){if(this.currentElement.vtip.substring(0,2)=="js"){var theres=eval(this.currentElement.vtip.replace("js:",""));if(this.debug==2){console.info("eval of "+this.currentElement.name+" is "+theres)}if(!theres){if(this.currentElement.type=="checkbox"){this.err++;this.putErrors()}else{this.createError()}}else{this.resetField()}}else{var thefunction="this.validate_"+elementType+"()";return eval(thefunction)}}};FormValidator.prototype.validate_=function(){return true};FormValidator.prototype.validate_file=function(){if(this.currentElement.vtip.substring(0,2)!="js"){if((this.currentElement.vtip=="phoneNumber")||(this.currentElement.vtip=="phone")){this.currentElement.value=this.currentElement.value.replace(/[^\d]/g,"");if((this.currentElement.value.substring(0,1)==0)||(this.currentElement.value.substring(0,1)==1)){this.currentElement.value=this.currentElement.value.substring(1,this.currentElement.value.length)}}var gotIt=this.vcqk[this.currentElement.vtip].exec(this.currentElement.value)}else{if(eval(this.currentElement.vtip.replace("js:",""))=="true"){gotIt=true}else{gotIt=false}}if((!gotIt)||(gotIt==null)){this.createError()}else{this.resetField()}};FormValidator.prototype.validate_submit=function(){return true};FormValidator.prototype.validate_text=function(){if(this.currentElement.vtip=="truncURL"){var initStart=/^http(s)?/.exec(this.currentElement.value);if(initStart!=null){var theval=this.currentElement.value.replace("https://","");theval=theval.replace("http://","");if(theval==""){var gotIt=true}else{var gotIt=this.vcqk[this.currentElement.vtip].exec(theval)}}else{var gotIt=false}}else{if(this.currentElement.vtip.substring(0,2)!="js"){if((this.currentElement.vtip=="phoneNumber")||(this.currentElement.vtip=="phone")){this.currentElement.value=this.currentElement.value.replace(/[^\d]/g,"");if((this.currentElement.value.substring(0,1)==0)||(this.currentElement.value.substring(0,1)==1)){this.currentElement.value=this.currentElement.value.substring(1,this.currentElement.value.length)}}var gotIt=this.vcqk[this.currentElement.vtip].exec(this.currentElement.value)}else{if(eval(this.currentElement.vtip.replace("js:",""))=="true"){gotIt=true}else{gotIt=false}}}if((!gotIt)||(gotIt==null)){this.createError()}else{this.resetField()}};FormValidator.prototype.validate_textarea=function(){if(this.currentElement.name.substring(0,6)=="editor"){result=this.currentElement.name.replace("editor","");if(this.debug==2){console.info("hidden field name is "+result)}editordojo=this.currentElement.name.replace("editor","editordojo");if(this.debug==2){console.log("dojo editor name is "+editordojo)}this.editor=this.currentElement.name.replace("editor","editorwrapper");if(this.debug==2){console.log("this.editor is "+this.editor+" from "+editordojo)}var c=dijit.byId(editordojo);var b=c.getValue(false);b=b.replace("<br>","");if(this.debug==2){console.log("value="+b)}this.theForm.elements[result].value=b}else{b=this.currentElement.value}var a=this.vcqk[this.currentElement.vtip].exec(b.replace(/\n/g,""));if((this.currentElement.asize>0)&&(this.currentElement.value.length>this.currentElement.asize)){a=false}if((!a)||(a==null)){this.createError()}else{this.resetField()}};FormValidator.prototype.validate_checkbox=function(){if(((this.currentElement.vreq=="TRUE")&&(this.fieldCheckCount(this.theElements[this.currentElement.name])==0))||(this.fieldCheckCount(this.theElements[this.currentElement.name])>this.currentElement.vtip)){this.err++;this.putErrors()}else{this.resetField()}};FormValidator.prototype.validate_radio=function(){if((this.required=="TRUE")&&(!this.fieldChecked(this.theElements[this.currentElement.name]))){this.err++;this.putErrors()}else{this.resetField()}};FormValidator.prototype.validate_hidden=function(){return true};FormValidator.prototype.validate_password=function(){this.validate_text()};FormValidator.prototype.validate_button=function(){return true};FormValidator.prototype.validate_selectone=function(){if(this.currentElement.selectedIndex==this.currentElement.vtip){this.createError()}else{this.resetField()}};FormValidator.prototype.validate_selectmultiple=function(){var c=this.currentElement.vtip.split("|");var a=c[0];var k=c[1];var g=false;var b;var d=0;var f=new Array();for(b=0;b<this.currentElement.options.length;b++){if(this.currentElement.options[b].selected){f[d]=this.currentElement.options[b].value;d++}}if(a!="null"){for(value in f){if((f[value]==a)&&(this.required=="TRUE")){g=true;break}}}if(k!=0){if((f.length>k)&&(this.required=="TRUE")){g=true}}if(g){this.createError()}else{this.resetField()}};FormValidator.prototype.setPhoneValue=function(){if(this.currentElement.vtip=="phoneNumber"){this.currentElement.value=this.currentElement.value.substring(0,3)+"-"+this.currentElement.value.substring(3,6)+"-"+this.currentElement.value.substring(6,10)}};FormValidator.prototype.resetField=function(){this.setPhoneValue();if((this.currentElement.type=="checkbox")||(this.currentElement.type=="radio")){this.currentElement.parentNode.className=this.currentElement.parentclass}if(document.getElementById(this.currentElement.name)){document.getElementById(this.currentElement.name).className=this.currentElement.thisclass}if(document.getElementById("error"+this.currentElement.name)){document.getElementById("error"+this.currentElement.name).className="errorhidden";if(document.getElementById("error"+this.currentElement.name).innerHTML.length>0){document.getElementById("error"+this.currentElement.name).innerHTML=""}}if(this.editor!=null){var a=document.getElementById(this.editor);a.style.border="1px solid #ccc";a.style.background="#fff"}};FormValidator.prototype.createError=function(){if(this.editor!=null){var a=document.getElementById(this.editor);a.style.border="1px solid #cc0000";a.style.background="#ffcccc"}else{this.currentElement.className=this.currentElement.thisclass+"_error"}if(this.required=="TRUE"){this.err++;this.selectElement();this.putErrors()}};FormValidator.prototype.pushError=function(){this.currentElement.thisclass=this.getaclass(this.currentElement.className);this.createError();this.err++};FormValidator.prototype.selectElement=function(){if(this.selset==0){if(this.currentElement.type=="text"){this.currentElement.select()}this.currentElement.focus();this.selset=1}};FormValidator.prototype.putErrors=function(){if(this.currentElement.value.length==0){if(this.err==1){this.firsterror=this.currentElement.name+" (required)"}if(this.showerrors()||(this.currentElement.spec!="FALSE")){document.getElementById("error"+this.currentElement.name).className="errormsg_"+this.currentElement.name}if(this.showerrors()||(this.currentElement.spec!="FALSE")){document.getElementById("error"+this.currentElement.name).innerHTML=(this.currentElement.spec=="")?"&#160;(required)":this.currentElement.spec}}else{if((this.currentElement.type=="checkbox")||(this.currentElement.type=="radio")){console.log(this.currentElement.parentNode.className+" is set to "+this.currentElement.parentNode.className+"_error");console.log(this.currentElement.parentNode.parentNode.className+" is set to "+this.currentElement.parentparentclass+"_error");this.currentElement.parentNode.className=this.currentElement.parentclass+"_error";this.currentElement.parentNode.parentNode.className=this.currentElement.parentparentclass+"_error"}if(this.err==1){this.firsterror=this.currentElement.name+" (invalid)"}if(this.showerrors()||(this.currentElement.spec!="FALSE")){document.getElementById("error"+this.currentElement.name).className="errormsg_"+this.currentElement.name}if(this.showerrors()||(this.currentElement.spec!="FALSE")){document.getElementById("error"+this.currentElement.name).innerHTML=(this.currentElement.spec=="")?"&#160;(check your entry)":this.currentElement.spec}}console.error("Error checking "+this.currentElement.name+" Total Errors:"+this.err)};FormValidator.prototype.fieldChecked=function(b){isChecked=false;if(!b.length){if(b.checked){isChecked=b.value}}else{for(var a=0;a<b.length;a++){if(b[a].checked){isChecked=b[a].value;break}}}return isChecked};FormValidator.prototype.fieldCheckCount=function(c){var a=0;if(c.length){for(var b=0;b<c.length;b++){if(c[b].checked){a++}}}else{if(c.checked){a++}}return a};FormValidator.prototype.getaclass=function(a){parts=a.split("_");return parts[0]};FormValidator.prototype.getDocValue=function(a){if(document.getElementById(a+this.currentElement.name)){return document.getElementById(a+this.currentElement.name).innerHTML}else{return"FALSE"}};FormValidator.prototype.maxChars=function(a){if(this.currentElement.value.length<=a){return true}else{return false}};FormValidator.prototype.maxLength=function(a,c,b,f,d){a=a||window.event;if(window.event){keynum=a.keyCode}else{if(a.which){keynum=a.which}}if((keynum!=8)&&(c.value.length>=parseInt(b))){f=f.replace(/\$count/,b);console.log(f);if(c.value.length>parseInt(b)){if(confirm(d)){c.value=""}}a.returnValue=false;return false}};FormValidator.prototype.miniValidate=function(a){this.setValidators();this.currentElement=a;this.initItem();this.validate_textarea()};function XMLParser(b){try{document.execCommand("BackgroundImageCache",false,true)}catch(a){}if(b!=undefined){this.theXMLDoc=b}else{return false}}XMLParser.prototype.thisIE=function(){var a=navigator.appName;if(a=="Microsoft Internet Explorer"){return true}else{return false}};XMLParser.prototype.thisNetscape=function(){var a=navigator.appName;if(a=="Netscape"){return true}else{return false}};XMLParser.prototype.getDoc=function(b,a,d,g,c){a=a||"xml";g=g||"GET";d=d||null;c=c||false;if(this.thisIE()){var f=new ActiveXObject("Microsoft.XMLHTTP")}else{var f=new XMLHttpRequest()}f.open(g,b,c);if(g=="POST"){f.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");f.setRequestHeader("Content-length",d.length);f.setRequestHeader("Connection","close")}f.send(d);if(f.status==200){if(a=="xml"){return f.responseXML}else{return f.responseText}}else{if(f.status==404){alert("Incorrect URL at"+b);return false}else{alert("Error Loading XML");return false}}};XMLParser.prototype.touchUrl=function(a){if(this.thisIE()){var b=new ActiveXObject("Microsoft.XMLHTTP")}else{var b=new XMLHttpRequest()}b.open("GET",a,false);b.send("");return true};function validEmail(a){var b=/^.+\@(\[?)[a-zA-Z0-9\-\.]+\.([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/.exec(a);if((!b)||(b==null)){return false}else{return true}}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.ltrim=function(){return this.replace(/^\s+/,"")};String.prototype.rtrim=function(){return this.replace(/\s+$/,"")};function getQueryVariable(a){var c=window.location.search.substring(1);var d=c.split("&");for(var b=0;b<d.length;b++){var f=d[b].split("=");if(f[0]==a){return f[1]}}return""};