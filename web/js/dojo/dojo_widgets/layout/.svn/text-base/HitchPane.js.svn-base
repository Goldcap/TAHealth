/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojo_widgets.layout.HitchPane"]){dojo._hasResource["dojo_widgets.layout.HitchPane"]=true;dojo.provide("dojo_widgets.layout.HitchPane");dojo.experimental("dojo_widgets.layout.HitchPane");dojo.require("dojox.layout.FloatingPane");dojo.require("dojo_widgets.layout.AutoPane");dojo.declare("dojo_widgets.layout.HitchPane",[dojox.layout.FloatingPane,dojo_widgets.layout.AutoPane,dijit._Templated],{closable:true,dockable:false,resizable:false,shadable:false,maxable:false,resizeAxis:"xy",doTitle:true,title:"",dockTo:"",duration:400,contentClass:"null",movable:true,_showAnim:null,_hideAnim:null,_dockNode:null,_restoreState:{},_allFPs:[],_startZ:100,_canheight:0,templateString:null,templateString:"<div class=\"dojoxFloatingPane\" id=\"${id}\">\n\t<div tabindex=\"0\" waiRole=\"button\" class=\"dojoxFloatingPaneTitle\" dojoAttachPoint=\"focusNode\">\n\t\t<span dojoAttachPoint=\"closeNode\" dojoAttachEvent=\"onclick: close\" class=\"dojoxFloatingCloseIcon\"></span>\n\t\t<span dojoAttachPoint=\"maxNode\" dojoAttachEvent=\"onclick: maximize\" class=\"dojoxFloatingMaximizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"restoreNode\" dojoAttachEvent=\"onclick: _restore\" class=\"dojoxFloatingRestoreIcon\">&thinsp;</span>\t\n\t\t<span dojoAttachPoint=\"unshadeNode\" dojoAttachEvent=\"onclick: _unwindowshade\" class=\"dojoxFloatingMaximizeIcon\">&thinsp;</span>\t\n\t\t<span dojoAttachPoint=\"dockNode\" dojoAttachEvent=\"onclick: minimize\" class=\"dojoxFloatingMinimizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"shadeNode\" dojoAttachEvent=\"onclick: _windowshade\" class=\"dojoxFloatingMinimizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"titleNode\" class=\"dijitInline dijitTitleNode\"></span>\n\t</div>\n\t<div dojoAttachPoint=\"canvas\" class=\"dojoxFloatingPaneCanvas\">\n\t\t<div dojoAttachPoint=\"containerNode\" waiRole=\"region\" tabindex=\"-1\" class=\"${contentClass}\">\n\t\t</div>\n\t\t<span dojoAttachPoint=\"resizeHandle\" class=\"dojoxFloatingResizeHandle\"></span>\n\t</div>\n</div>\n",postCreate:function(){if(this.doTitle){this.setTitle(this.title);}this.inherited(arguments);if(this.movable){var _1=new dojo.dnd.Moveable(this.domNode,{handle:this.focusNode});}if(!this.dockable){this.dockNode.style.display="none";}if(!this.closable){this.closeNode.style.display="none";}if(!this.maxable){this.maxNode.style.display="none";this.restoreNode.style.display="none";}if(!this.resizable){this.resizeHandle.style.display="none";}else{var _2=dojo.marginBox(this.domNode);this.domNode.style.width=_2.w+"px";}if(this.movable){this._allFPs.push(this);}this.domNode.style.position="absolute";},startup:function(){if(this._started){return;}if(!this.doTitle){this.focusNode.style.display="none";this.titleNode.style.display="none";}this.unshadeNode.style.display="none";if(!this.shadable){this.shadeNode.style.display="none";}this.inherited(arguments);if(this.resizable){if(dojo.isIE){this.canvas.style.overflow="auto";}else{this.containerNode.style.overflow="auto";}this._resizeHandle=new dojox.layout.ResizeHandle({targetId:this.id,resizeAxis:this.resizeAxis},this.resizeHandle);}if(this.dockable){var _3=this.dockTo;if(this.dockTo){this.dockTo=dijit.byId(this.dockTo);}else{this.dockTo=dijit.byId("dojoxGlobalFloatingDock");}if(!this.dockTo){var _4;var _5;if(_3){_4=_3;_5=dojo.byId(_3);}else{_5=document.createElement("div");dojo.body().appendChild(_5);dojo.addClass(_5,"dojoxFloatingDockDefault");_4="dojoxGlobalFloatingDock";}this.dockTo=new dojox.layout.Dock({id:_4,autoPosition:"south"},_5);this.dockTo.startup();}if((this.domNode.style.display=="none")||(this.domNode.style.visibility=="hidden")){this.minimize();}}if(this.movable){this.connect(this.focusNode,"onmousedown","bringToTop");this.connect(this.domNode,"onmousedown","bringToTop");this.resize(dojo.coords(this.domNode));}this._started=true;},setHitch:function(_6,_7){eval(_6+"( this, href );");},_windowshade:function(){this.containerNode.style.display=this.canvas.style.display=this.shadeNode.style.display="none";this.unshadeNode.style.display="block";_canheight=this.domNode.style.height;this.domNode.style.height="24px";},_unwindowshade:function(){this.canvas.style.display=this.containerNode.style.display=this.shadeNode.style.display="block";this.unshadeNode.style.display="none";this.domNode.style.height=_canheight;},close:function(){if(!this.closable){return;}dojo.unsubscribe(this._listener);dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";this.domNode.style.visibility="hidden";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null);}this.doDestroy();})}).play();},doDestroy:function(_8){this.domNode.innerHTML="";this.destroy();}});}