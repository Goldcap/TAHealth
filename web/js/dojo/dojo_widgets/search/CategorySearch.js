/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojo_widgets.search.CategorySearch"]){dojo._hasResource["dojo_widgets.search.CategorySearch"]=true;dojo.provide("dojo_widgets.search.CategorySearch");dojo.experimental("dojo_widgets.search.CategorySearch");dojo.require("dijit.Dialog");dojo.require("dijit._Widget");dojo.declare("dojo_widgets.search.CategorySearch",[dijit._Widget],{artistStore:null,artistSelect:null,DojoSearchField:null,DojoSearchSubmit:null,DojoRecordsField:null,SearchURL:null,theDialog:null,postCreate:function(){this.inherited(arguments);this.DojoSearchField=dojo.byId("DojoSearchField");this.DojoSearchSubmit=dojo.byId("DojoSearchSubmit");this.DojoSearchField.value="Enter Tattoo Keyword";dojo.connect(this.DojoSearchField,"onfocus",null,this.toggleSearchInputIn);dojo.connect(this.DojoSearchField,"onblur",null,this.toggleSearchInputOut);dojo.connect(this.DojoSearchSubmit,"onclick",this,this.submitSearch);this.SearchURL=location.pathname.split("/");},startup:function(){this.inherited(arguments);},submitSearch:function(e){dojo.stopEvent(e);this.doSearch();},doSearch:function(){if(this.DojoSearchField.value=="Enter Tattoo Keyword"){window.location="/search/featured?result=false";return false;}url="/search";if(this.DojoSearchField.value!="Enter Tattoo Keyword"){url=url+"/"+this.DojoSearchField.value;}document.location.href=url;return false;},toggleSearchInputIn:function(){(this.value=="Enter Tattoo Keyword")?this.value="":null;},toggleSearchInputOut:function(){(this.value=="")?this.value="Enter Tattoo Keyword":null;},update:function(){var _r=(dojo.byId("search_term"))?dojo.byId("search_term").innerHTML:false;var _l=(dojo.byId("search_params"))?dojo.byId("search_params").innerHTML:false;if(_l!=""){var _4=dojo.fromJson(_l);}if(_4){var _7=(_4.cmap)?_4.cmap:false;var _8=(_4.size)?_4.size:false;var _9=(_4.adult)?_4.adult:false;var _a=(_4.records)?_4.records:false;var _b=(_4.artist)?_4.artist:false;var _r=(_4.op)?_4.op:false;}else{var _7=this.in_url("cmap");var _8=this.in_url("size");var _9=this.in_url("adult");var _a=this.in_url("records");var _b=this.in_url("artist");}if((_r!=false)&&(_r!="last")&&(_r!="Artist")){this.DojoSearchField.value=_r.replace("%20"," ");}if(_a!=false){var si;switch(_a){case "12":si=0;break;case "24":si=1;break;case "36":si=2;break;case "60":si=3;break;default:si=0;break;}this.DojoRecordsField.options[si].selected=true;}if(_9!=false){if(_9.match(/true/)){document.getElementById("adult_search").checked=true;}}if(_8!=false){if(!_8.match(/small/)){document.getElementById("small").checked=false;}if(!_8.match(/medium/)){document.getElementById("medium").checked=false;}if(!_8.match(/large/)){document.getElementById("large").checked=false;}}if(_7!=false){if(!_7.match(/bw/)){document.getElementById("bw").checked=false;}if(!_7.match(/color/)){document.getElementById("color").checked=false;}}if((_b!=false)&&(_b!=undefined)){for(i=1;i<this.artistSelect.options.length;i++){if(this.artistSelect.options[i].value==_b.replace("%20"," ")){this.artistSelect.selectedIndex=i;break;}}}},toggleDiv:function(_c){if((!dojo.style(_c,"display"))||(dojo.style(_c,"display")=="none")){var i=dojo.fadeIn({node:_c});dojo.connect(i,"beforeBegin",function(){dojo.style(_c,"opacity",0);dojo.style(_c,"display","block");});i.play();}else{var o=dojo.fadeOut({node:_c});dojo.connect(o,"onEnd",function(){dojo.style(_c,"opacity",0);dojo.style(_c,"display","none");});o.play();}},in_url:function(_f){var a=false;for(var i=0;i<this.SearchURL.length;i++){if(_f==this.SearchURL[i]){a=this.SearchURL[i+1];break;}}return a;}});}