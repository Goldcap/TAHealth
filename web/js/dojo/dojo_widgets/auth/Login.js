/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojo_widgets.auth.Login"]){dojo._hasResource["dojo_widgets.auth.Login"]=true;dojo.provide("dojo_widgets.auth.Login");dojo.experimental("dojo_widgets.auth.Login");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.declare("dojo_widgets.auth.Login",[dijit._Widget,dijit._Templated],{widgetID:null,nickname:"",fname:"",auth:null,templatePath:"/js/dojo/dojo_widgets/auth/resources/Login.html",postCreate:function(){this.inherited(arguments);this.widgetID=this.id;dojo.connect(this.DojoLoginEmail,"onfocus",null,this.toggleEmailInputIn);dojo.connect(this.DojoLoginEmail,"onblur",null,this.toggleEmailInputOut);dojo.connect(this.DojoLoginPassword,"onfocus",null,this.togglePasswordInputIn);dojo.connect(this.DojoLoginPassword,"onblur",null,this.togglePasswordInputOut);this.init();},startup:function(){this.inherited(arguments);},init:function(){this.toggleDiv(this.DojoLoginLoader);dojo.xhrGet({url:"/service/Login",handle:this.setLogin,handleAs:"json"});return true;},setLogin:function(_1){var _2=_1 instanceof Error;if(!_2){if(_1.authenticated=="true"){dojo.byId("DojoLoginNickname").innerHTML=_1.nickname;toggleDiv("DojoLoginWindow");}else{toggleDiv("DojoLoginPane");}}},toggleEmailInputIn:function(){(this.value=="Enter Your Email")?this.value="":null;},toggleEmailInputOut:function(){(this.value=="")?this.value="Enter Your Email":null;},togglePasswordInputIn:function(){(this.value=="Enter Your Password")?this.value="":null;},togglePasswordInputOut:function(){(this.value=="")?this.value="Enter Your Password":null;},update:function(){},toggleDiv:function(_3){if((!dojo.style(_3,"display"))||(dojo.style(_3,"display")=="none")){var i=dojo.fadeIn({node:_3});dojo.connect(i,"beforeBegin",function(){dojo.style(_3,"opacity",0);dojo.style(_3,"display","block");});i.play();}else{var o=dojo.fadeOut({node:_3});dojo.connect(o,"onEnd",function(){dojo.style(_3,"opacity",0);dojo.style(_3,"display","none");});o.play();}}});}